{"version":3,"file":"static/js/358.b960da54.chunk.js","mappings":"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","sources":["../node_modules/desandro-matches-selector/matches-selector.js","../node_modules/ev-emitter/ev-emitter.js","../node_modules/fizzy-ui-utils/utils.js","../node_modules/get-size/get-size.js","../node_modules/imagesloaded/imagesloaded.js","../node_modules/imagesloaded/node_modules/ev-emitter/ev-emitter.js","../node_modules/src/lg-events.ts","../node_modules/src/plugins/hash/lg-hash-settings.ts","../node_modules/src/plugins/hash/lg-hash.ts","../node_modules/src/plugins/thumbnail/lg-thumbnail-settings.ts","../node_modules/src/plugins/thumbnail/lg-thumbnail.ts","../node_modules/src/plugins/video/lg-video-settings.ts","../node_modules/src/plugins/video/lg-video-utils.ts","../node_modules/src/plugins/video/lg-video.ts","../node_modules/src/plugins/zoom/lg-zoom-settings.ts","../node_modules/src/plugins/zoom/lg-zoom.ts","../node_modules/dist/lightgallery.es5.js","../node_modules/masonry-layout/masonry.js","../node_modules/outlayer/item.js","../node_modules/outlayer/outlayer.js","../node_modules/@babel/runtime/helpers/arrayLikeToArray.js","../node_modules/@babel/runtime/helpers/arrayWithoutHoles.js","../node_modules/@babel/runtime/helpers/createForOfIteratorHelper.js","../node_modules/@babel/runtime/helpers/iterableToArray.js","../node_modules/@babel/runtime/helpers/nonIterableSpread.js","../node_modules/@babel/runtime/helpers/toConsumableArray.js","../node_modules/@babel/runtime/helpers/unsupportedIterableToArray.js"],"sourcesContent":["/**\n * matchesSelector v2.0.2\n * matchesSelector( element, '.selector' )\n * MIT license\n */\n\n/*jshint browser: true, strict: true, undef: true, unused: true */\n\n( function( window, factory ) {\n  /*global define: false, module: false */\n  'use strict';\n  // universal module definition\n  if ( typeof define == 'function' && define.amd ) {\n    // AMD\n    define( factory );\n  } else if ( typeof module == 'object' && module.exports ) {\n    // CommonJS\n    module.exports = factory();\n  } else {\n    // browser global\n    window.matchesSelector = factory();\n  }\n\n}( window, function factory() {\n  'use strict';\n\n  var matchesMethod = ( function() {\n    var ElemProto = window.Element.prototype;\n    // check for the standard method name first\n    if ( ElemProto.matches ) {\n      return 'matches';\n    }\n    // check un-prefixed\n    if ( ElemProto.matchesSelector ) {\n      return 'matchesSelector';\n    }\n    // check vendor prefixes\n    var prefixes = [ 'webkit', 'moz', 'ms', 'o' ];\n\n    for ( var i=0; i < prefixes.length; i++ ) {\n      var prefix = prefixes[i];\n      var method = prefix + 'MatchesSelector';\n      if ( ElemProto[ method ] ) {\n        return method;\n      }\n    }\n  })();\n\n  return function matchesSelector( elem, selector ) {\n    return elem[ matchesMethod ]( selector );\n  };\n\n}));\n","/**\n * EvEmitter v1.1.0\n * Lil' event emitter\n * MIT License\n */\n\n/* jshint unused: true, undef: true, strict: true */\n\n( function( global, factory ) {\n  // universal module definition\n  /* jshint strict: false */ /* globals define, module, window */\n  if ( typeof define == 'function' && define.amd ) {\n    // AMD - RequireJS\n    define( factory );\n  } else if ( typeof module == 'object' && module.exports ) {\n    // CommonJS - Browserify, Webpack\n    module.exports = factory();\n  } else {\n    // Browser globals\n    global.EvEmitter = factory();\n  }\n\n}( typeof window != 'undefined' ? window : this, function() {\n\n\"use strict\";\n\nfunction EvEmitter() {}\n\nvar proto = EvEmitter.prototype;\n\nproto.on = function( eventName, listener ) {\n  if ( !eventName || !listener ) {\n    return;\n  }\n  // set events hash\n  var events = this._events = this._events || {};\n  // set listeners array\n  var listeners = events[ eventName ] = events[ eventName ] || [];\n  // only add once\n  if ( listeners.indexOf( listener ) == -1 ) {\n    listeners.push( listener );\n  }\n\n  return this;\n};\n\nproto.once = function( eventName, listener ) {\n  if ( !eventName || !listener ) {\n    return;\n  }\n  // add event\n  this.on( eventName, listener );\n  // set once flag\n  // set onceEvents hash\n  var onceEvents = this._onceEvents = this._onceEvents || {};\n  // set onceListeners object\n  var onceListeners = onceEvents[ eventName ] = onceEvents[ eventName ] || {};\n  // set flag\n  onceListeners[ listener ] = true;\n\n  return this;\n};\n\nproto.off = function( eventName, listener ) {\n  var listeners = this._events && this._events[ eventName ];\n  if ( !listeners || !listeners.length ) {\n    return;\n  }\n  var index = listeners.indexOf( listener );\n  if ( index != -1 ) {\n    listeners.splice( index, 1 );\n  }\n\n  return this;\n};\n\nproto.emitEvent = function( eventName, args ) {\n  var listeners = this._events && this._events[ eventName ];\n  if ( !listeners || !listeners.length ) {\n    return;\n  }\n  // copy over to avoid interference if .off() in listener\n  listeners = listeners.slice(0);\n  args = args || [];\n  // once stuff\n  var onceListeners = this._onceEvents && this._onceEvents[ eventName ];\n\n  for ( var i=0; i < listeners.length; i++ ) {\n    var listener = listeners[i]\n    var isOnce = onceListeners && onceListeners[ listener ];\n    if ( isOnce ) {\n      // remove listener\n      // remove before trigger to prevent recursion\n      this.off( eventName, listener );\n      // unset once flag\n      delete onceListeners[ listener ];\n    }\n    // trigger listener\n    listener.apply( this, args );\n  }\n\n  return this;\n};\n\nproto.allOff = function() {\n  delete this._events;\n  delete this._onceEvents;\n};\n\nreturn EvEmitter;\n\n}));\n","/**\n * Fizzy UI utils v2.0.7\n * MIT license\n */\n\n/*jshint browser: true, undef: true, unused: true, strict: true */\n\n( function( window, factory ) {\n  // universal module definition\n  /*jshint strict: false */ /*globals define, module, require */\n\n  if ( typeof define == 'function' && define.amd ) {\n    // AMD\n    define( [\n      'desandro-matches-selector/matches-selector'\n    ], function( matchesSelector ) {\n      return factory( window, matchesSelector );\n    });\n  } else if ( typeof module == 'object' && module.exports ) {\n    // CommonJS\n    module.exports = factory(\n      window,\n      require('desandro-matches-selector')\n    );\n  } else {\n    // browser global\n    window.fizzyUIUtils = factory(\n      window,\n      window.matchesSelector\n    );\n  }\n\n}( window, function factory( window, matchesSelector ) {\n\n'use strict';\n\nvar utils = {};\n\n// ----- extend ----- //\n\n// extends objects\nutils.extend = function( a, b ) {\n  for ( var prop in b ) {\n    a[ prop ] = b[ prop ];\n  }\n  return a;\n};\n\n// ----- modulo ----- //\n\nutils.modulo = function( num, div ) {\n  return ( ( num % div ) + div ) % div;\n};\n\n// ----- makeArray ----- //\n\nvar arraySlice = Array.prototype.slice;\n\n// turn element or nodeList into an array\nutils.makeArray = function( obj ) {\n  if ( Array.isArray( obj ) ) {\n    // use object if already an array\n    return obj;\n  }\n  // return empty array if undefined or null. #6\n  if ( obj === null || obj === undefined ) {\n    return [];\n  }\n\n  var isArrayLike = typeof obj == 'object' && typeof obj.length == 'number';\n  if ( isArrayLike ) {\n    // convert nodeList to array\n    return arraySlice.call( obj );\n  }\n\n  // array of single index\n  return [ obj ];\n};\n\n// ----- removeFrom ----- //\n\nutils.removeFrom = function( ary, obj ) {\n  var index = ary.indexOf( obj );\n  if ( index != -1 ) {\n    ary.splice( index, 1 );\n  }\n};\n\n// ----- getParent ----- //\n\nutils.getParent = function( elem, selector ) {\n  while ( elem.parentNode && elem != document.body ) {\n    elem = elem.parentNode;\n    if ( matchesSelector( elem, selector ) ) {\n      return elem;\n    }\n  }\n};\n\n// ----- getQueryElement ----- //\n\n// use element as selector string\nutils.getQueryElement = function( elem ) {\n  if ( typeof elem == 'string' ) {\n    return document.querySelector( elem );\n  }\n  return elem;\n};\n\n// ----- handleEvent ----- //\n\n// enable .ontype to trigger from .addEventListener( elem, 'type' )\nutils.handleEvent = function( event ) {\n  var method = 'on' + event.type;\n  if ( this[ method ] ) {\n    this[ method ]( event );\n  }\n};\n\n// ----- filterFindElements ----- //\n\nutils.filterFindElements = function( elems, selector ) {\n  // make array of elems\n  elems = utils.makeArray( elems );\n  var ffElems = [];\n\n  elems.forEach( function( elem ) {\n    // check that elem is an actual element\n    if ( !( elem instanceof HTMLElement ) ) {\n      return;\n    }\n    // add elem if no selector\n    if ( !selector ) {\n      ffElems.push( elem );\n      return;\n    }\n    // filter & find items if we have a selector\n    // filter\n    if ( matchesSelector( elem, selector ) ) {\n      ffElems.push( elem );\n    }\n    // find children\n    var childElems = elem.querySelectorAll( selector );\n    // concat childElems to filterFound array\n    for ( var i=0; i < childElems.length; i++ ) {\n      ffElems.push( childElems[i] );\n    }\n  });\n\n  return ffElems;\n};\n\n// ----- debounceMethod ----- //\n\nutils.debounceMethod = function( _class, methodName, threshold ) {\n  threshold = threshold || 100;\n  // original method\n  var method = _class.prototype[ methodName ];\n  var timeoutName = methodName + 'Timeout';\n\n  _class.prototype[ methodName ] = function() {\n    var timeout = this[ timeoutName ];\n    clearTimeout( timeout );\n\n    var args = arguments;\n    var _this = this;\n    this[ timeoutName ] = setTimeout( function() {\n      method.apply( _this, args );\n      delete _this[ timeoutName ];\n    }, threshold );\n  };\n};\n\n// ----- docReady ----- //\n\nutils.docReady = function( callback ) {\n  var readyState = document.readyState;\n  if ( readyState == 'complete' || readyState == 'interactive' ) {\n    // do async to allow for other scripts to run. metafizzy/flickity#441\n    setTimeout( callback );\n  } else {\n    document.addEventListener( 'DOMContentLoaded', callback );\n  }\n};\n\n// ----- htmlInit ----- //\n\n// http://jamesroberts.name/blog/2010/02/22/string-functions-for-javascript-trim-to-camel-case-to-dashed-and-to-underscore/\nutils.toDashed = function( str ) {\n  return str.replace( /(.)([A-Z])/g, function( match, $1, $2 ) {\n    return $1 + '-' + $2;\n  }).toLowerCase();\n};\n\nvar console = window.console;\n/**\n * allow user to initialize classes via [data-namespace] or .js-namespace class\n * htmlInit( Widget, 'widgetName' )\n * options are parsed from data-namespace-options\n */\nutils.htmlInit = function( WidgetClass, namespace ) {\n  utils.docReady( function() {\n    var dashedNamespace = utils.toDashed( namespace );\n    var dataAttr = 'data-' + dashedNamespace;\n    var dataAttrElems = document.querySelectorAll( '[' + dataAttr + ']' );\n    var jsDashElems = document.querySelectorAll( '.js-' + dashedNamespace );\n    var elems = utils.makeArray( dataAttrElems )\n      .concat( utils.makeArray( jsDashElems ) );\n    var dataOptionsAttr = dataAttr + '-options';\n    var jQuery = window.jQuery;\n\n    elems.forEach( function( elem ) {\n      var attr = elem.getAttribute( dataAttr ) ||\n        elem.getAttribute( dataOptionsAttr );\n      var options;\n      try {\n        options = attr && JSON.parse( attr );\n      } catch ( error ) {\n        // log error, do not initialize\n        if ( console ) {\n          console.error( 'Error parsing ' + dataAttr + ' on ' + elem.className +\n          ': ' + error );\n        }\n        return;\n      }\n      // initialize\n      var instance = new WidgetClass( elem, options );\n      // make available via $().data('namespace')\n      if ( jQuery ) {\n        jQuery.data( elem, namespace, instance );\n      }\n    });\n\n  });\n};\n\n// -----  ----- //\n\nreturn utils;\n\n}));\n","/*!\n * getSize v2.0.3\n * measure size of elements\n * MIT license\n */\n\n/* jshint browser: true, strict: true, undef: true, unused: true */\n/* globals console: false */\n\n( function( window, factory ) {\n  /* jshint strict: false */ /* globals define, module */\n  if ( typeof define == 'function' && define.amd ) {\n    // AMD\n    define( factory );\n  } else if ( typeof module == 'object' && module.exports ) {\n    // CommonJS\n    module.exports = factory();\n  } else {\n    // browser global\n    window.getSize = factory();\n  }\n\n})( window, function factory() {\n'use strict';\n\n// -------------------------- helpers -------------------------- //\n\n// get a number from a string, not a percentage\nfunction getStyleSize( value ) {\n  var num = parseFloat( value );\n  // not a percent like '100%', and a number\n  var isValid = value.indexOf('%') == -1 && !isNaN( num );\n  return isValid && num;\n}\n\nfunction noop() {}\n\nvar logError = typeof console == 'undefined' ? noop :\n  function( message ) {\n    console.error( message );\n  };\n\n// -------------------------- measurements -------------------------- //\n\nvar measurements = [\n  'paddingLeft',\n  'paddingRight',\n  'paddingTop',\n  'paddingBottom',\n  'marginLeft',\n  'marginRight',\n  'marginTop',\n  'marginBottom',\n  'borderLeftWidth',\n  'borderRightWidth',\n  'borderTopWidth',\n  'borderBottomWidth'\n];\n\nvar measurementsLength = measurements.length;\n\nfunction getZeroSize() {\n  var size = {\n    width: 0,\n    height: 0,\n    innerWidth: 0,\n    innerHeight: 0,\n    outerWidth: 0,\n    outerHeight: 0\n  };\n  for ( var i=0; i < measurementsLength; i++ ) {\n    var measurement = measurements[i];\n    size[ measurement ] = 0;\n  }\n  return size;\n}\n\n// -------------------------- getStyle -------------------------- //\n\n/**\n * getStyle, get style of element, check for Firefox bug\n * https://bugzilla.mozilla.org/show_bug.cgi?id=548397\n */\nfunction getStyle( elem ) {\n  var style = getComputedStyle( elem );\n  if ( !style ) {\n    logError( 'Style returned ' + style +\n      '. Are you running this code in a hidden iframe on Firefox? ' +\n      'See https://bit.ly/getsizebug1' );\n  }\n  return style;\n}\n\n// -------------------------- setup -------------------------- //\n\nvar isSetup = false;\n\nvar isBoxSizeOuter;\n\n/**\n * setup\n * check isBoxSizerOuter\n * do on first getSize() rather than on page load for Firefox bug\n */\nfunction setup() {\n  // setup once\n  if ( isSetup ) {\n    return;\n  }\n  isSetup = true;\n\n  // -------------------------- box sizing -------------------------- //\n\n  /**\n   * Chrome & Safari measure the outer-width on style.width on border-box elems\n   * IE11 & Firefox<29 measures the inner-width\n   */\n  var div = document.createElement('div');\n  div.style.width = '200px';\n  div.style.padding = '1px 2px 3px 4px';\n  div.style.borderStyle = 'solid';\n  div.style.borderWidth = '1px 2px 3px 4px';\n  div.style.boxSizing = 'border-box';\n\n  var body = document.body || document.documentElement;\n  body.appendChild( div );\n  var style = getStyle( div );\n  // round value for browser zoom. desandro/masonry#928\n  isBoxSizeOuter = Math.round( getStyleSize( style.width ) ) == 200;\n  getSize.isBoxSizeOuter = isBoxSizeOuter;\n\n  body.removeChild( div );\n}\n\n// -------------------------- getSize -------------------------- //\n\nfunction getSize( elem ) {\n  setup();\n\n  // use querySeletor if elem is string\n  if ( typeof elem == 'string' ) {\n    elem = document.querySelector( elem );\n  }\n\n  // do not proceed on non-objects\n  if ( !elem || typeof elem != 'object' || !elem.nodeType ) {\n    return;\n  }\n\n  var style = getStyle( elem );\n\n  // if hidden, everything is 0\n  if ( style.display == 'none' ) {\n    return getZeroSize();\n  }\n\n  var size = {};\n  size.width = elem.offsetWidth;\n  size.height = elem.offsetHeight;\n\n  var isBorderBox = size.isBorderBox = style.boxSizing == 'border-box';\n\n  // get all measurements\n  for ( var i=0; i < measurementsLength; i++ ) {\n    var measurement = measurements[i];\n    var value = style[ measurement ];\n    var num = parseFloat( value );\n    // any 'auto', 'medium' value will be 0\n    size[ measurement ] = !isNaN( num ) ? num : 0;\n  }\n\n  var paddingWidth = size.paddingLeft + size.paddingRight;\n  var paddingHeight = size.paddingTop + size.paddingBottom;\n  var marginWidth = size.marginLeft + size.marginRight;\n  var marginHeight = size.marginTop + size.marginBottom;\n  var borderWidth = size.borderLeftWidth + size.borderRightWidth;\n  var borderHeight = size.borderTopWidth + size.borderBottomWidth;\n\n  var isBorderBoxSizeOuter = isBorderBox && isBoxSizeOuter;\n\n  // overwrite width and height if we can get it from style\n  var styleWidth = getStyleSize( style.width );\n  if ( styleWidth !== false ) {\n    size.width = styleWidth +\n      // add padding and border unless it's already including it\n      ( isBorderBoxSizeOuter ? 0 : paddingWidth + borderWidth );\n  }\n\n  var styleHeight = getStyleSize( style.height );\n  if ( styleHeight !== false ) {\n    size.height = styleHeight +\n      // add padding and border unless it's already including it\n      ( isBorderBoxSizeOuter ? 0 : paddingHeight + borderHeight );\n  }\n\n  size.innerWidth = size.width - ( paddingWidth + borderWidth );\n  size.innerHeight = size.height - ( paddingHeight + borderHeight );\n\n  size.outerWidth = size.width + marginWidth;\n  size.outerHeight = size.height + marginHeight;\n\n  return size;\n}\n\nreturn getSize;\n\n});\n","/*!\n * imagesLoaded v5.0.0\n * JavaScript is all like \"You images are done yet or what?\"\n * MIT License\n */\n\n( function( window, factory ) {\n  // universal module definition\n  if ( typeof module == 'object' && module.exports ) {\n    // CommonJS\n    module.exports = factory( window, require('ev-emitter') );\n  } else {\n    // browser global\n    window.imagesLoaded = factory( window, window.EvEmitter );\n  }\n\n} )( typeof window !== 'undefined' ? window : this,\n    function factory( window, EvEmitter ) {\n\nlet $ = window.jQuery;\nlet console = window.console;\n\n// -------------------------- helpers -------------------------- //\n\n// turn element or nodeList into an array\nfunction makeArray( obj ) {\n  // use object if already an array\n  if ( Array.isArray( obj ) ) return obj;\n\n  let isArrayLike = typeof obj == 'object' && typeof obj.length == 'number';\n  // convert nodeList to array\n  if ( isArrayLike ) return [ ...obj ];\n\n  // array of single index\n  return [ obj ];\n}\n\n// -------------------------- imagesLoaded -------------------------- //\n\n/**\n * @param {[Array, Element, NodeList, String]} elem\n * @param {[Object, Function]} options - if function, use as callback\n * @param {Function} onAlways - callback function\n * @returns {ImagesLoaded}\n */\nfunction ImagesLoaded( elem, options, onAlways ) {\n  // coerce ImagesLoaded() without new, to be new ImagesLoaded()\n  if ( !( this instanceof ImagesLoaded ) ) {\n    return new ImagesLoaded( elem, options, onAlways );\n  }\n  // use elem as selector string\n  let queryElem = elem;\n  if ( typeof elem == 'string' ) {\n    queryElem = document.querySelectorAll( elem );\n  }\n  // bail if bad element\n  if ( !queryElem ) {\n    console.error(`Bad element for imagesLoaded ${queryElem || elem}`);\n    return;\n  }\n\n  this.elements = makeArray( queryElem );\n  this.options = {};\n  // shift arguments if no options set\n  if ( typeof options == 'function' ) {\n    onAlways = options;\n  } else {\n    Object.assign( this.options, options );\n  }\n\n  if ( onAlways ) this.on( 'always', onAlways );\n\n  this.getImages();\n  // add jQuery Deferred object\n  if ( $ ) this.jqDeferred = new $.Deferred();\n\n  // HACK check async to allow time to bind listeners\n  setTimeout( this.check.bind( this ) );\n}\n\nImagesLoaded.prototype = Object.create( EvEmitter.prototype );\n\nImagesLoaded.prototype.getImages = function() {\n  this.images = [];\n\n  // filter & find items if we have an item selector\n  this.elements.forEach( this.addElementImages, this );\n};\n\nconst elementNodeTypes = [ 1, 9, 11 ];\n\n/**\n * @param {Node} elem\n */\nImagesLoaded.prototype.addElementImages = function( elem ) {\n  // filter siblings\n  if ( elem.nodeName === 'IMG' ) {\n    this.addImage( elem );\n  }\n  // get background image on element\n  if ( this.options.background === true ) {\n    this.addElementBackgroundImages( elem );\n  }\n\n  // find children\n  // no non-element nodes, #143\n  let { nodeType } = elem;\n  if ( !nodeType || !elementNodeTypes.includes( nodeType ) ) return;\n\n  let childImgs = elem.querySelectorAll('img');\n  // concat childElems to filterFound array\n  for ( let img of childImgs ) {\n    this.addImage( img );\n  }\n\n  // get child background images\n  if ( typeof this.options.background == 'string' ) {\n    let children = elem.querySelectorAll( this.options.background );\n    for ( let child of children ) {\n      this.addElementBackgroundImages( child );\n    }\n  }\n};\n\nconst reURL = /url\\((['\"])?(.*?)\\1\\)/gi;\n\nImagesLoaded.prototype.addElementBackgroundImages = function( elem ) {\n  let style = getComputedStyle( elem );\n  // Firefox returns null if in a hidden iframe https://bugzil.la/548397\n  if ( !style ) return;\n\n  // get url inside url(\"...\")\n  let matches = reURL.exec( style.backgroundImage );\n  while ( matches !== null ) {\n    let url = matches && matches[2];\n    if ( url ) {\n      this.addBackground( url, elem );\n    }\n    matches = reURL.exec( style.backgroundImage );\n  }\n};\n\n/**\n * @param {Image} img\n */\nImagesLoaded.prototype.addImage = function( img ) {\n  let loadingImage = new LoadingImage( img );\n  this.images.push( loadingImage );\n};\n\nImagesLoaded.prototype.addBackground = function( url, elem ) {\n  let background = new Background( url, elem );\n  this.images.push( background );\n};\n\nImagesLoaded.prototype.check = function() {\n  this.progressedCount = 0;\n  this.hasAnyBroken = false;\n  // complete if no images\n  if ( !this.images.length ) {\n    this.complete();\n    return;\n  }\n\n  /* eslint-disable-next-line func-style */\n  let onProgress = ( image, elem, message ) => {\n    // HACK - Chrome triggers event before object properties have changed. #83\n    setTimeout( () => {\n      this.progress( image, elem, message );\n    } );\n  };\n\n  this.images.forEach( function( loadingImage ) {\n    loadingImage.once( 'progress', onProgress );\n    loadingImage.check();\n  } );\n};\n\nImagesLoaded.prototype.progress = function( image, elem, message ) {\n  this.progressedCount++;\n  this.hasAnyBroken = this.hasAnyBroken || !image.isLoaded;\n  // progress event\n  this.emitEvent( 'progress', [ this, image, elem ] );\n  if ( this.jqDeferred && this.jqDeferred.notify ) {\n    this.jqDeferred.notify( this, image );\n  }\n  // check if completed\n  if ( this.progressedCount === this.images.length ) {\n    this.complete();\n  }\n\n  if ( this.options.debug && console ) {\n    console.log( `progress: ${message}`, image, elem );\n  }\n};\n\nImagesLoaded.prototype.complete = function() {\n  let eventName = this.hasAnyBroken ? 'fail' : 'done';\n  this.isComplete = true;\n  this.emitEvent( eventName, [ this ] );\n  this.emitEvent( 'always', [ this ] );\n  if ( this.jqDeferred ) {\n    let jqMethod = this.hasAnyBroken ? 'reject' : 'resolve';\n    this.jqDeferred[ jqMethod ]( this );\n  }\n};\n\n// --------------------------  -------------------------- //\n\nfunction LoadingImage( img ) {\n  this.img = img;\n}\n\nLoadingImage.prototype = Object.create( EvEmitter.prototype );\n\nLoadingImage.prototype.check = function() {\n  // If complete is true and browser supports natural sizes,\n  // try to check for image status manually.\n  let isComplete = this.getIsImageComplete();\n  if ( isComplete ) {\n    // report based on naturalWidth\n    this.confirm( this.img.naturalWidth !== 0, 'naturalWidth' );\n    return;\n  }\n\n  // If none of the checks above matched, simulate loading on detached element.\n  this.proxyImage = new Image();\n  // add crossOrigin attribute. #204\n  if ( this.img.crossOrigin ) {\n    this.proxyImage.crossOrigin = this.img.crossOrigin;\n  }\n  this.proxyImage.addEventListener( 'load', this );\n  this.proxyImage.addEventListener( 'error', this );\n  // bind to image as well for Firefox. #191\n  this.img.addEventListener( 'load', this );\n  this.img.addEventListener( 'error', this );\n  this.proxyImage.src = this.img.currentSrc || this.img.src;\n};\n\nLoadingImage.prototype.getIsImageComplete = function() {\n  // check for non-zero, non-undefined naturalWidth\n  // fixes Safari+InfiniteScroll+Masonry bug infinite-scroll#671\n  return this.img.complete && this.img.naturalWidth;\n};\n\nLoadingImage.prototype.confirm = function( isLoaded, message ) {\n  this.isLoaded = isLoaded;\n  let { parentNode } = this.img;\n  // emit progress with parent <picture> or self <img>\n  let elem = parentNode.nodeName === 'PICTURE' ? parentNode : this.img;\n  this.emitEvent( 'progress', [ this, elem, message ] );\n};\n\n// ----- events ----- //\n\n// trigger specified handler for event type\nLoadingImage.prototype.handleEvent = function( event ) {\n  let method = 'on' + event.type;\n  if ( this[ method ] ) {\n    this[ method ]( event );\n  }\n};\n\nLoadingImage.prototype.onload = function() {\n  this.confirm( true, 'onload' );\n  this.unbindEvents();\n};\n\nLoadingImage.prototype.onerror = function() {\n  this.confirm( false, 'onerror' );\n  this.unbindEvents();\n};\n\nLoadingImage.prototype.unbindEvents = function() {\n  this.proxyImage.removeEventListener( 'load', this );\n  this.proxyImage.removeEventListener( 'error', this );\n  this.img.removeEventListener( 'load', this );\n  this.img.removeEventListener( 'error', this );\n};\n\n// -------------------------- Background -------------------------- //\n\nfunction Background( url, element ) {\n  this.url = url;\n  this.element = element;\n  this.img = new Image();\n}\n\n// inherit LoadingImage prototype\nBackground.prototype = Object.create( LoadingImage.prototype );\n\nBackground.prototype.check = function() {\n  this.img.addEventListener( 'load', this );\n  this.img.addEventListener( 'error', this );\n  this.img.src = this.url;\n  // check if image is already complete\n  let isComplete = this.getIsImageComplete();\n  if ( isComplete ) {\n    this.confirm( this.img.naturalWidth !== 0, 'naturalWidth' );\n    this.unbindEvents();\n  }\n};\n\nBackground.prototype.unbindEvents = function() {\n  this.img.removeEventListener( 'load', this );\n  this.img.removeEventListener( 'error', this );\n};\n\nBackground.prototype.confirm = function( isLoaded, message ) {\n  this.isLoaded = isLoaded;\n  this.emitEvent( 'progress', [ this, this.element, message ] );\n};\n\n// -------------------------- jQuery -------------------------- //\n\nImagesLoaded.makeJQueryPlugin = function( jQuery ) {\n  jQuery = jQuery || window.jQuery;\n  if ( !jQuery ) return;\n\n  // set local variable\n  $ = jQuery;\n  // $().imagesLoaded()\n  $.fn.imagesLoaded = function( options, onAlways ) {\n    let instance = new ImagesLoaded( this, options, onAlways );\n    return instance.jqDeferred.promise( $( this ) );\n  };\n};\n// try making plugin\nImagesLoaded.makeJQueryPlugin();\n\n// --------------------------  -------------------------- //\n\nreturn ImagesLoaded;\n\n} );\n","/**\n * EvEmitter v2.1.1\n * Lil' event emitter\n * MIT License\n */\n\n( function( global, factory ) {\n  // universal module definition\n  if ( typeof module == 'object' && module.exports ) {\n    // CommonJS - Browserify, Webpack\n    module.exports = factory();\n  } else {\n    // Browser globals\n    global.EvEmitter = factory();\n  }\n\n}( typeof window != 'undefined' ? window : this, function() {\n\nfunction EvEmitter() {}\n\nlet proto = EvEmitter.prototype;\n\nproto.on = function( eventName, listener ) {\n  if ( !eventName || !listener ) return this;\n\n  // set events hash\n  let events = this._events = this._events || {};\n  // set listeners array\n  let listeners = events[ eventName ] = events[ eventName ] || [];\n  // only add once\n  if ( !listeners.includes( listener ) ) {\n    listeners.push( listener );\n  }\n\n  return this;\n};\n\nproto.once = function( eventName, listener ) {\n  if ( !eventName || !listener ) return this;\n\n  // add event\n  this.on( eventName, listener );\n  // set once flag\n  // set onceEvents hash\n  let onceEvents = this._onceEvents = this._onceEvents || {};\n  // set onceListeners object\n  let onceListeners = onceEvents[ eventName ] = onceEvents[ eventName ] || {};\n  // set flag\n  onceListeners[ listener ] = true;\n\n  return this;\n};\n\nproto.off = function( eventName, listener ) {\n  let listeners = this._events && this._events[ eventName ];\n  if ( !listeners || !listeners.length ) return this;\n\n  let index = listeners.indexOf( listener );\n  if ( index != -1 ) {\n    listeners.splice( index, 1 );\n  }\n\n  return this;\n};\n\nproto.emitEvent = function( eventName, args ) {\n  let listeners = this._events && this._events[ eventName ];\n  if ( !listeners || !listeners.length ) return this;\n\n  // copy over to avoid interference if .off() in listener\n  listeners = listeners.slice( 0 );\n  args = args || [];\n  // once stuff\n  let onceListeners = this._onceEvents && this._onceEvents[ eventName ];\n\n  for ( let listener of listeners ) {\n    let isOnce = onceListeners && onceListeners[ listener ];\n    if ( isOnce ) {\n      // remove listener\n      // remove before trigger to prevent recursion\n      this.off( eventName, listener );\n      // unset once flag\n      delete onceListeners[ listener ];\n    }\n    // trigger listener\n    listener.apply( this, args );\n  }\n\n  return this;\n};\n\nproto.allOff = function() {\n  delete this._events;\n  delete this._onceEvents;\n  return this;\n};\n\nreturn EvEmitter;\n\n} ) );\n","import { LightGallery } from './lightgallery';\nimport { VideoSource } from './plugins/video/types';\n\n/**\n * List of lightGallery events\n * All events should be documented here\n * Below interfaces are used to build the website documentations\n * */\nexport const lGEvents: {\n    [key: string]: string;\n} = {\n    afterAppendSlide: 'lgAfterAppendSlide',\n    init: 'lgInit',\n    hasVideo: 'lgHasVideo',\n    containerResize: 'lgContainerResize',\n    updateSlides: 'lgUpdateSlides',\n    afterAppendSubHtml: 'lgAfterAppendSubHtml',\n    beforeOpen: 'lgBeforeOpen',\n    afterOpen: 'lgAfterOpen',\n    slideItemLoad: 'lgSlideItemLoad',\n    beforeSlide: 'lgBeforeSlide',\n    afterSlide: 'lgAfterSlide',\n    posterClick: 'lgPosterClick',\n    dragStart: 'lgDragStart',\n    dragMove: 'lgDragMove',\n    dragEnd: 'lgDragEnd',\n    beforeNextSlide: 'lgBeforeNextSlide',\n    beforePrevSlide: 'lgBeforePrevSlide',\n    beforeClose: 'lgBeforeClose',\n    afterClose: 'lgAfterClose',\n    rotateLeft: 'lgRotateLeft',\n    rotateRight: 'lgRotateRight',\n    flipHorizontal: 'lgFlipHorizontal',\n    flipVertical: 'lgFlipVertical',\n    autoplay: 'lgAutoplay',\n    autoplayStart: 'lgAutoplayStart',\n    autoplayStop: 'lgAutoplayStop',\n};\n\n// Follow the below format for the event documentation\n// @method is the method name when event is used with Angular/React components\n\n/**\n * Fired only once when lightGallery is initialized\n * @name lgInit\n * @method onInit\n * @example\n *   const lg = document.getElementById('custom-events-demo');\n *   // Perform any action on lightGallery initialization.\n *   // Init event returns the plugin instance that can be used to call any lightGalley public method\n *   let pluginInstance = null;\n *   lg.addEventListener('lgInit', (event) => {\n *      pluginInstance = event.detail.instance;\n *   });\n *   lightGallery(lg);\n * @see <a href=\"/docs/methods\">Methods<a>\n */\nexport interface InitDetail {\n    /**\n     * lightGallery plugin instance\n     */\n    instance: LightGallery;\n}\n\n/**\n * Fired when the slide content has been inserted into it's slide container.\n * @name lgAfterAppendSlide\n * @method onAfterAppendSlide\n */\nexport interface AfterAppendSlideEventDetail {\n    /**\n     * Index of the slide\n     */\n    index: number;\n}\n\n/**\n * Fired immediately before opening the gallery\n * @name lgBeforeOpen\n * @method onBeforeOpen\n */\nexport interface BeforeOpenDetail {}\n\n/**\n * Fired immediately after opening the gallery\n * @name lgAfterOpen\n * @method onAfterOpen\n */\nexport interface AfterOpenDetail {}\n\n/**\n * Fired once the media inside the slide has been completely loaded .\n * @name lgSlideItemLoad\n * @method onSlideItemLoad\n */\nexport interface SlideItemLoadDetail {\n    /**\n     * Index of the slide\n     */\n    index: number;\n    /**\n     * For the first slide, lightGallery adds some delay for displaying the loaded slide item.\n     * This delay is required for the transition effect when the slide item is displayed\n     * Respect the delay when you use this event\n     */\n    delay: number;\n\n    // Will be true for the first slide\n    isFirstSlide: boolean;\n}\n\n/**\n * Fired immediately before each slide transition.\n * @name lgBeforeSlide\n * @method onBeforeSlide\n * @example\n *   const lg = document.getElementById('custom-events-demo');\n *   // Perform any action before each slide transition\n *   lg.addEventListener('lgBeforeSlide', (event) => {\n *       const { index, prevIndex } = event.detail;\n *       alert(index, prevIndex);\n *   });\n *   lightGallery(lg);\n */\nexport interface BeforeSlideDetail {\n    /**\n     * Index of the previous slide\n     */\n    prevIndex: number;\n    /**\n     * Index of the slide\n     */\n    index: number;\n    /**\n     * true if slide function called via touch event or mouse drag\n     */\n    fromTouch: boolean;\n    /**\n     * true if slide function called via thumbnail click\n     */\n    fromThumb: boolean;\n}\n\n/**\n * Fired immediately after each slide transition.\n * @name lgAfterSlide\n * @method onAfterSlide\n */\nexport interface AfterSlideDetail {\n    /**\n     * Index of the previous slide\n     */\n    prevIndex: number;\n    /**\n     * Index of the slide\n     */\n    index: number;\n    /**\n     * true if slide function called via touch event or mouse drag\n     */\n    fromTouch: boolean;\n    /**\n     * true if slide function called via thumbnail click\n     */\n    fromThumb: boolean;\n}\n\n/**\n * Fired when the video poster is clicked.\n * @name lgPosterClick\n * @method onPosterClick\n */\nexport interface PosterClickDetail {}\n\n/**\n * Fired when the drag event to move to different slide starts.\n * @name lgDragStart\n * @method onDragStart\n */\nexport interface DragStartDetail {}\n\n/**\n * Fired periodically during the drag operation.\n * @name lgDragMove\n * @method onDragMove\n */\nexport interface DragMoveDetail {}\n\n/**\n * Fired when the user has finished the drag operation\n * @name lgDragEnd\n * @method onDragEnd\n */\nexport interface DragEndDetail {}\n\n/**\n * Fired immediately before the start of the close process.\n * @name lgBeforeClose\n * @method onBeforeClose\n */\nexport interface BeforeCloseDetail {}\n\n/**\n * Fired immediately once lightGallery is closed.\n * @name lgAfterClose\n * @method onAfterClose\n */\nexport interface AfterCloseDetail {\n    /**\n     * lightGallery plugin instance\n     */\n    instance: LightGallery;\n}\n\n/**\n * Fired immediately before each \"next\" slide transition\n * @name lgBeforeNextSlide\n * @method onBeforeNextSlide\n */\nexport interface BeforeNextSlideDetail {\n    /**\n     * Index of the slide\n     */\n    index: number;\n    /**\n     * true if slide function called via touch event or mouse drag\n     */\n    fromTouch: boolean;\n}\n\n/**\n * Fired immediately before each \"prev\" slide transition\n * @name lgBeforePrevSlide\n * @method onBeforePrevSlide\n */\nexport interface BeforePrevSlideDetail {\n    /**\n     * Index of the slide\n     */\n    index: number;\n    /**\n     * true if slide function called via touch event or mouse drag\n     */\n    fromTouch: boolean;\n}\n\n/**\n * Fired when the sub-html content (ex : title/ description) has been appended into the slide.\n * @name lgAfterAppendSubHtml\n * @method onAfterAppendSubHtml\n */\nexport interface AfterAppendSubHtmlDetail {\n    /**\n     * Index of the slide\n     */\n    index: number;\n}\n\n/**\n * Fired when the lightGallery container has been resized.\n * @name lgContainerResize\n * @method onContainerResize\n */\nexport interface ContainerResizeDetail {\n    /**\n     * Index of the slide\n     */\n    index: number;\n}\n\n/**\n * Fired when lightGallery detects video slide\n * @name lgHasVideo\n * @method onHasVideo\n */\nexport interface HasVideoDetail {\n    /**\n     * Index of the slide,\n     */\n    index: number;\n    /**\n     * Video source\n     */\n    src: string;\n    /**\n     * HTML5 video source if available\n     * <p>\n       HTML5 video source = source: {\n            src: string;\n            type: string;\n        }[];\n        attributes: HTMLVideoElement;\n     * </p>\n     */\n    html5Video: VideoSource;\n    /**\n     * True if video has poster\n     */\n    hasPoster: boolean;\n}\n\n/**\n * Fired when the image is rotated in anticlockwise direction\n * @name lgRotateLeft\n * @method onRotateLeft\n */\nexport interface RotateLeftDetail {\n    /**\n     * Index of the slide\n     */\n    index: number;\n}\n\n/**\n * Fired when the image is rotated in clockwise direction\n * @name lgRotateRight\n * @method onRotateRight\n */\nexport interface RotateRightDetail {\n    /**\n     * Index of the slide\n     */\n    index: number;\n}\n\n/**\n * Fired when the image is flipped horizontally\n * @name lgFlipHorizontal\n * @method onFlipHorizontal\n */\nexport interface FlipHorizontalDetail {\n    /**\n     * Index of the slide\n     */\n    index: number;\n}\n\n/**\n * Fired when the image is flipped vertically\n * @name lgFlipVertical\n * @method onFlipVertical\n */\nexport interface FlipVerticalDetail {\n    /**\n     * Index of the slide\n     */\n    index: number;\n}\n","export interface HashSettings {\n    /**\n     * Enable/Disable hash option\n     */\n    hash: boolean;\n\n    /**\n     * Unique id for each gallery.\n     * @description It is mandatory when you use hash plugin for multiple galleries on the same page.\n     */\n    galleryId: string;\n\n    /**\n     * Custom slide name to use in the url when hash plugin is enabled\n     */\n    customSlideName: boolean;\n}\n\nexport const hashSettings: HashSettings = {\n    hash: true,\n    galleryId: '1',\n    customSlideName: false,\n};\n","import { lGEvents } from '../../lg-events';\nimport { LgQuery } from '../../lgQuery';\nimport { LightGallery } from '../../lightgallery';\nimport { hashSettings, HashSettings } from './lg-hash-settings';\n\nexport default class Hash {\n    core: LightGallery;\n    settings: HashSettings;\n    oldHash!: string;\n    private $LG!: LgQuery;\n    constructor(instance: LightGallery, $LG: LgQuery) {\n        // get lightGallery core plugin instance\n        this.core = instance;\n        this.$LG = $LG;\n        // extend module default settings with lightGallery core settings\n        this.settings = { ...hashSettings, ...this.core.settings };\n        return this;\n    }\n\n    public init(): void {\n        if (!this.settings.hash) {\n            return;\n        }\n        this.oldHash = window.location.hash;\n        setTimeout(() => {\n            this.buildFromHash();\n        }, 100);\n        // Change hash value on after each slide transition\n        this.core.LGel.on(\n            `${lGEvents.afterSlide}.hash`,\n            this.onAfterSlide.bind(this),\n        );\n        this.core.LGel.on(\n            `${lGEvents.afterClose}.hash`,\n            this.onCloseAfter.bind(this),\n        );\n\n        // Listen hash change and change the slide according to slide value\n        this.$LG(window).on(\n            `hashchange.lg.hash.global${this.core.lgId}`,\n            this.onHashchange.bind(this),\n        );\n    }\n\n    private onAfterSlide(event: CustomEvent) {\n        let slideName = this.core.galleryItems[event.detail.index].slideName;\n        slideName = this.settings.customSlideName\n            ? slideName || event.detail.index\n            : event.detail.index;\n        if (history.replaceState) {\n            history.replaceState(\n                null,\n                '',\n                window.location.pathname +\n                    window.location.search +\n                    '#lg=' +\n                    this.settings.galleryId +\n                    '&slide=' +\n                    slideName,\n            );\n        } else {\n            window.location.hash =\n                'lg=' + this.settings.galleryId + '&slide=' + slideName;\n        }\n    }\n\n    /**\n     * Get index of the slide from custom slideName. Has to be a public method. Used in hash plugin\n     * @param {String} hash\n     * @returns {Number} Index of the slide.\n     */\n    getIndexFromUrl(hash = window.location.hash): number {\n        const slideName = hash.split('&slide=')[1];\n        let _idx = 0;\n\n        if (this.settings.customSlideName) {\n            for (\n                let index = 0;\n                index < this.core.galleryItems.length;\n                index++\n            ) {\n                const dynamicEl = this.core.galleryItems[index];\n                if (dynamicEl.slideName === slideName) {\n                    _idx = index;\n                    break;\n                }\n            }\n        } else {\n            _idx = parseInt(slideName, 10);\n        }\n\n        return isNaN(_idx) ? 0 : _idx;\n    }\n\n    // Build Gallery if gallery id exist in the URL\n    buildFromHash(): boolean | undefined {\n        // if dynamic option is enabled execute immediately\n        const _hash = window.location.hash;\n        if (_hash.indexOf('lg=' + this.settings.galleryId) > 0) {\n            // This class is used to remove the initial animation if galleryId present in the URL\n            this.$LG(document.body).addClass('lg-from-hash');\n\n            const index = this.getIndexFromUrl(_hash);\n\n            this.core.openGallery(index);\n            return true;\n        }\n    }\n\n    private onCloseAfter() {\n        // Reset to old hash value\n        if (\n            this.oldHash &&\n            this.oldHash.indexOf('lg=' + this.settings.galleryId) < 0\n        ) {\n            if (history.replaceState) {\n                history.replaceState(null, '', this.oldHash);\n            } else {\n                window.location.hash = this.oldHash;\n            }\n        } else {\n            if (history.replaceState) {\n                history.replaceState(\n                    null,\n                    document.title,\n                    window.location.pathname + window.location.search,\n                );\n            } else {\n                window.location.hash = '';\n            }\n        }\n    }\n\n    private onHashchange() {\n        if (!this.core.lgOpened) return;\n        const _hash = window.location.hash;\n        const index = this.getIndexFromUrl(_hash);\n\n        // it galleryId doesn't exist in the url close the gallery\n        if (_hash.indexOf('lg=' + this.settings.galleryId) > -1) {\n            this.core.slide(index, false, false);\n        } else if (this.core.lGalleryOn) {\n            this.core.closeGallery();\n        }\n    }\n\n    closeGallery(): void {\n        if (this.settings.hash) {\n            this.$LG(document.body).removeClass('lg-from-hash');\n        }\n    }\n\n    destroy(): void {\n        this.core.LGel.off('.lg.hash');\n        this.core.LGel.off('.hash');\n        this.$LG(window).off(`hashchange.lg.hash.global${this.core.lgId}`);\n    }\n}\n","interface ThumbnailStrings {\n    toggleThumbnails: string;\n}\n\nexport interface ThumbnailsSettings {\n    /**\n     * Enable thumbnails for the gallery\n     */\n    thumbnail: boolean;\n\n    /*\n     * Enable thumbnail animation.\n     */\n    animateThumb: boolean;\n\n    /**\n     * Position of selected thumbnail.\n     */\n    currentPagerPosition: 'left' | 'middle' | 'right';\n\n    /**\n     * Position of thumbnails when the width of all thumbnails combined is less than the gallery's width.\n     *\n     */\n    alignThumbnails: 'left' | 'middle' | 'right';\n\n    /**\n     * Width of each thumbnails.\n     */\n    thumbWidth: number;\n\n    /**\n     * Height of each thumbnails.\n     */\n    thumbHeight: string;\n\n    /**\n     * Spacing between each thumbnails\n     */\n    thumbMargin: number;\n\n    /**\n     * control where the thumbnails should be appended.\n     * By default, thumbnails are appended to '.lg-components' which has inbuilt open close transitions\n     * If you don't want initial thumbnails transitions, or want to do more customization,\n     * you can append thumbnails to the lightGalley outer div -\n     * <a href=\"/demos/thumbnails/#static-thumbnails\">Demo</a>\n     */\n    appendThumbnailsTo: '.lg-outer' | '.lg-components';\n\n    /**\n     * Enable toggle captions and thumbnails.\n     * @description not applicable if allowMediaOverlap is false\n     */\n    toggleThumb: boolean;\n\n    /**\n     * Enables desktop mouse drag support for thumbnails.\n     */\n    enableThumbDrag: boolean;\n\n    /**\n     * Enables thumbnail touch/swipe support for touch devices\n     */\n    enableThumbSwipe: boolean;\n\n    /**\n     * By setting the thumbnailSwipeThreshold (in px) you can set how far the user must swipe for the next/prev slide.\n     */\n    thumbnailSwipeThreshold: number;\n\n    /**\n     * You can automatically load thumbnails for YouTube videos from YouTube by setting loadYouTubeThumbnail true\n     */\n    loadYouTubeThumbnail: boolean;\n\n    /**\n     * You can specify the thumbnail size by setting respective number.\n     */\n    //@todo add demo\n    youTubeThumbSize: number;\n\n    /**\n     * Custom translation strings for aria-labels\n     */\n    thumbnailPluginStrings: ThumbnailStrings;\n}\n\nexport const thumbnailsSettings: ThumbnailsSettings = {\n    thumbnail: true,\n\n    animateThumb: true,\n    currentPagerPosition: 'middle',\n    alignThumbnails: 'middle',\n\n    thumbWidth: 100,\n    thumbHeight: '80px',\n    thumbMargin: 5,\n\n    appendThumbnailsTo: '.lg-components',\n    toggleThumb: false,\n\n    enableThumbDrag: true,\n    enableThumbSwipe: true,\n    thumbnailSwipeThreshold: 10,\n\n    loadYouTubeThumbnail: true,\n    youTubeThumbSize: 1,\n\n    thumbnailPluginStrings: {\n        toggleThumbnails: 'Toggle thumbnails',\n    } as ThumbnailStrings,\n};\n","import {\n    ThumbnailsSettings,\n    thumbnailsSettings,\n} from './lg-thumbnail-settings';\nimport { LgQuery, lgQuery } from '../../lgQuery';\nimport { LightGallery } from '../../lightgallery';\nimport { GalleryItem } from '../../lg-utils';\nimport { lGEvents } from '../../lg-events';\n\ninterface ThumbDragUtils {\n    cords: {\n        startX: number;\n        endX: number;\n    };\n    isMoved: boolean;\n    newTranslateX: number;\n    startTime: Date;\n    endTime: Date;\n    touchMoveTime: number;\n}\ninterface ThumbnailGalleryItem extends GalleryItem {\n    thumb: string;\n}\nexport default class Thumbnail {\n    private core: LightGallery;\n    private $thumbOuter!: lgQuery;\n    private $lgThumb!: lgQuery;\n    private thumbOuterWidth = 0;\n    private thumbTotalWidth = 0;\n    private translateX = 0;\n    private thumbClickable = false;\n    private settings!: ThumbnailsSettings;\n    private $LG!: LgQuery;\n    constructor(instance: LightGallery, $LG: LgQuery) {\n        // get lightGallery core plugin instance\n        this.core = instance;\n        this.$LG = $LG;\n\n        return this;\n    }\n\n    init(): void {\n        // extend module default settings with lightGallery core settings\n        this.settings = {\n            ...thumbnailsSettings,\n            ...this.core.settings,\n        };\n        this.thumbOuterWidth = 0;\n        this.thumbTotalWidth =\n            this.core.galleryItems.length *\n            (this.settings.thumbWidth + this.settings.thumbMargin);\n\n        // Thumbnail animation value\n        this.translateX = 0;\n\n        this.setAnimateThumbStyles();\n\n        if (!this.core.settings.allowMediaOverlap) {\n            this.settings.toggleThumb = false;\n        }\n\n        if (this.settings.thumbnail) {\n            this.build();\n            if (this.settings.animateThumb) {\n                if (this.settings.enableThumbDrag) {\n                    this.enableThumbDrag();\n                }\n\n                if (this.settings.enableThumbSwipe) {\n                    this.enableThumbSwipe();\n                }\n\n                this.thumbClickable = false;\n            } else {\n                this.thumbClickable = true;\n            }\n\n            this.toggleThumbBar();\n            this.thumbKeyPress();\n        }\n    }\n\n    build(): void {\n        this.setThumbMarkup();\n        this.manageActiveClassOnSlideChange();\n        this.$lgThumb.first().on('click.lg touchend.lg', (e: CustomEvent) => {\n            const $target = this.$LG(e.target);\n            if (!$target.hasAttribute('data-lg-item-id')) {\n                return;\n            }\n            setTimeout(() => {\n                // In IE9 and bellow touch does not support\n                // Go to slide if browser does not support css transitions\n                if (this.thumbClickable && !this.core.lgBusy) {\n                    const index = parseInt($target.attr('data-lg-item-id'));\n                    this.core.slide(index, false, true, false);\n                }\n            }, 50);\n        });\n\n        this.core.LGel.on(`${lGEvents.beforeSlide}.thumb`, (event) => {\n            const { index } = event.detail;\n            this.animateThumb(index);\n        });\n        this.core.LGel.on(`${lGEvents.beforeOpen}.thumb`, () => {\n            this.thumbOuterWidth = this.core.outer.get().offsetWidth;\n        });\n\n        this.core.LGel.on(`${lGEvents.updateSlides}.thumb`, () => {\n            this.rebuildThumbnails();\n        });\n        this.core.LGel.on(`${lGEvents.containerResize}.thumb`, () => {\n            if (!this.core.lgOpened) return;\n            setTimeout(() => {\n                this.thumbOuterWidth = this.core.outer.get().offsetWidth;\n                this.animateThumb(this.core.index);\n                this.thumbOuterWidth = this.core.outer.get().offsetWidth;\n            }, 50);\n        });\n    }\n\n    setThumbMarkup(): void {\n        let thumbOuterClassNames = 'lg-thumb-outer ';\n\n        if (this.settings.alignThumbnails) {\n            thumbOuterClassNames += `lg-thumb-align-${this.settings.alignThumbnails}`;\n        }\n\n        const html = `<div class=\"${thumbOuterClassNames}\">\n        <div class=\"lg-thumb lg-group\">\n        </div>\n        </div>`;\n\n        this.core.outer.addClass('lg-has-thumb');\n\n        if (this.settings.appendThumbnailsTo === '.lg-components') {\n            this.core.$lgComponents.append(html);\n        } else {\n            this.core.outer.append(html);\n        }\n\n        this.$thumbOuter = this.core.outer.find('.lg-thumb-outer').first();\n        this.$lgThumb = this.core.outer.find('.lg-thumb').first();\n\n        if (this.settings.animateThumb) {\n            this.core.outer\n                .find('.lg-thumb')\n                .css('transition-duration', this.core.settings.speed + 'ms')\n                .css('width', this.thumbTotalWidth + 'px')\n                .css('position', 'relative');\n        }\n\n        this.setThumbItemHtml(\n            (this.core.galleryItems as unknown) as ThumbnailGalleryItem[],\n        );\n    }\n\n    enableThumbDrag(): void {\n        let thumbDragUtils: ThumbDragUtils = {\n            cords: {\n                startX: 0,\n                endX: 0,\n            },\n            isMoved: false,\n            newTranslateX: 0,\n            startTime: new Date(),\n            endTime: new Date(),\n            touchMoveTime: 0,\n        };\n\n        let isDragging = false;\n\n        this.$thumbOuter.addClass('lg-grab');\n\n        this.core.outer\n            .find('.lg-thumb')\n            .first()\n            .on('mousedown.lg.thumb', (e) => {\n                if (this.thumbTotalWidth > this.thumbOuterWidth) {\n                    // execute only on .lg-object\n                    e.preventDefault();\n                    thumbDragUtils.cords.startX = e.pageX;\n\n                    thumbDragUtils.startTime = new Date();\n                    this.thumbClickable = false;\n\n                    isDragging = true;\n\n                    // ** Fix for webkit cursor issue https://code.google.com/p/chromium/issues/detail?id=26723\n                    this.core.outer.get().scrollLeft += 1;\n                    this.core.outer.get().scrollLeft -= 1;\n\n                    // *\n                    this.$thumbOuter\n                        .removeClass('lg-grab')\n                        .addClass('lg-grabbing');\n                }\n            });\n\n        this.$LG(window).on(\n            `mousemove.lg.thumb.global${this.core.lgId}`,\n            (e) => {\n                if (!this.core.lgOpened) return;\n                if (isDragging) {\n                    thumbDragUtils.cords.endX = e.pageX;\n\n                    thumbDragUtils = this.onThumbTouchMove(thumbDragUtils);\n                }\n            },\n        );\n\n        this.$LG(window).on(`mouseup.lg.thumb.global${this.core.lgId}`, () => {\n            if (!this.core.lgOpened) return;\n            if (thumbDragUtils.isMoved) {\n                thumbDragUtils = this.onThumbTouchEnd(thumbDragUtils);\n            } else {\n                this.thumbClickable = true;\n            }\n\n            if (isDragging) {\n                isDragging = false;\n                this.$thumbOuter.removeClass('lg-grabbing').addClass('lg-grab');\n            }\n        });\n    }\n\n    enableThumbSwipe(): void {\n        let thumbDragUtils: ThumbDragUtils = {\n            cords: {\n                startX: 0,\n                endX: 0,\n            },\n            isMoved: false,\n            newTranslateX: 0,\n            startTime: new Date(),\n            endTime: new Date(),\n            touchMoveTime: 0,\n        };\n\n        this.$lgThumb.on('touchstart.lg', (e: TouchEvent) => {\n            if (this.thumbTotalWidth > this.thumbOuterWidth) {\n                e.preventDefault();\n                thumbDragUtils.cords.startX = e.targetTouches[0].pageX;\n                this.thumbClickable = false;\n                thumbDragUtils.startTime = new Date();\n            }\n        });\n\n        this.$lgThumb.on('touchmove.lg', (e: TouchEvent) => {\n            if (this.thumbTotalWidth > this.thumbOuterWidth) {\n                e.preventDefault();\n                thumbDragUtils.cords.endX = e.targetTouches[0].pageX;\n                thumbDragUtils = this.onThumbTouchMove(thumbDragUtils);\n            }\n        });\n\n        this.$lgThumb.on('touchend.lg', () => {\n            if (thumbDragUtils.isMoved) {\n                thumbDragUtils = this.onThumbTouchEnd(thumbDragUtils);\n            } else {\n                this.thumbClickable = true;\n            }\n        });\n    }\n\n    // Rebuild thumbnails\n    rebuildThumbnails(): void {\n        // Remove transitions\n        this.$thumbOuter.addClass('lg-rebuilding-thumbnails');\n        setTimeout(() => {\n            this.thumbTotalWidth =\n                this.core.galleryItems.length *\n                (this.settings.thumbWidth + this.settings.thumbMargin);\n            this.$lgThumb.css('width', this.thumbTotalWidth + 'px');\n            this.$lgThumb.empty();\n            this.setThumbItemHtml(\n                (this.core.galleryItems as unknown) as ThumbnailGalleryItem[],\n            );\n            this.animateThumb(this.core.index);\n        }, 50);\n        setTimeout(() => {\n            this.$thumbOuter.removeClass('lg-rebuilding-thumbnails');\n        }, 200);\n    }\n\n    // @ts-check\n\n    setTranslate(value: number): void {\n        this.$lgThumb.css(\n            'transform',\n            'translate3d(-' + value + 'px, 0px, 0px)',\n        );\n    }\n\n    getPossibleTransformX(left: number): number {\n        if (left > this.thumbTotalWidth - this.thumbOuterWidth) {\n            left = this.thumbTotalWidth - this.thumbOuterWidth;\n        }\n\n        if (left < 0) {\n            left = 0;\n        }\n        return left;\n    }\n\n    animateThumb(index: number): void {\n        this.$lgThumb.css(\n            'transition-duration',\n            this.core.settings.speed + 'ms',\n        );\n        if (this.settings.animateThumb) {\n            let position = 0;\n            switch (this.settings.currentPagerPosition) {\n                case 'left':\n                    position = 0;\n                    break;\n                case 'middle':\n                    position =\n                        this.thumbOuterWidth / 2 - this.settings.thumbWidth / 2;\n                    break;\n                case 'right':\n                    position = this.thumbOuterWidth - this.settings.thumbWidth;\n            }\n            this.translateX =\n                (this.settings.thumbWidth + this.settings.thumbMargin) * index -\n                1 -\n                position;\n            if (this.translateX > this.thumbTotalWidth - this.thumbOuterWidth) {\n                this.translateX = this.thumbTotalWidth - this.thumbOuterWidth;\n            }\n\n            if (this.translateX < 0) {\n                this.translateX = 0;\n            }\n\n            this.setTranslate(this.translateX);\n        }\n    }\n\n    onThumbTouchMove(thumbDragUtils: ThumbDragUtils): ThumbDragUtils {\n        thumbDragUtils.newTranslateX = this.translateX;\n        thumbDragUtils.isMoved = true;\n\n        thumbDragUtils.touchMoveTime = new Date().valueOf();\n\n        thumbDragUtils.newTranslateX -=\n            thumbDragUtils.cords.endX - thumbDragUtils.cords.startX;\n\n        thumbDragUtils.newTranslateX = this.getPossibleTransformX(\n            thumbDragUtils.newTranslateX,\n        );\n\n        // move current slide\n        this.setTranslate(thumbDragUtils.newTranslateX);\n        this.$thumbOuter.addClass('lg-dragging');\n\n        return thumbDragUtils;\n    }\n\n    onThumbTouchEnd(thumbDragUtils: ThumbDragUtils): ThumbDragUtils {\n        thumbDragUtils.isMoved = false;\n        thumbDragUtils.endTime = new Date();\n        this.$thumbOuter.removeClass('lg-dragging');\n\n        const touchDuration =\n            thumbDragUtils.endTime.valueOf() -\n            thumbDragUtils.startTime.valueOf();\n        let distanceXnew =\n            thumbDragUtils.cords.endX - thumbDragUtils.cords.startX;\n        let speedX = Math.abs(distanceXnew) / touchDuration;\n        // Some magical numbers\n        // Can be improved\n        if (\n            speedX > 0.15 &&\n            thumbDragUtils.endTime.valueOf() - thumbDragUtils.touchMoveTime < 30\n        ) {\n            speedX += 1;\n\n            if (speedX > 2) {\n                speedX += 1;\n            }\n            speedX =\n                speedX +\n                speedX * (Math.abs(distanceXnew) / this.thumbOuterWidth);\n            this.$lgThumb.css(\n                'transition-duration',\n                Math.min(speedX - 1, 2) + 'settings',\n            );\n\n            distanceXnew = distanceXnew * speedX;\n\n            this.translateX = this.getPossibleTransformX(\n                this.translateX - distanceXnew,\n            );\n            this.setTranslate(this.translateX);\n        } else {\n            this.translateX = thumbDragUtils.newTranslateX;\n        }\n        if (\n            Math.abs(thumbDragUtils.cords.endX - thumbDragUtils.cords.startX) <\n            this.settings.thumbnailSwipeThreshold\n        ) {\n            this.thumbClickable = true;\n        }\n\n        return thumbDragUtils;\n    }\n\n    getThumbHtml(thumb: string, index: number, alt?: string): string {\n        const slideVideoInfo =\n            this.core.galleryItems[index].__slideVideoInfo || {};\n        let thumbImg;\n\n        if (slideVideoInfo.youtube) {\n            if (this.settings.loadYouTubeThumbnail) {\n                thumbImg =\n                    '//img.youtube.com/vi/' +\n                    slideVideoInfo.youtube[1] +\n                    '/' +\n                    this.settings.youTubeThumbSize +\n                    '.jpg';\n            } else {\n                thumbImg = thumb;\n            }\n        } else {\n            thumbImg = thumb;\n        }\n\n        const altAttr = alt ? 'alt=\"' + alt + '\"' : '';\n\n        return `<div data-lg-item-id=\"${index}\" class=\"lg-thumb-item ${\n            index === this.core.index ? ' active' : ''\n        }\"\n        style=\"width:${this.settings.thumbWidth}px; height: ${\n            this.settings.thumbHeight\n        };\n            margin-right: ${this.settings.thumbMargin}px;\">\n            <img ${altAttr} data-lg-item-id=\"${index}\" src=\"${thumbImg}\" />\n        </div>`;\n    }\n\n    getThumbItemHtml(items: ThumbnailGalleryItem[]): string {\n        let thumbList = '';\n        for (let i = 0; i < items.length; i++) {\n            thumbList += this.getThumbHtml(items[i].thumb, i, items[i].alt);\n        }\n\n        return thumbList;\n    }\n\n    setThumbItemHtml(items: ThumbnailGalleryItem[]): void {\n        const thumbList = this.getThumbItemHtml(items);\n        this.$lgThumb.html(thumbList);\n    }\n\n    setAnimateThumbStyles(): void {\n        if (this.settings.animateThumb) {\n            this.core.outer.addClass('lg-animate-thumb');\n        }\n    }\n\n    // Manage thumbnail active calss\n    manageActiveClassOnSlideChange(): void {\n        // manage active class for thumbnail\n        this.core.LGel.on(\n            `${lGEvents.beforeSlide}.thumb`,\n            (event: CustomEvent) => {\n                const $thumb = this.core.outer.find('.lg-thumb-item');\n                const { index } = event.detail;\n                $thumb.removeClass('active');\n                $thumb.eq(index).addClass('active');\n            },\n        );\n    }\n\n    // Toggle thumbnail bar\n    toggleThumbBar(): void {\n        if (this.settings.toggleThumb) {\n            this.core.outer.addClass('lg-can-toggle');\n            this.core.$toolbar.append(\n                '<button type=\"button\" aria-label=\"' +\n                    this.settings.thumbnailPluginStrings['toggleThumbnails'] +\n                    '\" class=\"lg-toggle-thumb lg-icon\"></button>',\n            );\n            this.core.outer\n                .find('.lg-toggle-thumb')\n                .first()\n                .on('click.lg', () => {\n                    this.core.outer.toggleClass('lg-components-open');\n                });\n        }\n    }\n\n    thumbKeyPress(): void {\n        this.$LG(window).on(`keydown.lg.thumb.global${this.core.lgId}`, (e) => {\n            if (!this.core.lgOpened || !this.settings.toggleThumb) return;\n\n            if (e.keyCode === 38) {\n                e.preventDefault();\n                this.core.outer.addClass('lg-components-open');\n            } else if (e.keyCode === 40) {\n                e.preventDefault();\n                this.core.outer.removeClass('lg-components-open');\n            }\n        });\n    }\n\n    destroy(): void {\n        if (this.settings.thumbnail) {\n            this.$LG(window).off(`.lg.thumb.global${this.core.lgId}`);\n            this.core.LGel.off('.lg.thumb');\n            this.core.LGel.off('.thumb');\n            this.$thumbOuter.remove();\n            this.core.outer.removeClass('lg-has-thumb');\n        }\n    }\n}\n","import { PlayerParams } from './lg-video-utils';\n\nexport interface VideoSettings {\n    /**\n     * Enable/DIsable first video autoplay.\n     * @description Autoplay has to be managed using this setting.\n     * Autoplay in PlayerParams doesn't have any effect.\n     */\n    autoplayFirstVideo: boolean;\n\n    /**\n     * Change YouTube player parameters.\n     * You can find the list of YouTube player parameters from the following link\n     * <a href=\"https://developers.google.com/youtube/player_parameters\">YouTube player parameters</a>\n     * @example\n     * lightGallery(document.getElementById('lightGallery'), {\n     *     youTubePlayerParams: {\n     *         modestbranding : 1,\n     *         showinfo : 0,\n     *         controls : 0\n     *     }\n     * })\n     */\n    youTubePlayerParams: any;\n\n    /**\n     * Change Vimeo player parameters.\n     * You can find the list of vimeo player parameters from the following link\n     * <a href=\"https://developer.vimeo.com/player/embedding#universal-parameters\">Vimeo player parameters</a>\n     * @example\n     * lightGallery(document.getElementById('lightGallery'), {\n     *     vimeoPlayerParams: {\n     *         byline : 0,\n     *         portrait : 0,\n     *         color : 'CCCCCC'\n     *     }\n     * })\n     */\n    vimeoPlayerParams: PlayerParams;\n\n    /**\n     * Change Wistia player parameters.\n     * You can find the list of Wistia player parameters from the following link\n     * <a href=\"https://wistia.com/support/developers/embed-options#using-embed-options\">Vimeo player parameters</a>\n     */\n    wistiaPlayerParams: any;\n\n    /**\n     * Go to next slide when video is ended\n     * Note - this doesn't work with YouTube videos at the moment\n     */\n    gotoNextSlideOnVideoEnd: boolean;\n\n    /**\n     * Autoplay video on slide change\n     * @description Make sure you set preload:\"none\"\n     */\n    autoplayVideoOnSlide: boolean;\n\n    /**\n     * Enbale videojs custom video player\n     * <div class=\"alert alert-info\" role=\"alert\">\n     *     <b>Dependency</b> - You need to include <a href=\"https://videojs.com/\">videoJs</a> on your document to enable videojs player\n     * </div>\n     */\n    videojs: boolean;\n\n    /**\n     * Class name of the videojs theme\n     * You need to include the theme stylesheet on your document. <a href=\"https://videojs.com/getting-started/#home-page-themes\" target=\"_blank\">More info</a>\n     * @version V2.5.0\n     */\n    videojsTheme: string;\n\n    /**\n     * Videojs player options\n     */\n    videojsOptions: any;\n}\nexport const videoSettings: VideoSettings = {\n    autoplayFirstVideo: true,\n    youTubePlayerParams: false,\n    vimeoPlayerParams: false,\n    wistiaPlayerParams: false,\n    gotoNextSlideOnVideoEnd: true,\n    autoplayVideoOnSlide: false,\n    videojs: false,\n    videojsTheme: '',\n    videojsOptions: {},\n};\n","import { VideoInfo } from '../../types';\nexport type PlayerParams = Record<string, string | number | boolean> | boolean;\n\nexport type YouTubeParams = {\n    [x: string]: string | number | boolean;\n};\n\nexport const param = (obj: YouTubeParams): string => {\n    return Object.keys(obj)\n        .map(function (k) {\n            return encodeURIComponent(k) + '=' + encodeURIComponent(obj[k]);\n        })\n        .join('&');\n};\nexport const paramsToObject = (url: string): YouTubeParams => {\n    const paramas = url\n        .slice(1)\n        .split('&')\n        .map((p) => p.split('='))\n        .reduce((obj: any, pair) => {\n            const [key, value] = pair.map(decodeURIComponent);\n            obj[key] = value;\n            return obj;\n        }, {});\n    return paramas;\n};\n\nexport const getYouTubeParams = (\n    videoInfo: VideoInfo,\n    youTubePlayerParamsSettings: YouTubeParams | false,\n): string => {\n    if (!videoInfo.youtube) return '';\n    const slideUrlParams = videoInfo.youtube[2]\n        ? paramsToObject(videoInfo.youtube[2])\n        : '';\n\n    // For youtube first params gets priority if duplicates found\n    const defaultYouTubePlayerParams = {\n        wmode: 'opaque',\n        autoplay: 0,\n        mute: 1,\n        enablejsapi: 1,\n    };\n\n    const playerParamsSettings = youTubePlayerParamsSettings || {};\n\n    const youTubePlayerParams = {\n        ...defaultYouTubePlayerParams,\n        ...playerParamsSettings,\n        ...slideUrlParams,\n    };\n\n    const youTubeParams = `?${param(youTubePlayerParams)}`;\n    return youTubeParams;\n};\n\nexport const isYouTubeNoCookie = (url: string): boolean => {\n    return url.includes('youtube-nocookie.com');\n};\n\nexport const getVimeoURLParams = (\n    defaultParams: PlayerParams,\n    videoInfo?: VideoInfo,\n): string => {\n    if (!videoInfo || !videoInfo.vimeo) return '';\n    let urlParams = videoInfo.vimeo[2] || '';\n\n    const defaultPlayerParams =\n        defaultParams && Object.keys(defaultParams).length !== 0\n            ? '&' + param(defaultParams as any)\n            : '';\n\n    // Support private video\n    const urlWithHash = videoInfo.vimeo[0].split('/').pop() || '';\n    const urlWithHashWithParams = urlWithHash.split('?')[0] || '';\n    const hash = urlWithHashWithParams.split('#')[0];\n\n    const isPrivate = videoInfo.vimeo[1] !== hash;\n    if (isPrivate) {\n        urlParams = urlParams.replace(`/${hash}`, '');\n    }\n\n    urlParams =\n        urlParams[0] == '?' ? '&' + urlParams.slice(1) : urlParams || '';\n\n    // For vimeo last params gets priority if duplicates found\n    const vimeoPlayerParams = `?autoplay=0&muted=1${\n        isPrivate ? `&h=${hash}` : ''\n    }${defaultPlayerParams}${urlParams}`;\n    return vimeoPlayerParams;\n};\n","/**\n * Video module for lightGallery\n * Supports HTML5, YouTube, Vimeo, wistia videos\n *\n *\n * @ref Wistia\n * https://wistia.com/support/integrations/wordpress(How to get url)\n * https://wistia.com/support/developers/embed-options#using-embed-options\n * https://wistia.com/support/developers/player-api\n * https://wistia.com/support/developers/construct-an-embed-code\n * http://jsfiddle.net/xvnm7xLm/\n * https://developer.mozilla.org/en-US/docs/Web/HTML/Element/video\n * https://wistia.com/support/embed-and-share/sharing-videos\n * https://private-sharing.wistia.com/medias/mwhrulrucj\n *\n * @ref Youtube\n * https://developers.google.com/youtube/player_parameters#enablejsapi\n * https://developers.google.com/youtube/iframe_api_reference\n * https://developer.chrome.com/blog/autoplay/#iframe-delegation\n *\n * @ref Vimeo\n * https://stackoverflow.com/questions/10488943/easy-way-to-get-vimeo-id-from-a-vimeo-url\n * https://vimeo.zendesk.com/hc/en-us/articles/360000121668-Starting-playback-at-a-specific-timecode\n * https://vimeo.zendesk.com/hc/en-us/articles/360001494447-Using-Player-Parameters\n */\n\nimport { VideoSettings, videoSettings } from './lg-video-settings';\nimport { LightGallery } from '../../lightgallery';\nimport { lgQuery } from '../../lgQuery';\nimport {\n    CustomEventAfterSlide,\n    CustomEventHasVideo,\n    CustomEventSlideItemLoad,\n    VideoInfo,\n} from '../../types';\nimport { lGEvents } from '../../lg-events';\nimport { VideoSource } from './types';\nimport {\n    getVimeoURLParams,\n    getYouTubeParams,\n    isYouTubeNoCookie,\n    param,\n} from './lg-video-utils';\n\ndeclare let Vimeo: any;\ndeclare let videojs: any;\ndeclare global {\n    interface Window {\n        _wq: any;\n        Vimeo: any;\n    }\n}\nexport default class Video {\n    private core: LightGallery;\n    private settings: VideoSettings;\n    constructor(instance: LightGallery) {\n        // get lightGallery core plugin instance\n        this.core = instance;\n        this.settings = { ...videoSettings, ...this.core.settings };\n\n        return this;\n    }\n    init() {\n        /**\n         * Event triggered when video url found without poster\n         * Append video HTML\n         * Play if autoplayFirstVideo is true\n         */\n        this.core.LGel.on(\n            `${lGEvents.hasVideo}.video`,\n            this.onHasVideo.bind(this),\n        );\n\n        this.core.LGel.on(`${lGEvents.posterClick}.video`, () => {\n            const $el = this.core.getSlideItem(this.core.index);\n            this.loadVideoOnPosterClick($el);\n        });\n        this.core.LGel.on(\n            `${lGEvents.slideItemLoad}.video`,\n            this.onSlideItemLoad.bind(this),\n        );\n\n        // @desc fired immediately before each slide transition.\n        this.core.LGel.on(\n            `${lGEvents.beforeSlide}.video`,\n            this.onBeforeSlide.bind(this),\n        );\n\n        // @desc fired immediately after each slide transition.\n        this.core.LGel.on(\n            `${lGEvents.afterSlide}.video`,\n            this.onAfterSlide.bind(this),\n        );\n    }\n\n    /**\n     * @desc Event triggered when a slide is completely loaded\n     *\n     * @param {Event} event - lightGalley custom event\n     */\n    onSlideItemLoad(event: CustomEventSlideItemLoad): void {\n        const { isFirstSlide, index } = event.detail;\n\n        // Should check the active slide as well as user may have moved to different slide before the first slide is loaded\n        if (\n            this.settings.autoplayFirstVideo &&\n            isFirstSlide &&\n            index === this.core.index\n        ) {\n            // Delay is just for the transition effect on video load\n            setTimeout(() => {\n                this.loadAndPlayVideo(index);\n            }, 200);\n        }\n\n        // Should not call on first slide. should check only if the slide is active\n        if (\n            !isFirstSlide &&\n            this.settings.autoplayVideoOnSlide &&\n            index === this.core.index\n        ) {\n            this.loadAndPlayVideo(index);\n        }\n    }\n\n    /**\n     * @desc Event triggered when video url or poster found\n     * Append video HTML is poster is not given\n     * Play if autoplayFirstVideo is true\n     *\n     * @param {Event} event - Javascript Event object.\n     */\n    onHasVideo(event: CustomEventHasVideo): void {\n        const { index, src, html5Video, hasPoster } = event.detail;\n        if (!hasPoster) {\n            // All functions are called separately if poster exist in loadVideoOnPosterClick function\n\n            this.appendVideos(this.core.getSlideItem(index), {\n                src,\n                addClass: 'lg-object',\n                index,\n                html5Video,\n            });\n\n            // Automatically navigate to next slide once video reaches the end.\n            this.gotoNextSlideOnVideoEnd(src, index);\n        }\n    }\n\n    /**\n     * @desc fired immediately before each slide transition.\n     * Pause the previous video\n     * Hide the download button if the slide contains YouTube, Vimeo, or Wistia videos.\n     *\n     * @param {Event} event - Javascript Event object.\n     * @param {number} prevIndex - Previous index of the slide.\n     * @param {number} index - Current index of the slide\n     */\n    onBeforeSlide(event: CustomEvent): void {\n        if (this.core.lGalleryOn) {\n            const { prevIndex } = event.detail;\n            this.pauseVideo(prevIndex);\n        }\n    }\n\n    /**\n     * @desc fired immediately after each slide transition.\n     * Play video if autoplayVideoOnSlide option is enabled.\n     *\n     * @param {Event} event - Javascript Event object.\n     * @param {number} prevIndex - Previous index of the slide.\n     * @param {number} index - Current index of the slide\n     * @todo should check on onSlideLoad as well if video is not loaded on after slide\n     */\n    onAfterSlide(event: CustomEventAfterSlide): void {\n        const { index, prevIndex } = event.detail;\n        // Do not call on first slide\n        const $slide = this.core.getSlideItem(index);\n        if (this.settings.autoplayVideoOnSlide && index !== prevIndex) {\n            if ($slide.hasClass('lg-complete')) {\n                setTimeout(() => {\n                    this.loadAndPlayVideo(index);\n                }, 100);\n            }\n        }\n    }\n\n    loadAndPlayVideo(index: number): void {\n        const $slide = this.core.getSlideItem(index);\n        const currentGalleryItem = this.core.galleryItems[index];\n        if (currentGalleryItem.poster) {\n            this.loadVideoOnPosterClick($slide, true);\n        } else {\n            this.playVideo(index);\n        }\n    }\n\n    /**\n     * Play HTML5, Youtube, Vimeo or Wistia videos in a particular slide.\n     * @param {number} index - Index of the slide\n     */\n    playVideo(index: number) {\n        this.controlVideo(index, 'play');\n    }\n\n    /**\n     * Pause HTML5, Youtube, Vimeo or Wistia videos in a particular slide.\n     * @param {number} index - Index of the slide\n     */\n    pauseVideo(index: number) {\n        this.controlVideo(index, 'pause');\n    }\n\n    getVideoHtml(\n        src: any,\n        addClass: any,\n        index: number,\n        html5Video: VideoSource,\n    ): string {\n        let video = '';\n        const videoInfo =\n            this.core.galleryItems[(index as unknown) as number]\n                .__slideVideoInfo || {};\n        const currentGalleryItem = this.core.galleryItems[index];\n        let videoTitle = currentGalleryItem.title || currentGalleryItem.alt;\n        videoTitle = videoTitle ? 'title=\"' + videoTitle + '\"' : '';\n        const commonIframeProps = `allowtransparency=\"true\"\n            frameborder=\"0\"\n            scrolling=\"no\"\n            allowfullscreen\n            mozallowfullscreen\n            webkitallowfullscreen\n            oallowfullscreen\n            msallowfullscreen`;\n\n        if (videoInfo.youtube) {\n            const videoId = 'lg-youtube' + index;\n\n            const youTubeParams = getYouTubeParams(\n                videoInfo,\n                this.settings.youTubePlayerParams,\n            );\n\n            const isYouTubeNoCookieURL = isYouTubeNoCookie(src);\n\n            const youtubeURL = isYouTubeNoCookieURL\n                ? '//www.youtube-nocookie.com/'\n                : '//www.youtube.com/';\n\n            video = `<iframe allow=\"autoplay\" id=${videoId} class=\"lg-video-object lg-youtube ${addClass}\" ${videoTitle} src=\"${youtubeURL}embed/${\n                videoInfo.youtube[1] + youTubeParams\n            }\" ${commonIframeProps}></iframe>`;\n        } else if (videoInfo.vimeo) {\n            const videoId = 'lg-vimeo' + index;\n            const playerParams = getVimeoURLParams(\n                this.settings.vimeoPlayerParams,\n                videoInfo,\n            );\n            video = `<iframe allow=\"autoplay\" id=${videoId} class=\"lg-video-object lg-vimeo ${addClass}\" ${videoTitle} src=\"//player.vimeo.com/video/${\n                videoInfo.vimeo[1] + playerParams\n            }\" ${commonIframeProps}></iframe>`;\n        } else if (videoInfo.wistia) {\n            const wistiaId = 'lg-wistia' + index;\n            let playerParams = param(this.settings.wistiaPlayerParams);\n            playerParams = playerParams ? '?' + playerParams : '';\n            video = `<iframe allow=\"autoplay\" id=\"${wistiaId}\" src=\"//fast.wistia.net/embed/iframe/${\n                videoInfo.wistia[4] + playerParams\n            }\" ${videoTitle} class=\"wistia_embed lg-video-object lg-wistia ${addClass}\" name=\"wistia_embed\" ${commonIframeProps}></iframe>`;\n        } else if (videoInfo.html5) {\n            let html5VideoMarkup = '';\n            for (let i = 0; i < html5Video.source.length; i++) {\n                html5VideoMarkup += `<source src=\"${html5Video.source[i].src}\" type=\"${html5Video.source[i].type}\">`;\n            }\n            if (html5Video.tracks) {\n                for (let i = 0; i < html5Video.tracks.length; i++) {\n                    let trackAttributes = '';\n                    const track = html5Video.tracks[i];\n                    Object.keys(track || {}).forEach(function (key) {\n                        trackAttributes += `${key}=\"${(track as any)[key]}\" `;\n                    });\n                    html5VideoMarkup += `<track ${trackAttributes}>`;\n                }\n            }\n\n            let html5VideoAttrs = '';\n            const videoAttributes = html5Video.attributes || {};\n            Object.keys(videoAttributes || {}).forEach(function (key) {\n                html5VideoAttrs += `${key}=\"${(videoAttributes as any)[key]}\" `;\n            });\n            video = `<video class=\"lg-video-object lg-html5 ${\n                this.settings.videojs && this.settings.videojsTheme\n                    ? this.settings.videojsTheme + ' '\n                    : ''\n            } ${this.settings.videojs ? ' video-js' : ''}\" ${html5VideoAttrs}>\n                ${html5VideoMarkup}\n                Your browser does not support HTML5 video.\n            </video>`;\n        }\n\n        return video;\n    }\n\n    /**\n     * @desc - Append videos to the slide\n     *\n     * @param {HTMLElement} el - slide element\n     * @param {Object} videoParams - Video parameters, Contains src, class, index, htmlVideo\n     */\n    appendVideos(\n        el: lgQuery,\n        videoParams: {\n            src: string;\n            addClass: string;\n            index: number;\n            html5Video: any;\n        },\n    ): any {\n        const videoHtml = this.getVideoHtml(\n            videoParams.src,\n            videoParams.addClass,\n            videoParams.index,\n            videoParams.html5Video,\n        );\n        el.find('.lg-video-cont').append(videoHtml);\n        const $videoElement = el.find('.lg-video-object').first();\n        if (videoParams.html5Video) {\n            $videoElement.on('mousedown.lg.video', (e) => {\n                e.stopPropagation();\n            });\n        }\n        if (\n            this.settings.videojs &&\n            this.core.galleryItems[videoParams.index].__slideVideoInfo?.html5\n        ) {\n            try {\n                return videojs(\n                    $videoElement.get(),\n                    this.settings.videojsOptions,\n                );\n            } catch (e) {\n                console.error(\n                    'lightGallery:- Make sure you have included videojs',\n                );\n            }\n        }\n    }\n\n    gotoNextSlideOnVideoEnd(src: any, index: number) {\n        const $videoElement = this.core\n            .getSlideItem(index)\n            .find('.lg-video-object')\n            .first();\n        const videoInfo = this.core.galleryItems[index].__slideVideoInfo || {};\n        if (this.settings.gotoNextSlideOnVideoEnd) {\n            if (videoInfo.html5) {\n                $videoElement.on('ended', () => {\n                    this.core.goToNextSlide();\n                });\n            } else if (videoInfo.vimeo) {\n                try {\n                    // https://github.com/vimeo/player.js/#ended\n                    new Vimeo.Player($videoElement.get()).on('ended', () => {\n                        this.core.goToNextSlide();\n                    });\n                } catch (e) {\n                    console.error(\n                        'lightGallery:- Make sure you have included //github.com/vimeo/player.js',\n                    );\n                }\n            } else if (videoInfo.wistia) {\n                try {\n                    window._wq = window._wq || [];\n\n                    // @todo Event is gettign triggered multiple times\n                    window._wq.push({\n                        id: $videoElement.attr('id'),\n                        onReady: (video: {\n                            bind: (arg0: string, arg1: () => void) => void;\n                        }) => {\n                            video.bind('end', () => {\n                                this.core.goToNextSlide();\n                            });\n                        },\n                    });\n                } catch (e) {\n                    console.error(\n                        'lightGallery:- Make sure you have included //fast.wistia.com/assets/external/E-v1.js',\n                    );\n                }\n            }\n        }\n    }\n\n    controlVideo(index: number, action: string) {\n        const $videoElement = this.core\n            .getSlideItem(index)\n            .find('.lg-video-object')\n            .first();\n        const videoInfo = this.core.galleryItems[index].__slideVideoInfo || {};\n\n        if (!$videoElement.get()) return;\n\n        if (videoInfo.youtube) {\n            try {\n                ($videoElement.get() as any).contentWindow.postMessage(\n                    `{\"event\":\"command\",\"func\":\"${action}Video\",\"args\":\"\"}`,\n                    '*',\n                );\n            } catch (e) {\n                console.error(`lightGallery:- ${e}`);\n            }\n        } else if (videoInfo.vimeo) {\n            try {\n                new Vimeo.Player($videoElement.get())[action]();\n            } catch (e) {\n                console.error(\n                    'lightGallery:- Make sure you have included //github.com/vimeo/player.js',\n                );\n            }\n        } else if (videoInfo.html5) {\n            if (this.settings.videojs) {\n                try {\n                    (videojs($videoElement.get()) as any)[action as any]();\n                } catch (e) {\n                    console.error(\n                        'lightGallery:- Make sure you have included videojs',\n                    );\n                }\n            } else {\n                ($videoElement.get() as any)[action]();\n            }\n        } else if (videoInfo.wistia) {\n            try {\n                window._wq = window._wq || [];\n\n                // @todo Find a way to destroy wistia player instance\n                window._wq.push({\n                    id: $videoElement.attr('id'),\n                    onReady: (video: any) => {\n                        video[action]();\n                    },\n                });\n            } catch (e) {\n                console.error(\n                    'lightGallery:- Make sure you have included //fast.wistia.com/assets/external/E-v1.js',\n                );\n            }\n        }\n    }\n\n    loadVideoOnPosterClick($el: lgQuery, forcePlay?: boolean): void {\n        // check slide has poster\n        if (!$el.hasClass('lg-video-loaded')) {\n            // check already video element present\n            if (!$el.hasClass('lg-has-video')) {\n                $el.addClass('lg-has-video');\n\n                let _html;\n\n                const _src = this.core.galleryItems[this.core.index].src;\n                const video = this.core.galleryItems[this.core.index].video;\n                if (video) {\n                    _html =\n                        typeof video === 'string' ? JSON.parse(video) : video;\n                }\n\n                const videoJsPlayer = this.appendVideos($el, {\n                    src: _src as string,\n                    addClass: '',\n                    index: this.core.index,\n                    html5Video: _html,\n                });\n\n                this.gotoNextSlideOnVideoEnd(_src, this.core.index);\n\n                const $tempImg = $el.find('.lg-object').first().get();\n\n                // @todo make sure it is working\n                $el.find('.lg-video-cont').first().append($tempImg);\n                $el.addClass('lg-video-loading');\n\n                videoJsPlayer &&\n                    videoJsPlayer.ready(() => {\n                        videoJsPlayer.on('loadedmetadata', () => {\n                            this.onVideoLoadAfterPosterClick(\n                                $el,\n                                this.core.index,\n                            );\n                        });\n                    });\n\n                $el.find('.lg-video-object')\n                    .first()\n                    .on('load.lg error.lg loadedmetadata.lg', () => {\n                        setTimeout(() => {\n                            this.onVideoLoadAfterPosterClick(\n                                $el,\n                                this.core.index,\n                            );\n                        }, 50);\n                    });\n            } else {\n                this.playVideo(this.core.index);\n            }\n        } else if (forcePlay) {\n            this.playVideo(this.core.index);\n        }\n    }\n    onVideoLoadAfterPosterClick($el: lgQuery, index: number): void {\n        $el.addClass('lg-video-loaded');\n        this.playVideo(index);\n    }\n    destroy(): void {\n        this.core.LGel.off('.lg.video');\n        this.core.LGel.off('.video');\n    }\n}\n","export interface ActualSizeIcons {\n    zoomIn: 'lg-zoom-in' | 'lg-actual-size';\n    zoomOut: 'lg-zoom-out' | 'lg-actual-size';\n}\n\nexport interface ZoomStrings {\n    zoomIn: string;\n    zoomOut: string;\n    viewActualSize: string;\n}\n\nexport interface ZoomSettings {\n    /**\n     * Value of zoom should be incremented/decremented\n     */\n    scale: number;\n\n    /**\n     * Enable/Disable zoom option\n     */\n    zoom: boolean;\n\n    /**\n     * Enable/Disable infinite zoom\n     * @description If you set this to true, you can zoom in more than the original size of the image.\n     */\n    infiniteZoom: boolean;\n\n    /**\n     * Enable actual size icon.\n     */\n    actualSize: boolean;\n\n    /**\n     * Once the slide transition is completed, how much time should take zoom plugin to activate\n     * @description Some css styles will be added to the images if zoom is enabled.\n     * So it might conflict if you add any custom styles to the images such as the initial transition while opening the gallery.\n     * So you can delay adding zoom related styles to the images by changing the value of enableZoomAfter.\n     */\n    enableZoomAfter: number;\n\n    /**\n     * Show zoom in, zoom out icons\n     */\n    showZoomInOutIcons: boolean;\n\n    /**\n     * Actual size icons classnames.\n     * Specify classnames for both ZoomIn and ZoomOut states\n     * You can use `actualSizeIcons: { zoomIn: 'lg-actual-size', zoomOut: 'lg-zoom-out' }`\n     * to show actual size icons instead of zoom in and zoom out icons.\n     */\n    actualSizeIcons: ActualSizeIcons;\n\n    /**\n     * Custom translation strings for aria-labels\n     */\n    zoomPluginStrings: ZoomStrings;\n}\n\nexport const zoomSettings: ZoomSettings = {\n    scale: 1,\n    zoom: true,\n    infiniteZoom: true,\n    actualSize: true,\n    showZoomInOutIcons: false,\n    actualSizeIcons: {\n        zoomIn: 'lg-zoom-in',\n        zoomOut: 'lg-zoom-out',\n    } as ActualSizeIcons,\n    enableZoomAfter: 300,\n    zoomPluginStrings: {\n        zoomIn: 'Zoom in',\n        zoomOut: 'Zoom out',\n        viewActualSize: 'View actual size',\n    } as ZoomStrings,\n};\n","import { ZoomSettings, zoomSettings } from './lg-zoom-settings';\nimport { LgQuery, lgQuery } from '../../lgQuery';\nimport { LightGallery } from '../../lightgallery';\nimport { lGEvents } from '../../lg-events';\n\ninterface Coords {\n    x: number;\n    y: number;\n}\n\ninterface DragAllowedAxises {\n    allowX: boolean;\n    allowY: boolean;\n}\ninterface ZoomTouchEvent {\n    pageX: number;\n    touches: { pageY: number; pageX: number }[];\n    pageY: number;\n}\ninterface PossibleCords {\n    minX: number;\n    minY: number;\n    maxX: number;\n    maxY: number;\n}\n\nconst ZOOM_TRANSITION_DURATION = 500;\n\nexport default class Zoom {\n    private core: LightGallery;\n    private settings: ZoomSettings;\n    private $LG!: LgQuery;\n    private imageReset!: number | boolean;\n    zoomableTimeout: any;\n    positionChanged!: boolean;\n    zoomInProgress!: boolean;\n    pageX!: number;\n    pageY!: number;\n    scale!: number;\n\n    containerRect!: ClientRect;\n    dragAllowedAxises!: DragAllowedAxises;\n    top!: number;\n    left!: number;\n    scrollTop!: number;\n    constructor(instance: LightGallery, $LG: LgQuery) {\n        // get lightGallery core plugin instance\n        this.core = instance;\n        this.$LG = $LG;\n\n        this.settings = { ...zoomSettings, ...this.core.settings };\n\n        return this;\n    }\n\n    // Append Zoom controls. Actual size, Zoom-in, Zoom-out\n    buildTemplates(): void {\n        let zoomIcons = this.settings.showZoomInOutIcons\n            ? `<button id=\"${this.core.getIdName(\n                  'lg-zoom-in',\n              )}\" type=\"button\" aria-label=\"${\n                  this.settings.zoomPluginStrings['zoomIn']\n              }\" class=\"lg-zoom-in lg-icon\"></button><button id=\"${this.core.getIdName(\n                  'lg-zoom-out',\n              )}\" type=\"button\" aria-label=\"${\n                  this.settings.zoomPluginStrings['zoomIn']\n              }\" class=\"lg-zoom-out lg-icon\"></button>`\n            : '';\n\n        if (this.settings.actualSize) {\n            zoomIcons += `<button id=\"${this.core.getIdName(\n                'lg-actual-size',\n            )}\" type=\"button\" aria-label=\"${\n                this.settings.zoomPluginStrings['viewActualSize']\n            }\" class=\"${\n                this.settings.actualSizeIcons.zoomIn\n            } lg-icon\"></button>`;\n        }\n\n        this.core.outer.addClass('lg-use-transition-for-zoom');\n\n        this.core.$toolbar.first().append(zoomIcons);\n    }\n\n    /**\n     * @desc Enable zoom option only once the image is completely loaded\n     * If zoomFromOrigin is true, Zoom is enabled once the dummy image has been inserted\n     *\n     * Zoom styles are defined under lg-zoomable CSS class.\n     */\n    enableZoom(event: CustomEvent): void {\n        // delay will be 0 except first time\n        let _speed = this.settings.enableZoomAfter + event.detail.delay;\n\n        // set _speed value 0 if gallery opened from direct url and if it is first slide\n        if (\n            this.$LG('body').first().hasClass('lg-from-hash') &&\n            event.detail.delay\n        ) {\n            // will execute only once\n            _speed = 0;\n        } else {\n            // Remove lg-from-hash to enable starting animation.\n            this.$LG('body').first().removeClass('lg-from-hash');\n        }\n\n        this.zoomableTimeout = setTimeout(() => {\n            if (!this.isImageSlide(this.core.index)) {\n                return;\n            }\n            this.core.getSlideItem(event.detail.index).addClass('lg-zoomable');\n            if (event.detail.index === this.core.index) {\n                this.setZoomEssentials();\n            }\n        }, _speed + 30);\n    }\n\n    enableZoomOnSlideItemLoad(): void {\n        // Add zoomable class\n        this.core.LGel.on(\n            `${lGEvents.slideItemLoad}.zoom`,\n            this.enableZoom.bind(this),\n        );\n    }\n\n    getDragCords(e: MouseEvent): Coords {\n        return {\n            x: e.pageX,\n            y: e.pageY,\n        };\n    }\n    getSwipeCords(e: TouchEvent): Coords {\n        const x = e.touches[0].pageX;\n        const y = e.touches[0].pageY;\n        return {\n            x,\n            y,\n        };\n    }\n\n    getDragAllowedAxises(scale: number, scaleDiff?: number): DragAllowedAxises {\n        const $image = this.core\n            .getSlideItem(this.core.index)\n            .find('.lg-image')\n            .first()\n            .get();\n\n        let height = 0;\n        let width = 0;\n        const rect = $image.getBoundingClientRect();\n        if (scale) {\n            height = $image.offsetHeight * scale;\n            width = $image.offsetWidth * scale;\n        } else if (scaleDiff) {\n            height = rect.height + scaleDiff * rect.height;\n            width = rect.width + scaleDiff * rect.width;\n        } else {\n            height = rect.height;\n            width = rect.width;\n        }\n        const allowY = height > this.containerRect.height;\n        const allowX = width > this.containerRect.width;\n        return {\n            allowX,\n            allowY,\n        };\n    }\n\n    setZoomEssentials(): void {\n        this.containerRect = this.core.$content.get().getBoundingClientRect();\n    }\n\n    /**\n     * @desc Image zoom\n     * Translate the wrap and scale the image to get better user experience\n     *\n     * @param {String} scale - Zoom decrement/increment value\n     */\n    zoomImage(\n        scale: number,\n        scaleDiff: number,\n        reposition: boolean,\n        resetToMax: boolean,\n    ): void {\n        if (Math.abs(scaleDiff) <= 0) return;\n\n        const offsetX = this.containerRect.width / 2 + this.containerRect.left;\n\n        const offsetY =\n            this.containerRect.height / 2 +\n            this.containerRect.top +\n            this.scrollTop;\n\n        let originalX;\n        let originalY;\n\n        if (scale === 1) {\n            this.positionChanged = false;\n        }\n\n        const dragAllowedAxises = this.getDragAllowedAxises(0, scaleDiff);\n\n        const { allowY, allowX } = dragAllowedAxises;\n        if (this.positionChanged) {\n            originalX = this.left / (this.scale - scaleDiff);\n            originalY = this.top / (this.scale - scaleDiff);\n            this.pageX = offsetX - originalX;\n            this.pageY = offsetY - originalY;\n\n            this.positionChanged = false;\n        }\n\n        const possibleSwipeCords = this.getPossibleSwipeDragCords(scaleDiff);\n\n        let x;\n        let y;\n        let _x = offsetX - this.pageX;\n        let _y = offsetY - this.pageY;\n\n        if (scale - scaleDiff > 1) {\n            const scaleVal = (scale - scaleDiff) / Math.abs(scaleDiff);\n            _x =\n                (scaleDiff < 0 ? -_x : _x) +\n                this.left * (scaleVal + (scaleDiff < 0 ? -1 : 1));\n            _y =\n                (scaleDiff < 0 ? -_y : _y) +\n                this.top * (scaleVal + (scaleDiff < 0 ? -1 : 1));\n            x = _x / scaleVal;\n            y = _y / scaleVal;\n        } else {\n            const scaleVal = (scale - scaleDiff) * scaleDiff;\n            x = _x * scaleVal;\n            y = _y * scaleVal;\n        }\n\n        if (reposition) {\n            if (allowX) {\n                if (this.isBeyondPossibleLeft(x, possibleSwipeCords.minX)) {\n                    x = possibleSwipeCords.minX;\n                } else if (\n                    this.isBeyondPossibleRight(x, possibleSwipeCords.maxX)\n                ) {\n                    x = possibleSwipeCords.maxX;\n                }\n            } else {\n                if (scale > 1) {\n                    if (x < possibleSwipeCords.minX) {\n                        x = possibleSwipeCords.minX;\n                    } else if (x > possibleSwipeCords.maxX) {\n                        x = possibleSwipeCords.maxX;\n                    }\n                }\n            }\n            // @todo fix this\n            if (allowY) {\n                if (this.isBeyondPossibleTop(y, possibleSwipeCords.minY)) {\n                    y = possibleSwipeCords.minY;\n                } else if (\n                    this.isBeyondPossibleBottom(y, possibleSwipeCords.maxY)\n                ) {\n                    y = possibleSwipeCords.maxY;\n                }\n            } else {\n                // If the translate value based on index of beyond the viewport, utilize the available space to prevent image being cut out\n                if (scale > 1) {\n                    //If image goes beyond viewport top, use the minim possible translate value\n                    if (y < possibleSwipeCords.minY) {\n                        y = possibleSwipeCords.minY;\n                    } else if (y > possibleSwipeCords.maxY) {\n                        y = possibleSwipeCords.maxY;\n                    }\n                }\n            }\n        }\n\n        this.setZoomStyles({\n            x: x,\n            y: y,\n            scale,\n        });\n\n        this.left = x;\n        this.top = y;\n\n        if (resetToMax) {\n            this.setZoomImageSize();\n        }\n    }\n\n    resetImageTranslate(index: number): void {\n        if (!this.isImageSlide(index)) {\n            return;\n        }\n        const $image = this.core.getSlideItem(index).find('.lg-image').first();\n        this.imageReset = false;\n        $image.removeClass(\n            'reset-transition reset-transition-y reset-transition-x',\n        );\n        this.core.outer.removeClass('lg-actual-size');\n        $image.css('width', 'auto').css('height', 'auto');\n        setTimeout(() => {\n            $image.removeClass('no-transition');\n        }, 10);\n    }\n\n    setZoomImageSize(): void {\n        const $image = this.core\n            .getSlideItem(this.core.index)\n            .find('.lg-image')\n            .first();\n\n        setTimeout(() => {\n            const actualSizeScale = this.getCurrentImageActualSizeScale();\n\n            if (this.scale >= actualSizeScale) {\n                $image.addClass('no-transition');\n                this.imageReset = true;\n            }\n        }, ZOOM_TRANSITION_DURATION);\n\n        setTimeout(() => {\n            const actualSizeScale = this.getCurrentImageActualSizeScale();\n\n            if (this.scale >= actualSizeScale) {\n                const dragAllowedAxises = this.getDragAllowedAxises(this.scale);\n\n                $image\n                    .css(\n                        'width',\n                        ($image.get() as HTMLImageElement).naturalWidth + 'px',\n                    )\n                    .css(\n                        'height',\n                        ($image.get() as HTMLImageElement).naturalHeight + 'px',\n                    );\n\n                this.core.outer.addClass('lg-actual-size');\n\n                if (dragAllowedAxises.allowX && dragAllowedAxises.allowY) {\n                    $image.addClass('reset-transition');\n                } else if (\n                    dragAllowedAxises.allowX &&\n                    !dragAllowedAxises.allowY\n                ) {\n                    $image.addClass('reset-transition-x');\n                } else if (\n                    !dragAllowedAxises.allowX &&\n                    dragAllowedAxises.allowY\n                ) {\n                    $image.addClass('reset-transition-y');\n                }\n            }\n        }, ZOOM_TRANSITION_DURATION + 50);\n    }\n\n    /**\n     * @desc apply scale3d to image and translate to image wrap\n     * @param {style} X,Y and scale\n     */\n    setZoomStyles(style: { x: number; y: number; scale: number }): void {\n        const $imageWrap = this.core\n            .getSlideItem(this.core.index)\n            .find('.lg-img-wrap')\n            .first();\n        const $image = this.core\n            .getSlideItem(this.core.index)\n            .find('.lg-image')\n            .first();\n        const $dummyImage = this.core.outer\n            .find('.lg-current .lg-dummy-img')\n            .first();\n        this.scale = style.scale;\n        $image.css(\n            'transform',\n            'scale3d(' + style.scale + ', ' + style.scale + ', 1)',\n        );\n\n        $dummyImage.css(\n            'transform',\n            'scale3d(' + style.scale + ', ' + style.scale + ', 1)',\n        );\n\n        const transform =\n            'translate3d(' + style.x + 'px, ' + style.y + 'px, 0)';\n        $imageWrap.css('transform', transform);\n    }\n\n    /**\n     * @param index - Index of the current slide\n     * @param event - event will be available only if the function is called on clicking/taping the imags\n     */\n    setActualSize(index: number, event?: ZoomTouchEvent): void {\n        if (this.zoomInProgress) {\n            return;\n        }\n        this.zoomInProgress = true;\n        const currentItem = this.core.galleryItems[this.core.index];\n        this.resetImageTranslate(index);\n        setTimeout(() => {\n            // Allow zoom only on image\n            if (\n                !currentItem.src ||\n                this.core.outer.hasClass('lg-first-slide-loading')\n            ) {\n                return;\n            }\n            const scale = this.getCurrentImageActualSizeScale();\n            const prevScale = this.scale;\n            if (this.core.outer.hasClass('lg-zoomed')) {\n                this.scale = 1;\n            } else {\n                this.scale = this.getScale(scale);\n            }\n            this.setPageCords(event);\n\n            this.beginZoom(this.scale);\n            this.zoomImage(this.scale, this.scale - prevScale, true, true);\n        }, 50);\n        setTimeout(() => {\n            this.core.outer.removeClass('lg-grabbing').addClass('lg-grab');\n        }, 60);\n        setTimeout(() => {\n            this.zoomInProgress = false;\n        }, ZOOM_TRANSITION_DURATION + 110);\n    }\n\n    getNaturalWidth(index: number): number {\n        const $image = this.core.getSlideItem(index).find('.lg-image').first();\n\n        const naturalWidth = this.core.galleryItems[index].width;\n        return naturalWidth\n            ? parseFloat(naturalWidth)\n            : undefined || ($image.get() as any).naturalWidth;\n    }\n\n    getActualSizeScale(naturalWidth: number, width: number): number {\n        let _scale;\n        let scale;\n        if (naturalWidth >= width) {\n            _scale = naturalWidth / width;\n            scale = _scale || 2;\n        } else {\n            scale = 1;\n        }\n        return scale;\n    }\n\n    getCurrentImageActualSizeScale(): number {\n        const $image = this.core\n            .getSlideItem(this.core.index)\n            .find('.lg-image')\n            .first();\n        const width = $image.get().offsetWidth;\n        const naturalWidth = this.getNaturalWidth(this.core.index) || width;\n        return this.getActualSizeScale(naturalWidth, width);\n    }\n\n    getPageCords(event?: ZoomTouchEvent): Coords {\n        const cords: Coords = {} as Coords;\n        if (event) {\n            cords.x = event.pageX || event.touches[0].pageX;\n            cords.y = event.pageY || event.touches[0].pageY;\n        } else {\n            const containerRect = this.core.$content\n                .get()\n                .getBoundingClientRect();\n            cords.x = containerRect.width / 2 + containerRect.left;\n            cords.y =\n                containerRect.height / 2 + this.scrollTop + containerRect.top;\n        }\n        return cords;\n    }\n\n    setPageCords(event?: ZoomTouchEvent): void {\n        const pageCords = this.getPageCords(event);\n\n        this.pageX = pageCords.x;\n        this.pageY = pageCords.y;\n    }\n\n    manageActualPixelClassNames(): void {\n        const $actualSize = this.core.getElementById('lg-actual-size');\n        $actualSize\n            .removeClass(this.settings.actualSizeIcons.zoomIn)\n            .addClass(this.settings.actualSizeIcons.zoomOut);\n    }\n\n    // If true, zoomed - in else zoomed out\n    beginZoom(scale: number): boolean {\n        this.core.outer.removeClass('lg-zoom-drag-transition lg-zoom-dragging');\n        if (scale > 1) {\n            this.core.outer.addClass('lg-zoomed');\n            this.manageActualPixelClassNames();\n        } else {\n            this.resetZoom();\n        }\n        return scale > 1;\n    }\n\n    getScale(scale: number): number {\n        const actualSizeScale = this.getCurrentImageActualSizeScale();\n        if (scale < 1) {\n            scale = 1;\n        } else if (scale > actualSizeScale) {\n            scale = actualSizeScale;\n        }\n        return scale;\n    }\n\n    init(): void {\n        if (!this.settings.zoom) {\n            return;\n        }\n        this.buildTemplates();\n        this.enableZoomOnSlideItemLoad();\n\n        let tapped: ReturnType<typeof setTimeout> | null = null;\n\n        this.core.outer.on('dblclick.lg', (event) => {\n            if (!this.$LG(event.target).hasClass('lg-image')) {\n                return;\n            }\n            this.setActualSize(this.core.index, event);\n        });\n\n        this.core.outer.on('touchstart.lg', (event) => {\n            const $target = this.$LG(event.target);\n            if (event.touches.length === 1 && $target.hasClass('lg-image')) {\n                if (!tapped) {\n                    tapped = setTimeout(() => {\n                        tapped = null;\n                    }, 300);\n                } else {\n                    clearTimeout(tapped);\n                    tapped = null;\n                    event.preventDefault();\n                    this.setActualSize(this.core.index, event);\n                }\n            }\n        });\n\n        this.core.LGel.on(\n            `${lGEvents.containerResize}.zoom ${lGEvents.rotateRight}.zoom ${lGEvents.rotateLeft}.zoom ${lGEvents.flipHorizontal}.zoom ${lGEvents.flipVertical}.zoom`,\n            () => {\n                if (\n                    !this.core.lgOpened ||\n                    !this.isImageSlide(this.core.index) ||\n                    this.core.touchAction\n                ) {\n                    return;\n                }\n                const _LGel = this.core\n                    .getSlideItem(this.core.index)\n                    .find('.lg-img-wrap')\n                    .first();\n                this.top = 0;\n                this.left = 0;\n                this.setZoomEssentials();\n                this.setZoomSwipeStyles(_LGel, { x: 0, y: 0 });\n                this.positionChanged = true;\n            },\n        );\n        // Update zoom on resize and orientationchange\n        this.$LG(window).on(`scroll.lg.zoom.global${this.core.lgId}`, () => {\n            if (!this.core.lgOpened) return;\n            this.scrollTop = this.$LG(window).scrollTop();\n        });\n\n        this.core.getElementById('lg-zoom-out').on('click.lg', () => {\n            // Allow zoom only on image\n            if (!this.isImageSlide(this.core.index)) {\n                return;\n            }\n\n            let timeout = 0;\n            if (this.imageReset) {\n                this.resetImageTranslate(this.core.index);\n                timeout = 50;\n            }\n            setTimeout(() => {\n                let scale = this.scale - this.settings.scale;\n\n                if (scale < 1) {\n                    scale = 1;\n                }\n                this.beginZoom(scale);\n                this.zoomImage(\n                    scale,\n                    -this.settings.scale,\n                    true,\n                    !this.settings.infiniteZoom,\n                );\n            }, timeout);\n        });\n\n        this.core.getElementById('lg-zoom-in').on('click.lg', () => {\n            this.zoomIn();\n        });\n\n        this.core.getElementById('lg-actual-size').on('click.lg', () => {\n            this.setActualSize(this.core.index);\n        });\n\n        this.core.LGel.on(`${lGEvents.beforeOpen}.zoom`, () => {\n            this.core.outer.find('.lg-item').removeClass('lg-zoomable');\n        });\n        this.core.LGel.on(`${lGEvents.afterOpen}.zoom`, () => {\n            this.scrollTop = this.$LG(window).scrollTop();\n\n            // Set the initial value center\n            this.pageX = this.core.outer.width() / 2;\n            this.pageY = this.core.outer.height() / 2 + this.scrollTop;\n\n            this.scale = 1;\n        });\n\n        // Reset zoom on slide change\n        this.core.LGel.on(\n            `${lGEvents.afterSlide}.zoom`,\n            (event: CustomEvent) => {\n                const { prevIndex } = event.detail;\n                this.scale = 1;\n                this.positionChanged = false;\n                this.zoomInProgress = false;\n                this.resetZoom(prevIndex);\n                this.resetImageTranslate(prevIndex);\n                if (this.isImageSlide(this.core.index)) {\n                    this.setZoomEssentials();\n                }\n            },\n        );\n\n        // Drag option after zoom\n        this.zoomDrag();\n\n        this.pinchZoom();\n\n        this.zoomSwipe();\n\n        // Store the zoomable timeout value just to clear it while closing\n        this.zoomableTimeout = false;\n        this.positionChanged = false;\n        this.zoomInProgress = false;\n    }\n\n    zoomIn(): void {\n        // Allow zoom only on image\n        if (!this.isImageSlide(this.core.index)) {\n            return;\n        }\n\n        let scale = this.scale + this.settings.scale;\n\n        if (!this.settings.infiniteZoom) {\n            scale = this.getScale(scale);\n        }\n        this.beginZoom(scale);\n        this.zoomImage(\n            scale,\n            Math.min(this.settings.scale, scale - this.scale),\n            true,\n            !this.settings.infiniteZoom,\n        );\n    }\n\n    // Reset zoom effect\n    resetZoom(index?: number): void {\n        this.core.outer.removeClass('lg-zoomed lg-zoom-drag-transition');\n        const $actualSize = this.core.getElementById('lg-actual-size');\n        const $item = this.core.getSlideItem(\n            index !== undefined ? index : this.core.index,\n        );\n        $actualSize\n            .removeClass(this.settings.actualSizeIcons.zoomOut)\n            .addClass(this.settings.actualSizeIcons.zoomIn);\n        $item.find('.lg-img-wrap').first().removeAttr('style');\n        $item.find('.lg-image').first().removeAttr('style');\n        this.scale = 1;\n        this.left = 0;\n        this.top = 0;\n\n        // Reset pagx pagy values to center\n        this.setPageCords();\n    }\n\n    getTouchDistance(e: TouchEvent): number {\n        return Math.sqrt(\n            (e.touches[0].pageX - e.touches[1].pageX) *\n                (e.touches[0].pageX - e.touches[1].pageX) +\n                (e.touches[0].pageY - e.touches[1].pageY) *\n                    (e.touches[0].pageY - e.touches[1].pageY),\n        );\n    }\n\n    pinchZoom(): void {\n        let startDist = 0;\n        let pinchStarted = false;\n        let initScale = 1;\n        let prevScale = 0;\n\n        let $item = this.core.getSlideItem(this.core.index);\n\n        this.core.outer.on('touchstart.lg', (e) => {\n            $item = this.core.getSlideItem(this.core.index);\n            if (!this.isImageSlide(this.core.index)) {\n                return;\n            }\n            if (e.touches.length === 2) {\n                e.preventDefault();\n                if (this.core.outer.hasClass('lg-first-slide-loading')) {\n                    return;\n                }\n                initScale = this.scale || 1;\n                this.core.outer.removeClass(\n                    'lg-zoom-drag-transition lg-zoom-dragging',\n                );\n\n                this.setPageCords(e);\n                this.resetImageTranslate(this.core.index);\n\n                this.core.touchAction = 'pinch';\n\n                startDist = this.getTouchDistance(e);\n            }\n        });\n\n        this.core.$inner.on('touchmove.lg', (e) => {\n            if (\n                e.touches.length === 2 &&\n                this.core.touchAction === 'pinch' &&\n                (this.$LG(e.target).hasClass('lg-item') ||\n                    $item.get().contains(e.target))\n            ) {\n                e.preventDefault();\n                const endDist = this.getTouchDistance(e);\n\n                const distance = startDist - endDist;\n                if (!pinchStarted && Math.abs(distance) > 5) {\n                    pinchStarted = true;\n                }\n                if (pinchStarted) {\n                    prevScale = this.scale;\n                    const _scale = Math.max(1, initScale + -distance * 0.02);\n                    this.scale =\n                        Math.round((_scale + Number.EPSILON) * 100) / 100;\n                    const diff = this.scale - prevScale;\n                    this.zoomImage(\n                        this.scale,\n                        Math.round((diff + Number.EPSILON) * 100) / 100,\n                        false,\n                        false,\n                    );\n                }\n            }\n        });\n\n        this.core.$inner.on('touchend.lg', (e) => {\n            if (\n                this.core.touchAction === 'pinch' &&\n                (this.$LG(e.target).hasClass('lg-item') ||\n                    $item.get().contains(e.target))\n            ) {\n                pinchStarted = false;\n                startDist = 0;\n                if (this.scale <= 1) {\n                    this.resetZoom();\n                } else {\n                    const actualSizeScale = this.getCurrentImageActualSizeScale();\n\n                    if (this.scale >= actualSizeScale) {\n                        let scaleDiff = actualSizeScale - this.scale;\n                        if (scaleDiff === 0) {\n                            scaleDiff = 0.01;\n                        }\n                        this.zoomImage(actualSizeScale, scaleDiff, false, true);\n                    }\n                    this.manageActualPixelClassNames();\n\n                    this.core.outer.addClass('lg-zoomed');\n                }\n                this.core.touchAction = undefined;\n            }\n        });\n    }\n\n    touchendZoom(\n        startCoords: Coords,\n        endCoords: Coords,\n        allowX: boolean,\n        allowY: boolean,\n        touchDuration: number,\n    ): void {\n        let distanceXnew = endCoords.x - startCoords.x;\n        let distanceYnew = endCoords.y - startCoords.y;\n\n        let speedX = Math.abs(distanceXnew) / touchDuration + 1;\n        let speedY = Math.abs(distanceYnew) / touchDuration + 1;\n\n        if (speedX > 2) {\n            speedX += 1;\n        }\n\n        if (speedY > 2) {\n            speedY += 1;\n        }\n\n        distanceXnew = distanceXnew * speedX;\n        distanceYnew = distanceYnew * speedY;\n\n        const _LGel = this.core\n            .getSlideItem(this.core.index)\n            .find('.lg-img-wrap')\n            .first();\n        const distance: Coords = {} as Coords;\n\n        distance.x = this.left + distanceXnew;\n        distance.y = this.top + distanceYnew;\n\n        const possibleSwipeCords = this.getPossibleSwipeDragCords();\n\n        if (Math.abs(distanceXnew) > 15 || Math.abs(distanceYnew) > 15) {\n            if (allowY) {\n                if (\n                    this.isBeyondPossibleTop(\n                        distance.y,\n                        possibleSwipeCords.minY,\n                    )\n                ) {\n                    distance.y = possibleSwipeCords.minY;\n                } else if (\n                    this.isBeyondPossibleBottom(\n                        distance.y,\n                        possibleSwipeCords.maxY,\n                    )\n                ) {\n                    distance.y = possibleSwipeCords.maxY;\n                }\n            }\n\n            if (allowX) {\n                if (\n                    this.isBeyondPossibleLeft(\n                        distance.x,\n                        possibleSwipeCords.minX,\n                    )\n                ) {\n                    distance.x = possibleSwipeCords.minX;\n                } else if (\n                    this.isBeyondPossibleRight(\n                        distance.x,\n                        possibleSwipeCords.maxX,\n                    )\n                ) {\n                    distance.x = possibleSwipeCords.maxX;\n                }\n            }\n\n            if (allowY) {\n                this.top = distance.y;\n            } else {\n                distance.y = this.top;\n            }\n\n            if (allowX) {\n                this.left = distance.x;\n            } else {\n                distance.x = this.left;\n            }\n\n            this.setZoomSwipeStyles(_LGel, distance);\n\n            this.positionChanged = true;\n        }\n    }\n\n    getZoomSwipeCords(\n        startCoords: Coords,\n        endCoords: Coords,\n        allowX: boolean,\n        allowY: boolean,\n        possibleSwipeCords: PossibleCords,\n    ): Coords {\n        const distance: Coords = {} as Coords;\n        if (allowY) {\n            distance.y = this.top + (endCoords.y - startCoords.y);\n            if (this.isBeyondPossibleTop(distance.y, possibleSwipeCords.minY)) {\n                const diffMinY = possibleSwipeCords.minY - distance.y;\n                distance.y = possibleSwipeCords.minY - diffMinY / 6;\n            } else if (\n                this.isBeyondPossibleBottom(distance.y, possibleSwipeCords.maxY)\n            ) {\n                const diffMaxY = distance.y - possibleSwipeCords.maxY;\n                distance.y = possibleSwipeCords.maxY + diffMaxY / 6;\n            }\n        } else {\n            distance.y = this.top;\n        }\n\n        if (allowX) {\n            distance.x = this.left + (endCoords.x - startCoords.x);\n            if (\n                this.isBeyondPossibleLeft(distance.x, possibleSwipeCords.minX)\n            ) {\n                const diffMinX = possibleSwipeCords.minX - distance.x;\n                distance.x = possibleSwipeCords.minX - diffMinX / 6;\n            } else if (\n                this.isBeyondPossibleRight(distance.x, possibleSwipeCords.maxX)\n            ) {\n                const difMaxX = distance.x - possibleSwipeCords.maxX;\n                distance.x = possibleSwipeCords.maxX + difMaxX / 6;\n            }\n        } else {\n            distance.x = this.left;\n        }\n\n        return distance;\n    }\n\n    private isBeyondPossibleLeft(x: number, minX: number) {\n        return x >= minX;\n    }\n    private isBeyondPossibleRight(x: number, maxX: number) {\n        return x <= maxX;\n    }\n    private isBeyondPossibleTop(y: number, minY: number) {\n        return y >= minY;\n    }\n    private isBeyondPossibleBottom(y: number, maxY: number) {\n        return y <= maxY;\n    }\n\n    isImageSlide(index: number): boolean {\n        const currentItem = this.core.galleryItems[index];\n        return this.core.getSlideType(currentItem) === 'image';\n    }\n\n    getPossibleSwipeDragCords(scale?: number): PossibleCords {\n        const $image = this.core\n            .getSlideItem(this.core.index)\n            .find('.lg-image')\n            .first();\n\n        const { bottom } = this.core.mediaContainerPosition;\n\n        const imgRect = $image.get().getBoundingClientRect();\n\n        let imageHeight = imgRect.height;\n        let imageWidth = imgRect.width;\n\n        if (scale) {\n            imageHeight = imageHeight + scale * imageHeight;\n            imageWidth = imageWidth + scale * imageWidth;\n        }\n\n        const minY = (imageHeight - this.containerRect.height) / 2;\n        const maxY = (this.containerRect.height - imageHeight) / 2 + bottom;\n\n        const minX = (imageWidth - this.containerRect.width) / 2;\n\n        const maxX = (this.containerRect.width - imageWidth) / 2;\n\n        const possibleSwipeCords = {\n            minY: minY,\n            maxY: maxY,\n            minX: minX,\n            maxX: maxX,\n        };\n        return possibleSwipeCords;\n    }\n\n    setZoomSwipeStyles(\n        LGel: lgQuery,\n        distance: { x: number; y: number },\n    ): void {\n        LGel.css(\n            'transform',\n            'translate3d(' + distance.x + 'px, ' + distance.y + 'px, 0)',\n        );\n    }\n\n    zoomSwipe(): void {\n        let startCoords = {} as Coords;\n        let endCoords = {} as Coords;\n        let isMoved = false;\n\n        // Allow x direction drag\n        let allowX = false;\n\n        // Allow Y direction drag\n        let allowY = false;\n\n        let startTime: Date = new Date();\n        let endTime: Date = new Date();\n        let possibleSwipeCords: PossibleCords;\n\n        let _LGel: lgQuery;\n\n        let $item = this.core.getSlideItem(this.core.index);\n\n        this.core.$inner.on('touchstart.lg', (e) => {\n            // Allow zoom only on image\n            if (!this.isImageSlide(this.core.index)) {\n                return;\n            }\n            $item = this.core.getSlideItem(this.core.index);\n            if (\n                (this.$LG(e.target).hasClass('lg-item') ||\n                    $item.get().contains(e.target)) &&\n                e.touches.length === 1 &&\n                this.core.outer.hasClass('lg-zoomed')\n            ) {\n                e.preventDefault();\n                startTime = new Date();\n                this.core.touchAction = 'zoomSwipe';\n                _LGel = this.core\n                    .getSlideItem(this.core.index)\n                    .find('.lg-img-wrap')\n                    .first();\n\n                const dragAllowedAxises = this.getDragAllowedAxises(0);\n\n                allowY = dragAllowedAxises.allowY;\n                allowX = dragAllowedAxises.allowX;\n                if (allowX || allowY) {\n                    startCoords = this.getSwipeCords(e);\n                }\n\n                possibleSwipeCords = this.getPossibleSwipeDragCords();\n\n                // reset opacity and transition duration\n                this.core.outer.addClass(\n                    'lg-zoom-dragging lg-zoom-drag-transition',\n                );\n            }\n        });\n\n        this.core.$inner.on('touchmove.lg', (e) => {\n            if (\n                e.touches.length === 1 &&\n                this.core.touchAction === 'zoomSwipe' &&\n                (this.$LG(e.target).hasClass('lg-item') ||\n                    $item.get().contains(e.target))\n            ) {\n                e.preventDefault();\n                this.core.touchAction = 'zoomSwipe';\n\n                endCoords = this.getSwipeCords(e);\n\n                const distance = this.getZoomSwipeCords(\n                    startCoords,\n                    endCoords,\n                    allowX,\n                    allowY,\n                    possibleSwipeCords,\n                );\n\n                if (\n                    Math.abs(endCoords.x - startCoords.x) > 15 ||\n                    Math.abs(endCoords.y - startCoords.y) > 15\n                ) {\n                    isMoved = true;\n                    this.setZoomSwipeStyles(_LGel, distance);\n                }\n            }\n        });\n\n        this.core.$inner.on('touchend.lg', (e) => {\n            if (\n                this.core.touchAction === 'zoomSwipe' &&\n                (this.$LG(e.target).hasClass('lg-item') ||\n                    $item.get().contains(e.target))\n            ) {\n                e.preventDefault();\n                this.core.touchAction = undefined;\n                this.core.outer.removeClass('lg-zoom-dragging');\n                if (!isMoved) {\n                    return;\n                }\n                isMoved = false;\n                endTime = new Date();\n                const touchDuration = endTime.valueOf() - startTime.valueOf();\n                this.touchendZoom(\n                    startCoords,\n                    endCoords,\n                    allowX,\n                    allowY,\n                    touchDuration,\n                );\n            }\n        });\n    }\n\n    zoomDrag(): void {\n        let startCoords: Coords = {} as Coords;\n        let endCoords: Coords = {} as Coords;\n        let isDragging = false;\n        let isMoved = false;\n\n        // Allow x direction drag\n        let allowX = false;\n\n        // Allow Y direction drag\n        let allowY = false;\n\n        let startTime: number | Date;\n        let endTime;\n\n        let possibleSwipeCords: PossibleCords;\n\n        let _LGel: lgQuery;\n\n        this.core.outer.on('mousedown.lg.zoom', (e) => {\n            // Allow zoom only on image\n            if (!this.isImageSlide(this.core.index)) {\n                return;\n            }\n            const $item = this.core.getSlideItem(this.core.index);\n            if (\n                this.$LG(e.target).hasClass('lg-item') ||\n                $item.get().contains(e.target)\n            ) {\n                startTime = new Date();\n                _LGel = this.core\n                    .getSlideItem(this.core.index)\n                    .find('.lg-img-wrap')\n                    .first();\n\n                const dragAllowedAxises = this.getDragAllowedAxises(0);\n\n                allowY = dragAllowedAxises.allowY;\n                allowX = dragAllowedAxises.allowX;\n\n                if (this.core.outer.hasClass('lg-zoomed')) {\n                    if (\n                        this.$LG(e.target).hasClass('lg-object') &&\n                        (allowX || allowY)\n                    ) {\n                        e.preventDefault();\n                        startCoords = this.getDragCords(e);\n\n                        possibleSwipeCords = this.getPossibleSwipeDragCords();\n\n                        isDragging = true;\n\n                        this.core.outer\n                            .removeClass('lg-grab')\n                            .addClass(\n                                'lg-grabbing lg-zoom-drag-transition lg-zoom-dragging',\n                            );\n                        // reset opacity and transition duration\n                    }\n                }\n            }\n        });\n\n        this.$LG(window).on(\n            `mousemove.lg.zoom.global${this.core.lgId}`,\n            (e) => {\n                if (isDragging) {\n                    isMoved = true;\n                    endCoords = this.getDragCords(e);\n\n                    const distance = this.getZoomSwipeCords(\n                        startCoords,\n                        endCoords,\n                        allowX,\n                        allowY,\n                        possibleSwipeCords,\n                    );\n\n                    this.setZoomSwipeStyles(_LGel, distance);\n                }\n            },\n        );\n\n        this.$LG(window).on(`mouseup.lg.zoom.global${this.core.lgId}`, (e) => {\n            if (isDragging) {\n                endTime = new Date();\n                isDragging = false;\n                this.core.outer.removeClass('lg-zoom-dragging');\n\n                // Fix for chrome mouse move on click\n                if (\n                    isMoved &&\n                    (startCoords.x !== endCoords.x ||\n                        startCoords.y !== endCoords.y)\n                ) {\n                    endCoords = this.getDragCords(e);\n\n                    const touchDuration =\n                        endTime.valueOf() - startTime.valueOf();\n                    this.touchendZoom(\n                        startCoords,\n                        endCoords,\n                        allowX,\n                        allowY,\n                        touchDuration,\n                    );\n                }\n\n                isMoved = false;\n            }\n\n            this.core.outer.removeClass('lg-grabbing').addClass('lg-grab');\n        });\n    }\n\n    closeGallery(): void {\n        this.resetZoom();\n        this.zoomInProgress = false;\n    }\n\n    destroy(): void {\n        // Unbind all events added by lightGallery zoom plugin\n        this.$LG(window).off(`.lg.zoom.global${this.core.lgId}`);\n        this.core.LGel.off('.lg.zoom');\n        this.core.LGel.off('.zoom');\n        clearTimeout(this.zoomableTimeout);\n        this.zoomableTimeout = false;\n    }\n}\n","/*!\n * lightgallery | 2.7.2 | September 20th 2023\n * http://www.lightgalleryjs.com/\n * Copyright (c) 2020 Sachin Neravath;\n * @license GPLv3\n */\n\n/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n\r\nvar __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    };\r\n    return __assign.apply(this, arguments);\r\n};\r\n\r\nfunction __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n}\n\n/**\r\n * List of lightGallery events\r\n * All events should be documented here\r\n * Below interfaces are used to build the website documentations\r\n * */\r\nvar lGEvents = {\r\n    afterAppendSlide: 'lgAfterAppendSlide',\r\n    init: 'lgInit',\r\n    hasVideo: 'lgHasVideo',\r\n    containerResize: 'lgContainerResize',\r\n    updateSlides: 'lgUpdateSlides',\r\n    afterAppendSubHtml: 'lgAfterAppendSubHtml',\r\n    beforeOpen: 'lgBeforeOpen',\r\n    afterOpen: 'lgAfterOpen',\r\n    slideItemLoad: 'lgSlideItemLoad',\r\n    beforeSlide: 'lgBeforeSlide',\r\n    afterSlide: 'lgAfterSlide',\r\n    posterClick: 'lgPosterClick',\r\n    dragStart: 'lgDragStart',\r\n    dragMove: 'lgDragMove',\r\n    dragEnd: 'lgDragEnd',\r\n    beforeNextSlide: 'lgBeforeNextSlide',\r\n    beforePrevSlide: 'lgBeforePrevSlide',\r\n    beforeClose: 'lgBeforeClose',\r\n    afterClose: 'lgAfterClose',\r\n    rotateLeft: 'lgRotateLeft',\r\n    rotateRight: 'lgRotateRight',\r\n    flipHorizontal: 'lgFlipHorizontal',\r\n    flipVertical: 'lgFlipVertical',\r\n    autoplay: 'lgAutoplay',\r\n    autoplayStart: 'lgAutoplayStart',\r\n    autoplayStop: 'lgAutoplayStop',\r\n};\n\nvar lightGalleryCoreSettings = {\r\n    mode: 'lg-slide',\r\n    easing: 'ease',\r\n    speed: 400,\r\n    licenseKey: '0000-0000-000-0000',\r\n    height: '100%',\r\n    width: '100%',\r\n    addClass: '',\r\n    startClass: 'lg-start-zoom',\r\n    backdropDuration: 300,\r\n    container: '',\r\n    startAnimationDuration: 400,\r\n    zoomFromOrigin: true,\r\n    hideBarsDelay: 0,\r\n    showBarsAfter: 10000,\r\n    slideDelay: 0,\r\n    supportLegacyBrowser: true,\r\n    allowMediaOverlap: false,\r\n    videoMaxSize: '1280-720',\r\n    loadYouTubePoster: true,\r\n    defaultCaptionHeight: 0,\r\n    ariaLabelledby: '',\r\n    ariaDescribedby: '',\r\n    resetScrollPosition: true,\r\n    hideScrollbar: false,\r\n    closable: true,\r\n    swipeToClose: true,\r\n    closeOnTap: true,\r\n    showCloseIcon: true,\r\n    showMaximizeIcon: false,\r\n    loop: true,\r\n    escKey: true,\r\n    keyPress: true,\r\n    trapFocus: true,\r\n    controls: true,\r\n    slideEndAnimation: true,\r\n    hideControlOnEnd: false,\r\n    mousewheel: false,\r\n    getCaptionFromTitleOrAlt: true,\r\n    appendSubHtmlTo: '.lg-sub-html',\r\n    subHtmlSelectorRelative: false,\r\n    preload: 2,\r\n    numberOfSlideItemsInDom: 10,\r\n    selector: '',\r\n    selectWithin: '',\r\n    nextHtml: '',\r\n    prevHtml: '',\r\n    index: 0,\r\n    iframeWidth: '100%',\r\n    iframeHeight: '100%',\r\n    iframeMaxWidth: '100%',\r\n    iframeMaxHeight: '100%',\r\n    download: true,\r\n    counter: true,\r\n    appendCounterTo: '.lg-toolbar',\r\n    swipeThreshold: 50,\r\n    enableSwipe: true,\r\n    enableDrag: true,\r\n    dynamic: false,\r\n    dynamicEl: [],\r\n    extraProps: [],\r\n    exThumbImage: '',\r\n    isMobile: undefined,\r\n    mobileSettings: {\r\n        controls: false,\r\n        showCloseIcon: false,\r\n        download: false,\r\n    },\r\n    plugins: [],\r\n    strings: {\r\n        closeGallery: 'Close gallery',\r\n        toggleMaximize: 'Toggle maximize',\r\n        previousSlide: 'Previous slide',\r\n        nextSlide: 'Next slide',\r\n        download: 'Download',\r\n        playVideo: 'Play video',\r\n        mediaLoadingFailed: 'Oops... Failed to load content...',\r\n    },\r\n};\n\nfunction initLgPolyfills() {\r\n    (function () {\r\n        if (typeof window.CustomEvent === 'function')\r\n            return false;\r\n        function CustomEvent(event, params) {\r\n            params = params || {\r\n                bubbles: false,\r\n                cancelable: false,\r\n                detail: null,\r\n            };\r\n            var evt = document.createEvent('CustomEvent');\r\n            evt.initCustomEvent(event, params.bubbles, params.cancelable, params.detail);\r\n            return evt;\r\n        }\r\n        window.CustomEvent = CustomEvent;\r\n    })();\r\n    (function () {\r\n        if (!Element.prototype.matches) {\r\n            Element.prototype.matches =\r\n                Element.prototype.msMatchesSelector ||\r\n                    Element.prototype.webkitMatchesSelector;\r\n        }\r\n    })();\r\n}\r\nvar lgQuery = /** @class */ (function () {\r\n    function lgQuery(selector) {\r\n        this.cssVenderPrefixes = [\r\n            'TransitionDuration',\r\n            'TransitionTimingFunction',\r\n            'Transform',\r\n            'Transition',\r\n        ];\r\n        this.selector = this._getSelector(selector);\r\n        this.firstElement = this._getFirstEl();\r\n        return this;\r\n    }\r\n    lgQuery.generateUUID = function () {\r\n        return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function (c) {\r\n            var r = (Math.random() * 16) | 0, v = c == 'x' ? r : (r & 0x3) | 0x8;\r\n            return v.toString(16);\r\n        });\r\n    };\r\n    lgQuery.prototype._getSelector = function (selector, context) {\r\n        if (context === void 0) { context = document; }\r\n        if (typeof selector !== 'string') {\r\n            return selector;\r\n        }\r\n        context = context || document;\r\n        var fl = selector.substring(0, 1);\r\n        if (fl === '#') {\r\n            return context.querySelector(selector);\r\n        }\r\n        else {\r\n            return context.querySelectorAll(selector);\r\n        }\r\n    };\r\n    lgQuery.prototype._each = function (func) {\r\n        if (!this.selector) {\r\n            return this;\r\n        }\r\n        if (this.selector.length !== undefined) {\r\n            [].forEach.call(this.selector, func);\r\n        }\r\n        else {\r\n            func(this.selector, 0);\r\n        }\r\n        return this;\r\n    };\r\n    lgQuery.prototype._setCssVendorPrefix = function (el, cssProperty, value) {\r\n        // prettier-ignore\r\n        var property = cssProperty.replace(/-([a-z])/gi, function (s, group1) {\r\n            return group1.toUpperCase();\r\n        });\r\n        if (this.cssVenderPrefixes.indexOf(property) !== -1) {\r\n            el.style[property.charAt(0).toLowerCase() + property.slice(1)] = value;\r\n            el.style['webkit' + property] = value;\r\n            el.style['moz' + property] = value;\r\n            el.style['ms' + property] = value;\r\n            el.style['o' + property] = value;\r\n        }\r\n        else {\r\n            el.style[property] = value;\r\n        }\r\n    };\r\n    lgQuery.prototype._getFirstEl = function () {\r\n        if (this.selector && this.selector.length !== undefined) {\r\n            return this.selector[0];\r\n        }\r\n        else {\r\n            return this.selector;\r\n        }\r\n    };\r\n    lgQuery.prototype.isEventMatched = function (event, eventName) {\r\n        var eventNamespace = eventName.split('.');\r\n        return event\r\n            .split('.')\r\n            .filter(function (e) { return e; })\r\n            .every(function (e) {\r\n            return eventNamespace.indexOf(e) !== -1;\r\n        });\r\n    };\r\n    lgQuery.prototype.attr = function (attr, value) {\r\n        if (value === undefined) {\r\n            if (!this.firstElement) {\r\n                return '';\r\n            }\r\n            return this.firstElement.getAttribute(attr);\r\n        }\r\n        this._each(function (el) {\r\n            el.setAttribute(attr, value);\r\n        });\r\n        return this;\r\n    };\r\n    lgQuery.prototype.find = function (selector) {\r\n        return $LG(this._getSelector(selector, this.selector));\r\n    };\r\n    lgQuery.prototype.first = function () {\r\n        if (this.selector && this.selector.length !== undefined) {\r\n            return $LG(this.selector[0]);\r\n        }\r\n        else {\r\n            return $LG(this.selector);\r\n        }\r\n    };\r\n    lgQuery.prototype.eq = function (index) {\r\n        return $LG(this.selector[index]);\r\n    };\r\n    lgQuery.prototype.parent = function () {\r\n        return $LG(this.selector.parentElement);\r\n    };\r\n    lgQuery.prototype.get = function () {\r\n        return this._getFirstEl();\r\n    };\r\n    lgQuery.prototype.removeAttr = function (attributes) {\r\n        var attrs = attributes.split(' ');\r\n        this._each(function (el) {\r\n            attrs.forEach(function (attr) { return el.removeAttribute(attr); });\r\n        });\r\n        return this;\r\n    };\r\n    lgQuery.prototype.wrap = function (className) {\r\n        if (!this.firstElement) {\r\n            return this;\r\n        }\r\n        var wrapper = document.createElement('div');\r\n        wrapper.className = className;\r\n        this.firstElement.parentNode.insertBefore(wrapper, this.firstElement);\r\n        this.firstElement.parentNode.removeChild(this.firstElement);\r\n        wrapper.appendChild(this.firstElement);\r\n        return this;\r\n    };\r\n    lgQuery.prototype.addClass = function (classNames) {\r\n        if (classNames === void 0) { classNames = ''; }\r\n        this._each(function (el) {\r\n            // IE doesn't support multiple arguments\r\n            classNames.split(' ').forEach(function (className) {\r\n                if (className) {\r\n                    el.classList.add(className);\r\n                }\r\n            });\r\n        });\r\n        return this;\r\n    };\r\n    lgQuery.prototype.removeClass = function (classNames) {\r\n        this._each(function (el) {\r\n            // IE doesn't support multiple arguments\r\n            classNames.split(' ').forEach(function (className) {\r\n                if (className) {\r\n                    el.classList.remove(className);\r\n                }\r\n            });\r\n        });\r\n        return this;\r\n    };\r\n    lgQuery.prototype.hasClass = function (className) {\r\n        if (!this.firstElement) {\r\n            return false;\r\n        }\r\n        return this.firstElement.classList.contains(className);\r\n    };\r\n    lgQuery.prototype.hasAttribute = function (attribute) {\r\n        if (!this.firstElement) {\r\n            return false;\r\n        }\r\n        return this.firstElement.hasAttribute(attribute);\r\n    };\r\n    lgQuery.prototype.toggleClass = function (className) {\r\n        if (!this.firstElement) {\r\n            return this;\r\n        }\r\n        if (this.hasClass(className)) {\r\n            this.removeClass(className);\r\n        }\r\n        else {\r\n            this.addClass(className);\r\n        }\r\n        return this;\r\n    };\r\n    lgQuery.prototype.css = function (property, value) {\r\n        var _this = this;\r\n        this._each(function (el) {\r\n            _this._setCssVendorPrefix(el, property, value);\r\n        });\r\n        return this;\r\n    };\r\n    // Need to pass separate namespaces for separate elements\r\n    lgQuery.prototype.on = function (events, listener) {\r\n        var _this = this;\r\n        if (!this.selector) {\r\n            return this;\r\n        }\r\n        events.split(' ').forEach(function (event) {\r\n            if (!Array.isArray(lgQuery.eventListeners[event])) {\r\n                lgQuery.eventListeners[event] = [];\r\n            }\r\n            lgQuery.eventListeners[event].push(listener);\r\n            _this.selector.addEventListener(event.split('.')[0], listener);\r\n        });\r\n        return this;\r\n    };\r\n    // @todo - test this\r\n    lgQuery.prototype.once = function (event, listener) {\r\n        var _this = this;\r\n        this.on(event, function () {\r\n            _this.off(event);\r\n            listener(event);\r\n        });\r\n        return this;\r\n    };\r\n    lgQuery.prototype.off = function (event) {\r\n        var _this = this;\r\n        if (!this.selector) {\r\n            return this;\r\n        }\r\n        Object.keys(lgQuery.eventListeners).forEach(function (eventName) {\r\n            if (_this.isEventMatched(event, eventName)) {\r\n                lgQuery.eventListeners[eventName].forEach(function (listener) {\r\n                    _this.selector.removeEventListener(eventName.split('.')[0], listener);\r\n                });\r\n                lgQuery.eventListeners[eventName] = [];\r\n            }\r\n        });\r\n        return this;\r\n    };\r\n    lgQuery.prototype.trigger = function (event, detail) {\r\n        if (!this.firstElement) {\r\n            return this;\r\n        }\r\n        var customEvent = new CustomEvent(event.split('.')[0], {\r\n            detail: detail || null,\r\n        });\r\n        this.firstElement.dispatchEvent(customEvent);\r\n        return this;\r\n    };\r\n    // Does not support IE\r\n    lgQuery.prototype.load = function (url) {\r\n        var _this = this;\r\n        fetch(url)\r\n            .then(function (res) { return res.text(); })\r\n            .then(function (html) {\r\n            _this.selector.innerHTML = html;\r\n        });\r\n        return this;\r\n    };\r\n    lgQuery.prototype.html = function (html) {\r\n        if (html === undefined) {\r\n            if (!this.firstElement) {\r\n                return '';\r\n            }\r\n            return this.firstElement.innerHTML;\r\n        }\r\n        this._each(function (el) {\r\n            el.innerHTML = html;\r\n        });\r\n        return this;\r\n    };\r\n    lgQuery.prototype.append = function (html) {\r\n        this._each(function (el) {\r\n            if (typeof html === 'string') {\r\n                el.insertAdjacentHTML('beforeend', html);\r\n            }\r\n            else {\r\n                el.appendChild(html);\r\n            }\r\n        });\r\n        return this;\r\n    };\r\n    lgQuery.prototype.prepend = function (html) {\r\n        this._each(function (el) {\r\n            el.insertAdjacentHTML('afterbegin', html);\r\n        });\r\n        return this;\r\n    };\r\n    lgQuery.prototype.remove = function () {\r\n        this._each(function (el) {\r\n            el.parentNode.removeChild(el);\r\n        });\r\n        return this;\r\n    };\r\n    lgQuery.prototype.empty = function () {\r\n        this._each(function (el) {\r\n            el.innerHTML = '';\r\n        });\r\n        return this;\r\n    };\r\n    lgQuery.prototype.scrollTop = function (scrollTop) {\r\n        if (scrollTop !== undefined) {\r\n            document.body.scrollTop = scrollTop;\r\n            document.documentElement.scrollTop = scrollTop;\r\n            return this;\r\n        }\r\n        else {\r\n            return (window.pageYOffset ||\r\n                document.documentElement.scrollTop ||\r\n                document.body.scrollTop ||\r\n                0);\r\n        }\r\n    };\r\n    lgQuery.prototype.scrollLeft = function (scrollLeft) {\r\n        if (scrollLeft !== undefined) {\r\n            document.body.scrollLeft = scrollLeft;\r\n            document.documentElement.scrollLeft = scrollLeft;\r\n            return this;\r\n        }\r\n        else {\r\n            return (window.pageXOffset ||\r\n                document.documentElement.scrollLeft ||\r\n                document.body.scrollLeft ||\r\n                0);\r\n        }\r\n    };\r\n    lgQuery.prototype.offset = function () {\r\n        if (!this.firstElement) {\r\n            return {\r\n                left: 0,\r\n                top: 0,\r\n            };\r\n        }\r\n        var rect = this.firstElement.getBoundingClientRect();\r\n        var bodyMarginLeft = $LG('body').style().marginLeft;\r\n        // Minus body margin - https://stackoverflow.com/questions/30711548/is-getboundingclientrect-left-returning-a-wrong-value\r\n        return {\r\n            left: rect.left - parseFloat(bodyMarginLeft) + this.scrollLeft(),\r\n            top: rect.top + this.scrollTop(),\r\n        };\r\n    };\r\n    lgQuery.prototype.style = function () {\r\n        if (!this.firstElement) {\r\n            return {};\r\n        }\r\n        return (this.firstElement.currentStyle ||\r\n            window.getComputedStyle(this.firstElement));\r\n    };\r\n    // Width without padding and border even if box-sizing is used.\r\n    lgQuery.prototype.width = function () {\r\n        var style = this.style();\r\n        return (this.firstElement.clientWidth -\r\n            parseFloat(style.paddingLeft) -\r\n            parseFloat(style.paddingRight));\r\n    };\r\n    // Height without padding and border even if box-sizing is used.\r\n    lgQuery.prototype.height = function () {\r\n        var style = this.style();\r\n        return (this.firstElement.clientHeight -\r\n            parseFloat(style.paddingTop) -\r\n            parseFloat(style.paddingBottom));\r\n    };\r\n    lgQuery.eventListeners = {};\r\n    return lgQuery;\r\n}());\r\nfunction $LG(selector) {\r\n    initLgPolyfills();\r\n    return new lgQuery(selector);\r\n}\n\nvar defaultDynamicOptions = [\r\n    'src',\r\n    'sources',\r\n    'subHtml',\r\n    'subHtmlUrl',\r\n    'html',\r\n    'video',\r\n    'poster',\r\n    'slideName',\r\n    'responsive',\r\n    'srcset',\r\n    'sizes',\r\n    'iframe',\r\n    'downloadUrl',\r\n    'download',\r\n    'width',\r\n    'facebookShareUrl',\r\n    'tweetText',\r\n    'iframeTitle',\r\n    'twitterShareUrl',\r\n    'pinterestShareUrl',\r\n    'pinterestText',\r\n    'fbHtml',\r\n    'disqusIdentifier',\r\n    'disqusUrl',\r\n];\r\n// Convert html data-attribute to camalcase\r\nfunction convertToData(attr) {\r\n    // FInd a way for lgsize\r\n    if (attr === 'href') {\r\n        return 'src';\r\n    }\r\n    attr = attr.replace('data-', '');\r\n    attr = attr.charAt(0).toLowerCase() + attr.slice(1);\r\n    attr = attr.replace(/-([a-z])/g, function (g) { return g[1].toUpperCase(); });\r\n    return attr;\r\n}\r\nvar utils = {\r\n    /**\r\n     * get possible width and height from the lgSize attribute. Used for ZoomFromOrigin option\r\n     */\r\n    getSize: function (el, container, spacing, defaultLgSize) {\r\n        if (spacing === void 0) { spacing = 0; }\r\n        var LGel = $LG(el);\r\n        var lgSize = LGel.attr('data-lg-size') || defaultLgSize;\r\n        if (!lgSize) {\r\n            return;\r\n        }\r\n        var isResponsiveSizes = lgSize.split(',');\r\n        // if at-least two viewport sizes are available\r\n        if (isResponsiveSizes[1]) {\r\n            var wWidth = window.innerWidth;\r\n            for (var i = 0; i < isResponsiveSizes.length; i++) {\r\n                var size_1 = isResponsiveSizes[i];\r\n                var responsiveWidth = parseInt(size_1.split('-')[2], 10);\r\n                if (responsiveWidth > wWidth) {\r\n                    lgSize = size_1;\r\n                    break;\r\n                }\r\n                // take last item as last option\r\n                if (i === isResponsiveSizes.length - 1) {\r\n                    lgSize = size_1;\r\n                }\r\n            }\r\n        }\r\n        var size = lgSize.split('-');\r\n        var width = parseInt(size[0], 10);\r\n        var height = parseInt(size[1], 10);\r\n        var cWidth = container.width();\r\n        var cHeight = container.height() - spacing;\r\n        var maxWidth = Math.min(cWidth, width);\r\n        var maxHeight = Math.min(cHeight, height);\r\n        var ratio = Math.min(maxWidth / width, maxHeight / height);\r\n        return { width: width * ratio, height: height * ratio };\r\n    },\r\n    /**\r\n     * @desc Get transform value based on the imageSize. Used for ZoomFromOrigin option\r\n     * @param {jQuery Element}\r\n     * @returns {String} Transform CSS string\r\n     */\r\n    getTransform: function (el, container, top, bottom, imageSize) {\r\n        if (!imageSize) {\r\n            return;\r\n        }\r\n        var LGel = $LG(el).find('img').first();\r\n        if (!LGel.get()) {\r\n            return;\r\n        }\r\n        var containerRect = container.get().getBoundingClientRect();\r\n        var wWidth = containerRect.width;\r\n        // using innerWidth to include mobile safari bottom bar\r\n        var wHeight = container.height() - (top + bottom);\r\n        var elWidth = LGel.width();\r\n        var elHeight = LGel.height();\r\n        var elStyle = LGel.style();\r\n        var x = (wWidth - elWidth) / 2 -\r\n            LGel.offset().left +\r\n            (parseFloat(elStyle.paddingLeft) || 0) +\r\n            (parseFloat(elStyle.borderLeft) || 0) +\r\n            $LG(window).scrollLeft() +\r\n            containerRect.left;\r\n        var y = (wHeight - elHeight) / 2 -\r\n            LGel.offset().top +\r\n            (parseFloat(elStyle.paddingTop) || 0) +\r\n            (parseFloat(elStyle.borderTop) || 0) +\r\n            $LG(window).scrollTop() +\r\n            top;\r\n        var scX = elWidth / imageSize.width;\r\n        var scY = elHeight / imageSize.height;\r\n        var transform = 'translate3d(' +\r\n            (x *= -1) +\r\n            'px, ' +\r\n            (y *= -1) +\r\n            'px, 0) scale3d(' +\r\n            scX +\r\n            ', ' +\r\n            scY +\r\n            ', 1)';\r\n        return transform;\r\n    },\r\n    getIframeMarkup: function (iframeWidth, iframeHeight, iframeMaxWidth, iframeMaxHeight, src, iframeTitle) {\r\n        var title = iframeTitle ? 'title=\"' + iframeTitle + '\"' : '';\r\n        return \"<div class=\\\"lg-video-cont lg-has-iframe\\\" style=\\\"width:\" + iframeWidth + \"; max-width:\" + iframeMaxWidth + \"; height: \" + iframeHeight + \"; max-height:\" + iframeMaxHeight + \"\\\">\\n                    <iframe class=\\\"lg-object\\\" frameborder=\\\"0\\\" \" + title + \" src=\\\"\" + src + \"\\\"  allowfullscreen=\\\"true\\\"></iframe>\\n                </div>\";\r\n    },\r\n    getImgMarkup: function (index, src, altAttr, srcset, sizes, sources) {\r\n        var srcsetAttr = srcset ? \"srcset=\\\"\" + srcset + \"\\\"\" : '';\r\n        var sizesAttr = sizes ? \"sizes=\\\"\" + sizes + \"\\\"\" : '';\r\n        var imgMarkup = \"<img \" + altAttr + \" \" + srcsetAttr + \"  \" + sizesAttr + \" class=\\\"lg-object lg-image\\\" data-index=\\\"\" + index + \"\\\" src=\\\"\" + src + \"\\\" />\";\r\n        var sourceTag = '';\r\n        if (sources) {\r\n            var sourceObj = typeof sources === 'string' ? JSON.parse(sources) : sources;\r\n            sourceTag = sourceObj.map(function (source) {\r\n                var attrs = '';\r\n                Object.keys(source).forEach(function (key) {\r\n                    // Do not remove the first space as it is required to separate the attributes\r\n                    attrs += \" \" + key + \"=\\\"\" + source[key] + \"\\\"\";\r\n                });\r\n                return \"<source \" + attrs + \"></source>\";\r\n            });\r\n        }\r\n        return \"\" + sourceTag + imgMarkup;\r\n    },\r\n    // Get src from responsive src\r\n    getResponsiveSrc: function (srcItms) {\r\n        var rsWidth = [];\r\n        var rsSrc = [];\r\n        var src = '';\r\n        for (var i = 0; i < srcItms.length; i++) {\r\n            var _src = srcItms[i].split(' ');\r\n            // Manage empty space\r\n            if (_src[0] === '') {\r\n                _src.splice(0, 1);\r\n            }\r\n            rsSrc.push(_src[0]);\r\n            rsWidth.push(_src[1]);\r\n        }\r\n        var wWidth = window.innerWidth;\r\n        for (var j = 0; j < rsWidth.length; j++) {\r\n            if (parseInt(rsWidth[j], 10) > wWidth) {\r\n                src = rsSrc[j];\r\n                break;\r\n            }\r\n        }\r\n        return src;\r\n    },\r\n    isImageLoaded: function (img) {\r\n        if (!img)\r\n            return false;\r\n        // During the onload event, IE correctly identifies any images that\r\n        // weren’t downloaded as not complete. Others should too. Gecko-based\r\n        // browsers act like NS4 in that they report this incorrectly.\r\n        if (!img.complete) {\r\n            return false;\r\n        }\r\n        // However, they do have two very useful properties: naturalWidth and\r\n        // naturalHeight. These give the true size of the image. If it failed\r\n        // to load, either of these should be zero.\r\n        if (img.naturalWidth === 0) {\r\n            return false;\r\n        }\r\n        // No other way of checking: assume it’s ok.\r\n        return true;\r\n    },\r\n    getVideoPosterMarkup: function (_poster, dummyImg, videoContStyle, playVideoString, _isVideo) {\r\n        var videoClass = '';\r\n        if (_isVideo && _isVideo.youtube) {\r\n            videoClass = 'lg-has-youtube';\r\n        }\r\n        else if (_isVideo && _isVideo.vimeo) {\r\n            videoClass = 'lg-has-vimeo';\r\n        }\r\n        else {\r\n            videoClass = 'lg-has-html5';\r\n        }\r\n        return \"<div class=\\\"lg-video-cont \" + videoClass + \"\\\" style=\\\"\" + videoContStyle + \"\\\">\\n                <div class=\\\"lg-video-play-button\\\">\\n                <svg\\n                    viewBox=\\\"0 0 20 20\\\"\\n                    preserveAspectRatio=\\\"xMidYMid\\\"\\n                    focusable=\\\"false\\\"\\n                    aria-labelledby=\\\"\" + playVideoString + \"\\\"\\n                    role=\\\"img\\\"\\n                    class=\\\"lg-video-play-icon\\\"\\n                >\\n                    <title>\" + playVideoString + \"</title>\\n                    <polygon class=\\\"lg-video-play-icon-inner\\\" points=\\\"1,0 20,10 1,20\\\"></polygon>\\n                </svg>\\n                <svg class=\\\"lg-video-play-icon-bg\\\" viewBox=\\\"0 0 50 50\\\" focusable=\\\"false\\\">\\n                    <circle cx=\\\"50%\\\" cy=\\\"50%\\\" r=\\\"20\\\"></circle></svg>\\n                <svg class=\\\"lg-video-play-icon-circle\\\" viewBox=\\\"0 0 50 50\\\" focusable=\\\"false\\\">\\n                    <circle cx=\\\"50%\\\" cy=\\\"50%\\\" r=\\\"20\\\"></circle>\\n                </svg>\\n            </div>\\n            \" + (dummyImg || '') + \"\\n            <img class=\\\"lg-object lg-video-poster\\\" src=\\\"\" + _poster + \"\\\" />\\n        </div>\";\r\n    },\r\n    getFocusableElements: function (container) {\r\n        var elements = container.querySelectorAll('a[href]:not([disabled]), button:not([disabled]), textarea:not([disabled]), input[type=\"text\"]:not([disabled]), input[type=\"radio\"]:not([disabled]), input[type=\"checkbox\"]:not([disabled]), select:not([disabled])');\r\n        var visibleElements = [].filter.call(elements, function (element) {\r\n            var style = window.getComputedStyle(element);\r\n            return style.display !== 'none' && style.visibility !== 'hidden';\r\n        });\r\n        return visibleElements;\r\n    },\r\n    /**\r\n     * @desc Create dynamic elements array from gallery items when dynamic option is false\r\n     * It helps to avoid frequent DOM interaction\r\n     * and avoid multiple checks for dynamic elments\r\n     *\r\n     * @returns {Array} dynamicEl\r\n     */\r\n    getDynamicOptions: function (items, extraProps, getCaptionFromTitleOrAlt, exThumbImage) {\r\n        var dynamicElements = [];\r\n        var availableDynamicOptions = __spreadArrays(defaultDynamicOptions, extraProps);\r\n        [].forEach.call(items, function (item) {\r\n            var dynamicEl = {};\r\n            for (var i = 0; i < item.attributes.length; i++) {\r\n                var attr = item.attributes[i];\r\n                if (attr.specified) {\r\n                    var dynamicAttr = convertToData(attr.name);\r\n                    var label = '';\r\n                    if (availableDynamicOptions.indexOf(dynamicAttr) > -1) {\r\n                        label = dynamicAttr;\r\n                    }\r\n                    if (label) {\r\n                        dynamicEl[label] = attr.value;\r\n                    }\r\n                }\r\n            }\r\n            var currentItem = $LG(item);\r\n            var alt = currentItem.find('img').first().attr('alt');\r\n            var title = currentItem.attr('title');\r\n            var thumb = exThumbImage\r\n                ? currentItem.attr(exThumbImage)\r\n                : currentItem.find('img').first().attr('src');\r\n            dynamicEl.thumb = thumb;\r\n            if (getCaptionFromTitleOrAlt && !dynamicEl.subHtml) {\r\n                dynamicEl.subHtml = title || alt || '';\r\n            }\r\n            dynamicEl.alt = alt || title || '';\r\n            dynamicElements.push(dynamicEl);\r\n        });\r\n        return dynamicElements;\r\n    },\r\n    isMobile: function () {\r\n        return /iPhone|iPad|iPod|Android/i.test(navigator.userAgent);\r\n    },\r\n    /**\r\n     * @desc Check the given src is video\r\n     * @param {String} src\r\n     * @return {Object} video type\r\n     * Ex:{ youtube  :  [\"//www.youtube.com/watch?v=c0asJgSyxcY\", \"c0asJgSyxcY\"] }\r\n     *\r\n     * @todo - this information can be moved to dynamicEl to avoid frequent calls\r\n     */\r\n    isVideo: function (src, isHTML5VIdeo, index) {\r\n        if (!src) {\r\n            if (isHTML5VIdeo) {\r\n                return {\r\n                    html5: true,\r\n                };\r\n            }\r\n            else {\r\n                console.error('lightGallery :- data-src is not provided on slide item ' +\r\n                    (index + 1) +\r\n                    '. Please make sure the selector property is properly configured. More info - https://www.lightgalleryjs.com/demos/html-markup/');\r\n                return;\r\n            }\r\n        }\r\n        var youtube = src.match(/\\/\\/(?:www\\.)?youtu(?:\\.be|be\\.com|be-nocookie\\.com)\\/(?:watch\\?v=|embed\\/)?([a-z0-9\\-\\_\\%]+)([\\&|?][\\S]*)*/i);\r\n        var vimeo = src.match(/\\/\\/(?:www\\.)?(?:player\\.)?vimeo.com\\/(?:video\\/)?([0-9a-z\\-_]+)(.*)?/i);\r\n        var wistia = src.match(/https?:\\/\\/(.+)?(wistia\\.com|wi\\.st)\\/(medias|embed)\\/([0-9a-z\\-_]+)(.*)/);\r\n        if (youtube) {\r\n            return {\r\n                youtube: youtube,\r\n            };\r\n        }\r\n        else if (vimeo) {\r\n            return {\r\n                vimeo: vimeo,\r\n            };\r\n        }\r\n        else if (wistia) {\r\n            return {\r\n                wistia: wistia,\r\n            };\r\n        }\r\n    },\r\n};\n\n// @ref - https://stackoverflow.com/questions/3971841/how-to-resize-images-proportionally-keeping-the-aspect-ratio\r\n// @ref - https://2ality.com/2017/04/setting-up-multi-platform-packages.html\r\n// Unique id for each gallery\r\nvar lgId = 0;\r\nvar LightGallery = /** @class */ (function () {\r\n    function LightGallery(element, options) {\r\n        this.lgOpened = false;\r\n        this.index = 0;\r\n        // lightGallery modules\r\n        this.plugins = [];\r\n        // false when lightGallery load first slide content;\r\n        this.lGalleryOn = false;\r\n        // True when a slide animation is in progress\r\n        this.lgBusy = false;\r\n        this.currentItemsInDom = [];\r\n        // Scroll top value before lightGallery is opened\r\n        this.prevScrollTop = 0;\r\n        this.bodyPaddingRight = 0;\r\n        this.isDummyImageRemoved = false;\r\n        this.dragOrSwipeEnabled = false;\r\n        this.mediaContainerPosition = {\r\n            top: 0,\r\n            bottom: 0,\r\n        };\r\n        if (!element) {\r\n            return this;\r\n        }\r\n        lgId++;\r\n        this.lgId = lgId;\r\n        this.el = element;\r\n        this.LGel = $LG(element);\r\n        this.generateSettings(options);\r\n        this.buildModules();\r\n        // When using dynamic mode, ensure dynamicEl is an array\r\n        if (this.settings.dynamic &&\r\n            this.settings.dynamicEl !== undefined &&\r\n            !Array.isArray(this.settings.dynamicEl)) {\r\n            throw 'When using dynamic mode, you must also define dynamicEl as an Array.';\r\n        }\r\n        this.galleryItems = this.getItems();\r\n        this.normalizeSettings();\r\n        // Gallery items\r\n        this.init();\r\n        this.validateLicense();\r\n        return this;\r\n    }\r\n    LightGallery.prototype.generateSettings = function (options) {\r\n        // lightGallery settings\r\n        this.settings = __assign(__assign({}, lightGalleryCoreSettings), options);\r\n        if (this.settings.isMobile &&\r\n            typeof this.settings.isMobile === 'function'\r\n            ? this.settings.isMobile()\r\n            : utils.isMobile()) {\r\n            var mobileSettings = __assign(__assign({}, this.settings.mobileSettings), this.settings.mobileSettings);\r\n            this.settings = __assign(__assign({}, this.settings), mobileSettings);\r\n        }\r\n    };\r\n    LightGallery.prototype.normalizeSettings = function () {\r\n        if (this.settings.slideEndAnimation) {\r\n            this.settings.hideControlOnEnd = false;\r\n        }\r\n        if (!this.settings.closable) {\r\n            this.settings.swipeToClose = false;\r\n        }\r\n        // And reset it on close to get the correct value next time\r\n        this.zoomFromOrigin = this.settings.zoomFromOrigin;\r\n        // At the moment, Zoom from image doesn't support dynamic options\r\n        // @todo add zoomFromOrigin support for dynamic images\r\n        if (this.settings.dynamic) {\r\n            this.zoomFromOrigin = false;\r\n        }\r\n        if (!this.settings.container) {\r\n            this.settings.container = document.body;\r\n        }\r\n        // settings.preload should not be grater than $item.length\r\n        this.settings.preload = Math.min(this.settings.preload, this.galleryItems.length);\r\n    };\r\n    LightGallery.prototype.init = function () {\r\n        var _this = this;\r\n        this.addSlideVideoInfo(this.galleryItems);\r\n        this.buildStructure();\r\n        this.LGel.trigger(lGEvents.init, {\r\n            instance: this,\r\n        });\r\n        if (this.settings.keyPress) {\r\n            this.keyPress();\r\n        }\r\n        setTimeout(function () {\r\n            _this.enableDrag();\r\n            _this.enableSwipe();\r\n            _this.triggerPosterClick();\r\n        }, 50);\r\n        this.arrow();\r\n        if (this.settings.mousewheel) {\r\n            this.mousewheel();\r\n        }\r\n        if (!this.settings.dynamic) {\r\n            this.openGalleryOnItemClick();\r\n        }\r\n    };\r\n    LightGallery.prototype.openGalleryOnItemClick = function () {\r\n        var _this = this;\r\n        var _loop_1 = function (index) {\r\n            var element = this_1.items[index];\r\n            var $element = $LG(element);\r\n            // Using different namespace for click because click event should not unbind if selector is same object('this')\r\n            // @todo manage all event listners - should have namespace that represent element\r\n            var uuid = lgQuery.generateUUID();\r\n            $element\r\n                .attr('data-lg-id', uuid)\r\n                .on(\"click.lgcustom-item-\" + uuid, function (e) {\r\n                e.preventDefault();\r\n                var currentItemIndex = _this.settings.index || index;\r\n                _this.openGallery(currentItemIndex, element);\r\n            });\r\n        };\r\n        var this_1 = this;\r\n        // Using for loop instead of using bubbling as the items can be any html element.\r\n        for (var index = 0; index < this.items.length; index++) {\r\n            _loop_1(index);\r\n        }\r\n    };\r\n    /**\r\n     * Module constructor\r\n     * Modules are build incrementally.\r\n     * Gallery should be opened only once all the modules are initialized.\r\n     * use moduleBuildTimeout to make sure this\r\n     */\r\n    LightGallery.prototype.buildModules = function () {\r\n        var _this = this;\r\n        this.settings.plugins.forEach(function (plugin) {\r\n            _this.plugins.push(new plugin(_this, $LG));\r\n        });\r\n    };\r\n    LightGallery.prototype.validateLicense = function () {\r\n        if (!this.settings.licenseKey) {\r\n            console.error('Please provide a valid license key');\r\n        }\r\n        else if (this.settings.licenseKey === '0000-0000-000-0000') {\r\n            console.warn(\"lightGallery: \" + this.settings.licenseKey + \" license key is not valid for production use\");\r\n        }\r\n    };\r\n    LightGallery.prototype.getSlideItem = function (index) {\r\n        return $LG(this.getSlideItemId(index));\r\n    };\r\n    LightGallery.prototype.getSlideItemId = function (index) {\r\n        return \"#lg-item-\" + this.lgId + \"-\" + index;\r\n    };\r\n    LightGallery.prototype.getIdName = function (id) {\r\n        return id + \"-\" + this.lgId;\r\n    };\r\n    LightGallery.prototype.getElementById = function (id) {\r\n        return $LG(\"#\" + this.getIdName(id));\r\n    };\r\n    LightGallery.prototype.manageSingleSlideClassName = function () {\r\n        if (this.galleryItems.length < 2) {\r\n            this.outer.addClass('lg-single-item');\r\n        }\r\n        else {\r\n            this.outer.removeClass('lg-single-item');\r\n        }\r\n    };\r\n    LightGallery.prototype.buildStructure = function () {\r\n        var _this = this;\r\n        var container = this.$container && this.$container.get();\r\n        if (container) {\r\n            return;\r\n        }\r\n        var controls = '';\r\n        var subHtmlCont = '';\r\n        // Create controls\r\n        if (this.settings.controls) {\r\n            controls = \"<button type=\\\"button\\\" id=\\\"\" + this.getIdName('lg-prev') + \"\\\" aria-label=\\\"\" + this.settings.strings['previousSlide'] + \"\\\" class=\\\"lg-prev lg-icon\\\"> \" + this.settings.prevHtml + \" </button>\\n                <button type=\\\"button\\\" id=\\\"\" + this.getIdName('lg-next') + \"\\\" aria-label=\\\"\" + this.settings.strings['nextSlide'] + \"\\\" class=\\\"lg-next lg-icon\\\"> \" + this.settings.nextHtml + \" </button>\";\r\n        }\r\n        if (this.settings.appendSubHtmlTo !== '.lg-item') {\r\n            subHtmlCont =\r\n                '<div class=\"lg-sub-html\" role=\"status\" aria-live=\"polite\"></div>';\r\n        }\r\n        var addClasses = '';\r\n        if (this.settings.allowMediaOverlap) {\r\n            // Do not remove space before last single quote\r\n            addClasses += 'lg-media-overlap ';\r\n        }\r\n        var ariaLabelledby = this.settings.ariaLabelledby\r\n            ? 'aria-labelledby=\"' + this.settings.ariaLabelledby + '\"'\r\n            : '';\r\n        var ariaDescribedby = this.settings.ariaDescribedby\r\n            ? 'aria-describedby=\"' + this.settings.ariaDescribedby + '\"'\r\n            : '';\r\n        var containerClassName = \"lg-container \" + this.settings.addClass + \" \" + (document.body !== this.settings.container ? 'lg-inline' : '');\r\n        var closeIcon = this.settings.closable && this.settings.showCloseIcon\r\n            ? \"<button type=\\\"button\\\" aria-label=\\\"\" + this.settings.strings['closeGallery'] + \"\\\" id=\\\"\" + this.getIdName('lg-close') + \"\\\" class=\\\"lg-close lg-icon\\\"></button>\"\r\n            : '';\r\n        var maximizeIcon = this.settings.showMaximizeIcon\r\n            ? \"<button type=\\\"button\\\" aria-label=\\\"\" + this.settings.strings['toggleMaximize'] + \"\\\" id=\\\"\" + this.getIdName('lg-maximize') + \"\\\" class=\\\"lg-maximize lg-icon\\\"></button>\"\r\n            : '';\r\n        var template = \"\\n        <div class=\\\"\" + containerClassName + \"\\\" id=\\\"\" + this.getIdName('lg-container') + \"\\\" tabindex=\\\"-1\\\" aria-modal=\\\"true\\\" \" + ariaLabelledby + \" \" + ariaDescribedby + \" role=\\\"dialog\\\"\\n        >\\n            <div id=\\\"\" + this.getIdName('lg-backdrop') + \"\\\" class=\\\"lg-backdrop\\\"></div>\\n\\n            <div id=\\\"\" + this.getIdName('lg-outer') + \"\\\" class=\\\"lg-outer lg-use-css3 lg-css3 lg-hide-items \" + addClasses + \" \\\">\\n\\n              <div id=\\\"\" + this.getIdName('lg-content') + \"\\\" class=\\\"lg-content\\\">\\n                <div id=\\\"\" + this.getIdName('lg-inner') + \"\\\" class=\\\"lg-inner\\\">\\n                </div>\\n                \" + controls + \"\\n              </div>\\n                <div id=\\\"\" + this.getIdName('lg-toolbar') + \"\\\" class=\\\"lg-toolbar lg-group\\\">\\n                    \" + maximizeIcon + \"\\n                    \" + closeIcon + \"\\n                    </div>\\n                    \" + (this.settings.appendSubHtmlTo === '.lg-outer'\r\n            ? subHtmlCont\r\n            : '') + \"\\n                <div id=\\\"\" + this.getIdName('lg-components') + \"\\\" class=\\\"lg-components\\\">\\n                    \" + (this.settings.appendSubHtmlTo === '.lg-sub-html'\r\n            ? subHtmlCont\r\n            : '') + \"\\n                </div>\\n            </div>\\n        </div>\\n        \";\r\n        $LG(this.settings.container).append(template);\r\n        if (document.body !== this.settings.container) {\r\n            $LG(this.settings.container).css('position', 'relative');\r\n        }\r\n        this.outer = this.getElementById('lg-outer');\r\n        this.$lgComponents = this.getElementById('lg-components');\r\n        this.$backdrop = this.getElementById('lg-backdrop');\r\n        this.$container = this.getElementById('lg-container');\r\n        this.$inner = this.getElementById('lg-inner');\r\n        this.$content = this.getElementById('lg-content');\r\n        this.$toolbar = this.getElementById('lg-toolbar');\r\n        this.$backdrop.css('transition-duration', this.settings.backdropDuration + 'ms');\r\n        var outerClassNames = this.settings.mode + \" \";\r\n        this.manageSingleSlideClassName();\r\n        if (this.settings.enableDrag) {\r\n            outerClassNames += 'lg-grab ';\r\n        }\r\n        this.outer.addClass(outerClassNames);\r\n        this.$inner.css('transition-timing-function', this.settings.easing);\r\n        this.$inner.css('transition-duration', this.settings.speed + 'ms');\r\n        if (this.settings.download) {\r\n            this.$toolbar.append(\"<a id=\\\"\" + this.getIdName('lg-download') + \"\\\" target=\\\"_blank\\\" rel=\\\"noopener\\\" aria-label=\\\"\" + this.settings.strings['download'] + \"\\\" download class=\\\"lg-download lg-icon\\\"></a>\");\r\n        }\r\n        this.counter();\r\n        $LG(window).on(\"resize.lg.global\" + this.lgId + \" orientationchange.lg.global\" + this.lgId, function () {\r\n            _this.refreshOnResize();\r\n        });\r\n        this.hideBars();\r\n        this.manageCloseGallery();\r\n        this.toggleMaximize();\r\n        this.initModules();\r\n    };\r\n    LightGallery.prototype.refreshOnResize = function () {\r\n        if (this.lgOpened) {\r\n            var currentGalleryItem = this.galleryItems[this.index];\r\n            var __slideVideoInfo = currentGalleryItem.__slideVideoInfo;\r\n            this.mediaContainerPosition = this.getMediaContainerPosition();\r\n            var _a = this.mediaContainerPosition, top_1 = _a.top, bottom = _a.bottom;\r\n            this.currentImageSize = utils.getSize(this.items[this.index], this.outer, top_1 + bottom, __slideVideoInfo && this.settings.videoMaxSize);\r\n            if (__slideVideoInfo) {\r\n                this.resizeVideoSlide(this.index, this.currentImageSize);\r\n            }\r\n            if (this.zoomFromOrigin && !this.isDummyImageRemoved) {\r\n                var imgStyle = this.getDummyImgStyles(this.currentImageSize);\r\n                this.outer\r\n                    .find('.lg-current .lg-dummy-img')\r\n                    .first()\r\n                    .attr('style', imgStyle);\r\n            }\r\n            this.LGel.trigger(lGEvents.containerResize);\r\n        }\r\n    };\r\n    LightGallery.prototype.resizeVideoSlide = function (index, imageSize) {\r\n        var lgVideoStyle = this.getVideoContStyle(imageSize);\r\n        var currentSlide = this.getSlideItem(index);\r\n        currentSlide.find('.lg-video-cont').attr('style', lgVideoStyle);\r\n    };\r\n    /**\r\n     * Update slides dynamically.\r\n     * Add, edit or delete slides dynamically when lightGallery is opened.\r\n     * Modify the current gallery items and pass it via updateSlides method\r\n     * @note\r\n     * - Do not mutate existing lightGallery items directly.\r\n     * - Always pass new list of gallery items\r\n     * - You need to take care of thumbnails outside the gallery if any\r\n     * - user this method only if you want to update slides when the gallery is opened. Otherwise, use `refresh()` method.\r\n     * @param items Gallery items\r\n     * @param index After the update operation, which slide gallery should navigate to\r\n     * @category lGPublicMethods\r\n     * @example\r\n     * const plugin = lightGallery();\r\n     *\r\n     * // Adding slides dynamically\r\n     * let galleryItems = [\r\n     * // Access existing lightGallery items\r\n     * // galleryItems are automatically generated internally from the gallery HTML markup\r\n     * // or directly from galleryItems when dynamic gallery is used\r\n     *   ...plugin.galleryItems,\r\n     *     ...[\r\n     *       {\r\n     *         src: 'img/img-1.png',\r\n     *           thumb: 'img/thumb1.png',\r\n     *         },\r\n     *     ],\r\n     *   ];\r\n     *   plugin.updateSlides(\r\n     *     galleryItems,\r\n     *     plugin.index,\r\n     *   );\r\n     *\r\n     *\r\n     * // Remove slides dynamically\r\n     * galleryItems = JSON.parse(\r\n     *   JSON.stringify(updateSlideInstance.galleryItems),\r\n     * );\r\n     * galleryItems.shift();\r\n     * updateSlideInstance.updateSlides(galleryItems, 1);\r\n     * @see <a href=\"/demos/update-slides/\">Demo</a>\r\n     */\r\n    LightGallery.prototype.updateSlides = function (items, index) {\r\n        if (this.index > items.length - 1) {\r\n            this.index = items.length - 1;\r\n        }\r\n        if (items.length === 1) {\r\n            this.index = 0;\r\n        }\r\n        if (!items.length) {\r\n            this.closeGallery();\r\n            return;\r\n        }\r\n        var currentSrc = this.galleryItems[index].src;\r\n        this.galleryItems = items;\r\n        this.updateControls();\r\n        this.$inner.empty();\r\n        this.currentItemsInDom = [];\r\n        var _index = 0;\r\n        // Find the current index based on source value of the slide\r\n        this.galleryItems.some(function (galleryItem, itemIndex) {\r\n            if (galleryItem.src === currentSrc) {\r\n                _index = itemIndex;\r\n                return true;\r\n            }\r\n            return false;\r\n        });\r\n        this.currentItemsInDom = this.organizeSlideItems(_index, -1);\r\n        this.loadContent(_index, true);\r\n        this.getSlideItem(_index).addClass('lg-current');\r\n        this.index = _index;\r\n        this.updateCurrentCounter(_index);\r\n        this.LGel.trigger(lGEvents.updateSlides);\r\n    };\r\n    // Get gallery items based on multiple conditions\r\n    LightGallery.prototype.getItems = function () {\r\n        // Gallery items\r\n        this.items = [];\r\n        if (!this.settings.dynamic) {\r\n            if (this.settings.selector === 'this') {\r\n                this.items.push(this.el);\r\n            }\r\n            else if (this.settings.selector) {\r\n                if (typeof this.settings.selector === 'string') {\r\n                    if (this.settings.selectWithin) {\r\n                        var selectWithin = $LG(this.settings.selectWithin);\r\n                        this.items = selectWithin\r\n                            .find(this.settings.selector)\r\n                            .get();\r\n                    }\r\n                    else {\r\n                        this.items = this.el.querySelectorAll(this.settings.selector);\r\n                    }\r\n                }\r\n                else {\r\n                    this.items = this.settings.selector;\r\n                }\r\n            }\r\n            else {\r\n                this.items = this.el.children;\r\n            }\r\n            return utils.getDynamicOptions(this.items, this.settings.extraProps, this.settings.getCaptionFromTitleOrAlt, this.settings.exThumbImage);\r\n        }\r\n        else {\r\n            return this.settings.dynamicEl || [];\r\n        }\r\n    };\r\n    LightGallery.prototype.shouldHideScrollbar = function () {\r\n        return (this.settings.hideScrollbar &&\r\n            document.body === this.settings.container);\r\n    };\r\n    LightGallery.prototype.hideScrollbar = function () {\r\n        if (!this.shouldHideScrollbar()) {\r\n            return;\r\n        }\r\n        this.bodyPaddingRight = parseFloat($LG('body').style().paddingRight);\r\n        var bodyRect = document.documentElement.getBoundingClientRect();\r\n        var scrollbarWidth = window.innerWidth - bodyRect.width;\r\n        $LG(document.body).css('padding-right', scrollbarWidth + this.bodyPaddingRight + 'px');\r\n        $LG(document.body).addClass('lg-overlay-open');\r\n    };\r\n    LightGallery.prototype.resetScrollBar = function () {\r\n        if (!this.shouldHideScrollbar()) {\r\n            return;\r\n        }\r\n        $LG(document.body).css('padding-right', this.bodyPaddingRight + 'px');\r\n        $LG(document.body).removeClass('lg-overlay-open');\r\n    };\r\n    /**\r\n     * Open lightGallery.\r\n     * Open gallery with specific slide by passing index of the slide as parameter.\r\n     * @category lGPublicMethods\r\n     * @param {Number} index  - index of the slide\r\n     * @param {HTMLElement} element - Which image lightGallery should zoom from\r\n     *\r\n     * @example\r\n     * const $dynamicGallery = document.getElementById('dynamic-gallery-demo');\r\n     * const dynamicGallery = lightGallery($dynamicGallery, {\r\n     *     dynamic: true,\r\n     *     dynamicEl: [\r\n     *         {\r\n     *              src: 'img/1.jpg',\r\n     *              thumb: 'img/thumb-1.jpg',\r\n     *              subHtml: '<h4>Image 1 title</h4><p>Image 1 descriptions.</p>',\r\n     *         },\r\n     *         ...\r\n     *     ],\r\n     * });\r\n     * $dynamicGallery.addEventListener('click', function () {\r\n     *     // Starts with third item.(Optional).\r\n     *     // This is useful if you want use dynamic mode with\r\n     *     // custom thumbnails (thumbnails outside gallery),\r\n     *     dynamicGallery.openGallery(2);\r\n     * });\r\n     *\r\n     */\r\n    LightGallery.prototype.openGallery = function (index, element) {\r\n        var _this = this;\r\n        if (index === void 0) { index = this.settings.index; }\r\n        // prevent accidental double execution\r\n        if (this.lgOpened)\r\n            return;\r\n        this.lgOpened = true;\r\n        this.outer.removeClass('lg-hide-items');\r\n        this.hideScrollbar();\r\n        // Add display block, but still has opacity 0\r\n        this.$container.addClass('lg-show');\r\n        var itemsToBeInsertedToDom = this.getItemsToBeInsertedToDom(index, index);\r\n        this.currentItemsInDom = itemsToBeInsertedToDom;\r\n        var items = '';\r\n        itemsToBeInsertedToDom.forEach(function (item) {\r\n            items = items + (\"<div id=\\\"\" + item + \"\\\" class=\\\"lg-item\\\"></div>\");\r\n        });\r\n        this.$inner.append(items);\r\n        this.addHtml(index);\r\n        var transform = '';\r\n        this.mediaContainerPosition = this.getMediaContainerPosition();\r\n        var _a = this.mediaContainerPosition, top = _a.top, bottom = _a.bottom;\r\n        if (!this.settings.allowMediaOverlap) {\r\n            this.setMediaContainerPosition(top, bottom);\r\n        }\r\n        var __slideVideoInfo = this.galleryItems[index].__slideVideoInfo;\r\n        if (this.zoomFromOrigin && element) {\r\n            this.currentImageSize = utils.getSize(element, this.outer, top + bottom, __slideVideoInfo && this.settings.videoMaxSize);\r\n            transform = utils.getTransform(element, this.outer, top, bottom, this.currentImageSize);\r\n        }\r\n        if (!this.zoomFromOrigin || !transform) {\r\n            this.outer.addClass(this.settings.startClass);\r\n            this.getSlideItem(index).removeClass('lg-complete');\r\n        }\r\n        var timeout = this.settings.zoomFromOrigin\r\n            ? 100\r\n            : this.settings.backdropDuration;\r\n        setTimeout(function () {\r\n            _this.outer.addClass('lg-components-open');\r\n        }, timeout);\r\n        this.index = index;\r\n        this.LGel.trigger(lGEvents.beforeOpen);\r\n        // add class lg-current to remove initial transition\r\n        this.getSlideItem(index).addClass('lg-current');\r\n        this.lGalleryOn = false;\r\n        // Store the current scroll top value to scroll back after closing the gallery..\r\n        this.prevScrollTop = $LG(window).scrollTop();\r\n        setTimeout(function () {\r\n            // Need to check both zoomFromOrigin and transform values as we need to set set the\r\n            // default opening animation if user missed to add the lg-size attribute\r\n            if (_this.zoomFromOrigin && transform) {\r\n                var currentSlide_1 = _this.getSlideItem(index);\r\n                currentSlide_1.css('transform', transform);\r\n                setTimeout(function () {\r\n                    currentSlide_1\r\n                        .addClass('lg-start-progress lg-start-end-progress')\r\n                        .css('transition-duration', _this.settings.startAnimationDuration + 'ms');\r\n                    _this.outer.addClass('lg-zoom-from-image');\r\n                });\r\n                setTimeout(function () {\r\n                    currentSlide_1.css('transform', 'translate3d(0, 0, 0)');\r\n                }, 100);\r\n            }\r\n            setTimeout(function () {\r\n                _this.$backdrop.addClass('in');\r\n                _this.$container.addClass('lg-show-in');\r\n            }, 10);\r\n            setTimeout(function () {\r\n                if (_this.settings.trapFocus &&\r\n                    document.body === _this.settings.container) {\r\n                    _this.trapFocus();\r\n                }\r\n            }, _this.settings.backdropDuration + 50);\r\n            // lg-visible class resets gallery opacity to 1\r\n            if (!_this.zoomFromOrigin || !transform) {\r\n                setTimeout(function () {\r\n                    _this.outer.addClass('lg-visible');\r\n                }, _this.settings.backdropDuration);\r\n            }\r\n            // initiate slide function\r\n            _this.slide(index, false, false, false);\r\n            _this.LGel.trigger(lGEvents.afterOpen);\r\n        });\r\n        if (document.body === this.settings.container) {\r\n            $LG('html').addClass('lg-on');\r\n        }\r\n    };\r\n    /**\r\n     * Note - Changing the position of the media on every slide transition creates a flickering effect.\r\n     * Therefore, The height of the caption is calculated dynamically, only once based on the first slide caption.\r\n     * if you have dynamic captions for each media,\r\n     * you can provide an appropriate height for the captions via allowMediaOverlap option\r\n     */\r\n    LightGallery.prototype.getMediaContainerPosition = function () {\r\n        if (this.settings.allowMediaOverlap) {\r\n            return {\r\n                top: 0,\r\n                bottom: 0,\r\n            };\r\n        }\r\n        var top = this.$toolbar.get().clientHeight || 0;\r\n        var subHtml = this.outer.find('.lg-components .lg-sub-html').get();\r\n        var captionHeight = this.settings.defaultCaptionHeight ||\r\n            (subHtml && subHtml.clientHeight) ||\r\n            0;\r\n        var thumbContainer = this.outer.find('.lg-thumb-outer').get();\r\n        var thumbHeight = thumbContainer ? thumbContainer.clientHeight : 0;\r\n        var bottom = thumbHeight + captionHeight;\r\n        return {\r\n            top: top,\r\n            bottom: bottom,\r\n        };\r\n    };\r\n    LightGallery.prototype.setMediaContainerPosition = function (top, bottom) {\r\n        if (top === void 0) { top = 0; }\r\n        if (bottom === void 0) { bottom = 0; }\r\n        this.$content.css('top', top + 'px').css('bottom', bottom + 'px');\r\n    };\r\n    LightGallery.prototype.hideBars = function () {\r\n        var _this = this;\r\n        // Hide controllers if mouse doesn't move for some period\r\n        setTimeout(function () {\r\n            _this.outer.removeClass('lg-hide-items');\r\n            if (_this.settings.hideBarsDelay > 0) {\r\n                _this.outer.on('mousemove.lg click.lg touchstart.lg', function () {\r\n                    _this.outer.removeClass('lg-hide-items');\r\n                    clearTimeout(_this.hideBarTimeout);\r\n                    // Timeout will be cleared on each slide movement also\r\n                    _this.hideBarTimeout = setTimeout(function () {\r\n                        _this.outer.addClass('lg-hide-items');\r\n                    }, _this.settings.hideBarsDelay);\r\n                });\r\n                _this.outer.trigger('mousemove.lg');\r\n            }\r\n        }, this.settings.showBarsAfter);\r\n    };\r\n    LightGallery.prototype.initPictureFill = function ($img) {\r\n        if (this.settings.supportLegacyBrowser) {\r\n            try {\r\n                picturefill({\r\n                    elements: [$img.get()],\r\n                });\r\n            }\r\n            catch (e) {\r\n                console.warn('lightGallery :- If you want srcset or picture tag to be supported for older browser please include picturefil javascript library in your document.');\r\n            }\r\n        }\r\n    };\r\n    /**\r\n     *  @desc Create image counter\r\n     *  Ex: 1/10\r\n     */\r\n    LightGallery.prototype.counter = function () {\r\n        if (this.settings.counter) {\r\n            var counterHtml = \"<div class=\\\"lg-counter\\\" role=\\\"status\\\" aria-live=\\\"polite\\\">\\n                <span id=\\\"\" + this.getIdName('lg-counter-current') + \"\\\" class=\\\"lg-counter-current\\\">\" + (this.index + 1) + \" </span> /\\n                <span id=\\\"\" + this.getIdName('lg-counter-all') + \"\\\" class=\\\"lg-counter-all\\\">\" + this.galleryItems.length + \" </span></div>\";\r\n            this.outer.find(this.settings.appendCounterTo).append(counterHtml);\r\n        }\r\n    };\r\n    /**\r\n     *  @desc add sub-html into the slide\r\n     *  @param {Number} index - index of the slide\r\n     */\r\n    LightGallery.prototype.addHtml = function (index) {\r\n        var subHtml;\r\n        var subHtmlUrl;\r\n        if (this.galleryItems[index].subHtmlUrl) {\r\n            subHtmlUrl = this.galleryItems[index].subHtmlUrl;\r\n        }\r\n        else {\r\n            subHtml = this.galleryItems[index].subHtml;\r\n        }\r\n        if (!subHtmlUrl) {\r\n            if (subHtml) {\r\n                // get first letter of sub-html\r\n                // if first letter starts with . or # get the html form the jQuery object\r\n                var fL = subHtml.substring(0, 1);\r\n                if (fL === '.' || fL === '#') {\r\n                    if (this.settings.subHtmlSelectorRelative &&\r\n                        !this.settings.dynamic) {\r\n                        subHtml = $LG(this.items)\r\n                            .eq(index)\r\n                            .find(subHtml)\r\n                            .first()\r\n                            .html();\r\n                    }\r\n                    else {\r\n                        subHtml = $LG(subHtml).first().html();\r\n                    }\r\n                }\r\n            }\r\n            else {\r\n                subHtml = '';\r\n            }\r\n        }\r\n        if (this.settings.appendSubHtmlTo !== '.lg-item') {\r\n            if (subHtmlUrl) {\r\n                this.outer.find('.lg-sub-html').load(subHtmlUrl);\r\n            }\r\n            else {\r\n                this.outer.find('.lg-sub-html').html(subHtml);\r\n            }\r\n        }\r\n        else {\r\n            var currentSlide = $LG(this.getSlideItemId(index));\r\n            if (subHtmlUrl) {\r\n                currentSlide.load(subHtmlUrl);\r\n            }\r\n            else {\r\n                currentSlide.append(\"<div class=\\\"lg-sub-html\\\">\" + subHtml + \"</div>\");\r\n            }\r\n        }\r\n        // Add lg-empty-html class if title doesn't exist\r\n        if (typeof subHtml !== 'undefined' && subHtml !== null) {\r\n            if (subHtml === '') {\r\n                this.outer\r\n                    .find(this.settings.appendSubHtmlTo)\r\n                    .addClass('lg-empty-html');\r\n            }\r\n            else {\r\n                this.outer\r\n                    .find(this.settings.appendSubHtmlTo)\r\n                    .removeClass('lg-empty-html');\r\n            }\r\n        }\r\n        this.LGel.trigger(lGEvents.afterAppendSubHtml, {\r\n            index: index,\r\n        });\r\n    };\r\n    /**\r\n     *  @desc Preload slides\r\n     *  @param {Number} index - index of the slide\r\n     * @todo preload not working for the first slide, Also, should work for the first and last slide as well\r\n     */\r\n    LightGallery.prototype.preload = function (index) {\r\n        for (var i = 1; i <= this.settings.preload; i++) {\r\n            if (i >= this.galleryItems.length - index) {\r\n                break;\r\n            }\r\n            this.loadContent(index + i, false);\r\n        }\r\n        for (var j = 1; j <= this.settings.preload; j++) {\r\n            if (index - j < 0) {\r\n                break;\r\n            }\r\n            this.loadContent(index - j, false);\r\n        }\r\n    };\r\n    LightGallery.prototype.getDummyImgStyles = function (imageSize) {\r\n        if (!imageSize)\r\n            return '';\r\n        return \"width:\" + imageSize.width + \"px;\\n                margin-left: -\" + imageSize.width / 2 + \"px;\\n                margin-top: -\" + imageSize.height / 2 + \"px;\\n                height:\" + imageSize.height + \"px\";\r\n    };\r\n    LightGallery.prototype.getVideoContStyle = function (imageSize) {\r\n        if (!imageSize)\r\n            return '';\r\n        return \"width:\" + imageSize.width + \"px;\\n                height:\" + imageSize.height + \"px\";\r\n    };\r\n    LightGallery.prototype.getDummyImageContent = function ($currentSlide, index, alt) {\r\n        var $currentItem;\r\n        if (!this.settings.dynamic) {\r\n            $currentItem = $LG(this.items).eq(index);\r\n        }\r\n        if ($currentItem) {\r\n            var _dummyImgSrc = void 0;\r\n            if (!this.settings.exThumbImage) {\r\n                _dummyImgSrc = $currentItem.find('img').first().attr('src');\r\n            }\r\n            else {\r\n                _dummyImgSrc = $currentItem.attr(this.settings.exThumbImage);\r\n            }\r\n            if (!_dummyImgSrc)\r\n                return '';\r\n            var imgStyle = this.getDummyImgStyles(this.currentImageSize);\r\n            var dummyImgContent = \"<img \" + alt + \" style=\\\"\" + imgStyle + \"\\\" class=\\\"lg-dummy-img\\\" src=\\\"\" + _dummyImgSrc + \"\\\" />\";\r\n            $currentSlide.addClass('lg-first-slide');\r\n            this.outer.addClass('lg-first-slide-loading');\r\n            return dummyImgContent;\r\n        }\r\n        return '';\r\n    };\r\n    LightGallery.prototype.setImgMarkup = function (src, $currentSlide, index) {\r\n        var currentGalleryItem = this.galleryItems[index];\r\n        var alt = currentGalleryItem.alt, srcset = currentGalleryItem.srcset, sizes = currentGalleryItem.sizes, sources = currentGalleryItem.sources;\r\n        // Use the thumbnail as dummy image which will be resized to actual image size and\r\n        // displayed on top of actual image\r\n        var imgContent = '';\r\n        var altAttr = alt ? 'alt=\"' + alt + '\"' : '';\r\n        if (this.isFirstSlideWithZoomAnimation()) {\r\n            imgContent = this.getDummyImageContent($currentSlide, index, altAttr);\r\n        }\r\n        else {\r\n            imgContent = utils.getImgMarkup(index, src, altAttr, srcset, sizes, sources);\r\n        }\r\n        var imgMarkup = \"<picture class=\\\"lg-img-wrap\\\"> \" + imgContent + \"</picture>\";\r\n        $currentSlide.prepend(imgMarkup);\r\n    };\r\n    LightGallery.prototype.onSlideObjectLoad = function ($slide, isHTML5VideoWithoutPoster, onLoad, onError) {\r\n        var mediaObject = $slide.find('.lg-object').first();\r\n        if (utils.isImageLoaded(mediaObject.get()) ||\r\n            isHTML5VideoWithoutPoster) {\r\n            onLoad();\r\n        }\r\n        else {\r\n            mediaObject.on('load.lg error.lg', function () {\r\n                onLoad && onLoad();\r\n            });\r\n            mediaObject.on('error.lg', function () {\r\n                onError && onError();\r\n            });\r\n        }\r\n    };\r\n    /**\r\n     *\r\n     * @param $el Current slide item\r\n     * @param index\r\n     * @param delay Delay is 0 except first time\r\n     * @param speed Speed is same as delay, except it is 0 if gallery is opened via hash plugin\r\n     * @param isFirstSlide\r\n     */\r\n    LightGallery.prototype.onLgObjectLoad = function (currentSlide, index, delay, speed, isFirstSlide, isHTML5VideoWithoutPoster) {\r\n        var _this = this;\r\n        this.onSlideObjectLoad(currentSlide, isHTML5VideoWithoutPoster, function () {\r\n            _this.triggerSlideItemLoad(currentSlide, index, delay, speed, isFirstSlide);\r\n        }, function () {\r\n            currentSlide.addClass('lg-complete lg-complete_');\r\n            currentSlide.html('<span class=\"lg-error-msg\">' +\r\n                _this.settings.strings['mediaLoadingFailed'] +\r\n                '</span>');\r\n        });\r\n    };\r\n    LightGallery.prototype.triggerSlideItemLoad = function ($currentSlide, index, delay, speed, isFirstSlide) {\r\n        var _this = this;\r\n        var currentGalleryItem = this.galleryItems[index];\r\n        // Adding delay for video slides without poster for better performance and user experience\r\n        // Videos should start playing once once the gallery is completely loaded\r\n        var _speed = isFirstSlide &&\r\n            this.getSlideType(currentGalleryItem) === 'video' &&\r\n            !currentGalleryItem.poster\r\n            ? speed\r\n            : 0;\r\n        setTimeout(function () {\r\n            $currentSlide.addClass('lg-complete lg-complete_');\r\n            _this.LGel.trigger(lGEvents.slideItemLoad, {\r\n                index: index,\r\n                delay: delay || 0,\r\n                isFirstSlide: isFirstSlide,\r\n            });\r\n        }, _speed);\r\n    };\r\n    LightGallery.prototype.isFirstSlideWithZoomAnimation = function () {\r\n        return !!(!this.lGalleryOn &&\r\n            this.zoomFromOrigin &&\r\n            this.currentImageSize);\r\n    };\r\n    // Add video slideInfo\r\n    LightGallery.prototype.addSlideVideoInfo = function (items) {\r\n        var _this = this;\r\n        items.forEach(function (element, index) {\r\n            element.__slideVideoInfo = utils.isVideo(element.src, !!element.video, index);\r\n            if (element.__slideVideoInfo &&\r\n                _this.settings.loadYouTubePoster &&\r\n                !element.poster &&\r\n                element.__slideVideoInfo.youtube) {\r\n                element.poster = \"//img.youtube.com/vi/\" + element.__slideVideoInfo.youtube[1] + \"/maxresdefault.jpg\";\r\n            }\r\n        });\r\n    };\r\n    /**\r\n     *  Load slide content into slide.\r\n     *  This is used to load content into slides that is not visible too\r\n     *  @param {Number} index - index of the slide.\r\n     *  @param {Boolean} rec - if true call loadcontent() function again.\r\n     */\r\n    LightGallery.prototype.loadContent = function (index, rec) {\r\n        var _this = this;\r\n        var currentGalleryItem = this.galleryItems[index];\r\n        var $currentSlide = $LG(this.getSlideItemId(index));\r\n        var poster = currentGalleryItem.poster, srcset = currentGalleryItem.srcset, sizes = currentGalleryItem.sizes, sources = currentGalleryItem.sources;\r\n        var src = currentGalleryItem.src;\r\n        var video = currentGalleryItem.video;\r\n        var _html5Video = video && typeof video === 'string' ? JSON.parse(video) : video;\r\n        if (currentGalleryItem.responsive) {\r\n            var srcDyItms = currentGalleryItem.responsive.split(',');\r\n            src = utils.getResponsiveSrc(srcDyItms) || src;\r\n        }\r\n        var videoInfo = currentGalleryItem.__slideVideoInfo;\r\n        var lgVideoStyle = '';\r\n        var iframe = !!currentGalleryItem.iframe;\r\n        var isFirstSlide = !this.lGalleryOn;\r\n        // delay for adding complete class. it is 0 except first time.\r\n        var delay = 0;\r\n        if (isFirstSlide) {\r\n            if (this.zoomFromOrigin && this.currentImageSize) {\r\n                delay = this.settings.startAnimationDuration + 10;\r\n            }\r\n            else {\r\n                delay = this.settings.backdropDuration + 10;\r\n            }\r\n        }\r\n        if (!$currentSlide.hasClass('lg-loaded')) {\r\n            if (videoInfo) {\r\n                var _a = this.mediaContainerPosition, top_2 = _a.top, bottom = _a.bottom;\r\n                var videoSize = utils.getSize(this.items[index], this.outer, top_2 + bottom, videoInfo && this.settings.videoMaxSize);\r\n                lgVideoStyle = this.getVideoContStyle(videoSize);\r\n            }\r\n            if (iframe) {\r\n                var markup = utils.getIframeMarkup(this.settings.iframeWidth, this.settings.iframeHeight, this.settings.iframeMaxWidth, this.settings.iframeMaxHeight, src, currentGalleryItem.iframeTitle);\r\n                $currentSlide.prepend(markup);\r\n            }\r\n            else if (poster) {\r\n                var dummyImg = '';\r\n                var hasStartAnimation = isFirstSlide &&\r\n                    this.zoomFromOrigin &&\r\n                    this.currentImageSize;\r\n                if (hasStartAnimation) {\r\n                    dummyImg = this.getDummyImageContent($currentSlide, index, '');\r\n                }\r\n                var markup = utils.getVideoPosterMarkup(poster, dummyImg || '', lgVideoStyle, this.settings.strings['playVideo'], videoInfo);\r\n                $currentSlide.prepend(markup);\r\n            }\r\n            else if (videoInfo) {\r\n                var markup = \"<div class=\\\"lg-video-cont \\\" style=\\\"\" + lgVideoStyle + \"\\\"></div>\";\r\n                $currentSlide.prepend(markup);\r\n            }\r\n            else {\r\n                this.setImgMarkup(src, $currentSlide, index);\r\n                if (srcset || sources) {\r\n                    var $img = $currentSlide.find('.lg-object');\r\n                    this.initPictureFill($img);\r\n                }\r\n            }\r\n            if (poster || videoInfo) {\r\n                this.LGel.trigger(lGEvents.hasVideo, {\r\n                    index: index,\r\n                    src: src,\r\n                    html5Video: _html5Video,\r\n                    hasPoster: !!poster,\r\n                });\r\n            }\r\n            this.LGel.trigger(lGEvents.afterAppendSlide, { index: index });\r\n            if (this.lGalleryOn &&\r\n                this.settings.appendSubHtmlTo === '.lg-item') {\r\n                this.addHtml(index);\r\n            }\r\n        }\r\n        // For first time add some delay for displaying the start animation.\r\n        var _speed = 0;\r\n        // Do not change the delay value because it is required for zoom plugin.\r\n        // If gallery opened from direct url (hash) speed value should be 0\r\n        if (delay && !$LG(document.body).hasClass('lg-from-hash')) {\r\n            _speed = delay;\r\n        }\r\n        // Only for first slide and zoomFromOrigin is enabled\r\n        if (this.isFirstSlideWithZoomAnimation()) {\r\n            setTimeout(function () {\r\n                $currentSlide\r\n                    .removeClass('lg-start-end-progress lg-start-progress')\r\n                    .removeAttr('style');\r\n            }, this.settings.startAnimationDuration + 100);\r\n            if (!$currentSlide.hasClass('lg-loaded')) {\r\n                setTimeout(function () {\r\n                    if (_this.getSlideType(currentGalleryItem) === 'image') {\r\n                        var alt = currentGalleryItem.alt;\r\n                        var altAttr = alt ? 'alt=\"' + alt + '\"' : '';\r\n                        $currentSlide\r\n                            .find('.lg-img-wrap')\r\n                            .append(utils.getImgMarkup(index, src, altAttr, srcset, sizes, currentGalleryItem.sources));\r\n                        if (srcset || sources) {\r\n                            var $img = $currentSlide.find('.lg-object');\r\n                            _this.initPictureFill($img);\r\n                        }\r\n                    }\r\n                    if (_this.getSlideType(currentGalleryItem) === 'image' ||\r\n                        (_this.getSlideType(currentGalleryItem) === 'video' &&\r\n                            poster)) {\r\n                        _this.onLgObjectLoad($currentSlide, index, delay, _speed, true, false);\r\n                        // load remaining slides once the slide is completely loaded\r\n                        _this.onSlideObjectLoad($currentSlide, !!(videoInfo && videoInfo.html5 && !poster), function () {\r\n                            _this.loadContentOnFirstSlideLoad(index, $currentSlide, _speed);\r\n                        }, function () {\r\n                            _this.loadContentOnFirstSlideLoad(index, $currentSlide, _speed);\r\n                        });\r\n                    }\r\n                }, this.settings.startAnimationDuration + 100);\r\n            }\r\n        }\r\n        // SLide content has been added to dom\r\n        $currentSlide.addClass('lg-loaded');\r\n        if (!this.isFirstSlideWithZoomAnimation() ||\r\n            (this.getSlideType(currentGalleryItem) === 'video' && !poster)) {\r\n            this.onLgObjectLoad($currentSlide, index, delay, _speed, isFirstSlide, !!(videoInfo && videoInfo.html5 && !poster));\r\n        }\r\n        // When gallery is opened once content is loaded (second time) need to add lg-complete class for css styling\r\n        if ((!this.zoomFromOrigin || !this.currentImageSize) &&\r\n            $currentSlide.hasClass('lg-complete_') &&\r\n            !this.lGalleryOn) {\r\n            setTimeout(function () {\r\n                $currentSlide.addClass('lg-complete');\r\n            }, this.settings.backdropDuration);\r\n        }\r\n        // Content loaded\r\n        // Need to set lGalleryOn before calling preload function\r\n        this.lGalleryOn = true;\r\n        if (rec === true) {\r\n            if (!$currentSlide.hasClass('lg-complete_')) {\r\n                $currentSlide\r\n                    .find('.lg-object')\r\n                    .first()\r\n                    .on('load.lg error.lg', function () {\r\n                    _this.preload(index);\r\n                });\r\n            }\r\n            else {\r\n                this.preload(index);\r\n            }\r\n        }\r\n    };\r\n    /**\r\n     * @desc Remove dummy image content and load next slides\r\n     * Called only for the first time if zoomFromOrigin animation is enabled\r\n     * @param index\r\n     * @param $currentSlide\r\n     * @param speed\r\n     */\r\n    LightGallery.prototype.loadContentOnFirstSlideLoad = function (index, $currentSlide, speed) {\r\n        var _this = this;\r\n        setTimeout(function () {\r\n            $currentSlide.find('.lg-dummy-img').remove();\r\n            $currentSlide.removeClass('lg-first-slide');\r\n            _this.outer.removeClass('lg-first-slide-loading');\r\n            _this.isDummyImageRemoved = true;\r\n            _this.preload(index);\r\n        }, speed + 300);\r\n    };\r\n    LightGallery.prototype.getItemsToBeInsertedToDom = function (index, prevIndex, numberOfItems) {\r\n        var _this = this;\r\n        if (numberOfItems === void 0) { numberOfItems = 0; }\r\n        var itemsToBeInsertedToDom = [];\r\n        // Minimum 2 items should be there\r\n        var possibleNumberOfItems = Math.max(numberOfItems, 3);\r\n        possibleNumberOfItems = Math.min(possibleNumberOfItems, this.galleryItems.length);\r\n        var prevIndexItem = \"lg-item-\" + this.lgId + \"-\" + prevIndex;\r\n        if (this.galleryItems.length <= 3) {\r\n            this.galleryItems.forEach(function (_element, index) {\r\n                itemsToBeInsertedToDom.push(\"lg-item-\" + _this.lgId + \"-\" + index);\r\n            });\r\n            return itemsToBeInsertedToDom;\r\n        }\r\n        if (index < (this.galleryItems.length - 1) / 2) {\r\n            for (var idx = index; idx > index - possibleNumberOfItems / 2 && idx >= 0; idx--) {\r\n                itemsToBeInsertedToDom.push(\"lg-item-\" + this.lgId + \"-\" + idx);\r\n            }\r\n            var numberOfExistingItems = itemsToBeInsertedToDom.length;\r\n            for (var idx = 0; idx < possibleNumberOfItems - numberOfExistingItems; idx++) {\r\n                itemsToBeInsertedToDom.push(\"lg-item-\" + this.lgId + \"-\" + (index + idx + 1));\r\n            }\r\n        }\r\n        else {\r\n            for (var idx = index; idx <= this.galleryItems.length - 1 &&\r\n                idx < index + possibleNumberOfItems / 2; idx++) {\r\n                itemsToBeInsertedToDom.push(\"lg-item-\" + this.lgId + \"-\" + idx);\r\n            }\r\n            var numberOfExistingItems = itemsToBeInsertedToDom.length;\r\n            for (var idx = 0; idx < possibleNumberOfItems - numberOfExistingItems; idx++) {\r\n                itemsToBeInsertedToDom.push(\"lg-item-\" + this.lgId + \"-\" + (index - idx - 1));\r\n            }\r\n        }\r\n        if (this.settings.loop) {\r\n            if (index === this.galleryItems.length - 1) {\r\n                itemsToBeInsertedToDom.push(\"lg-item-\" + this.lgId + \"-\" + 0);\r\n            }\r\n            else if (index === 0) {\r\n                itemsToBeInsertedToDom.push(\"lg-item-\" + this.lgId + \"-\" + (this.galleryItems.length - 1));\r\n            }\r\n        }\r\n        if (itemsToBeInsertedToDom.indexOf(prevIndexItem) === -1) {\r\n            itemsToBeInsertedToDom.push(\"lg-item-\" + this.lgId + \"-\" + prevIndex);\r\n        }\r\n        return itemsToBeInsertedToDom;\r\n    };\r\n    LightGallery.prototype.organizeSlideItems = function (index, prevIndex) {\r\n        var _this = this;\r\n        var itemsToBeInsertedToDom = this.getItemsToBeInsertedToDom(index, prevIndex, this.settings.numberOfSlideItemsInDom);\r\n        itemsToBeInsertedToDom.forEach(function (item) {\r\n            if (_this.currentItemsInDom.indexOf(item) === -1) {\r\n                _this.$inner.append(\"<div id=\\\"\" + item + \"\\\" class=\\\"lg-item\\\"></div>\");\r\n            }\r\n        });\r\n        this.currentItemsInDom.forEach(function (item) {\r\n            if (itemsToBeInsertedToDom.indexOf(item) === -1) {\r\n                $LG(\"#\" + item).remove();\r\n            }\r\n        });\r\n        return itemsToBeInsertedToDom;\r\n    };\r\n    /**\r\n     * Get previous index of the slide\r\n     */\r\n    LightGallery.prototype.getPreviousSlideIndex = function () {\r\n        var prevIndex = 0;\r\n        try {\r\n            var currentItemId = this.outer\r\n                .find('.lg-current')\r\n                .first()\r\n                .attr('id');\r\n            prevIndex = parseInt(currentItemId.split('-')[3]) || 0;\r\n        }\r\n        catch (error) {\r\n            prevIndex = 0;\r\n        }\r\n        return prevIndex;\r\n    };\r\n    LightGallery.prototype.setDownloadValue = function (index) {\r\n        if (this.settings.download) {\r\n            var currentGalleryItem = this.galleryItems[index];\r\n            var hideDownloadBtn = currentGalleryItem.downloadUrl === false ||\r\n                currentGalleryItem.downloadUrl === 'false';\r\n            if (hideDownloadBtn) {\r\n                this.outer.addClass('lg-hide-download');\r\n            }\r\n            else {\r\n                var $download = this.getElementById('lg-download');\r\n                this.outer.removeClass('lg-hide-download');\r\n                $download.attr('href', currentGalleryItem.downloadUrl ||\r\n                    currentGalleryItem.src);\r\n                if (currentGalleryItem.download) {\r\n                    $download.attr('download', currentGalleryItem.download);\r\n                }\r\n            }\r\n        }\r\n    };\r\n    LightGallery.prototype.makeSlideAnimation = function (direction, currentSlideItem, previousSlideItem) {\r\n        var _this = this;\r\n        if (this.lGalleryOn) {\r\n            previousSlideItem.addClass('lg-slide-progress');\r\n        }\r\n        setTimeout(function () {\r\n            // remove all transitions\r\n            _this.outer.addClass('lg-no-trans');\r\n            _this.outer\r\n                .find('.lg-item')\r\n                .removeClass('lg-prev-slide lg-next-slide');\r\n            if (direction === 'prev') {\r\n                //prevslide\r\n                currentSlideItem.addClass('lg-prev-slide');\r\n                previousSlideItem.addClass('lg-next-slide');\r\n            }\r\n            else {\r\n                // next slide\r\n                currentSlideItem.addClass('lg-next-slide');\r\n                previousSlideItem.addClass('lg-prev-slide');\r\n            }\r\n            // give 50 ms for browser to add/remove class\r\n            setTimeout(function () {\r\n                _this.outer.find('.lg-item').removeClass('lg-current');\r\n                currentSlideItem.addClass('lg-current');\r\n                // reset all transitions\r\n                _this.outer.removeClass('lg-no-trans');\r\n            }, 50);\r\n        }, this.lGalleryOn ? this.settings.slideDelay : 0);\r\n    };\r\n    /**\r\n     * Goto a specific slide.\r\n     * @param {Number} index - index of the slide\r\n     * @param {Boolean} fromTouch - true if slide function called via touch event or mouse drag\r\n     * @param {Boolean} fromThumb - true if slide function called via thumbnail click\r\n     * @param {String} direction - Direction of the slide(next/prev)\r\n     * @category lGPublicMethods\r\n     * @example\r\n     *  const plugin = lightGallery();\r\n     *  // to go to 3rd slide\r\n     *  plugin.slide(2);\r\n     *\r\n     */\r\n    LightGallery.prototype.slide = function (index, fromTouch, fromThumb, direction) {\r\n        var _this = this;\r\n        var prevIndex = this.getPreviousSlideIndex();\r\n        this.currentItemsInDom = this.organizeSlideItems(index, prevIndex);\r\n        // Prevent multiple call, Required for hsh plugin\r\n        if (this.lGalleryOn && prevIndex === index) {\r\n            return;\r\n        }\r\n        var numberOfGalleryItems = this.galleryItems.length;\r\n        if (!this.lgBusy) {\r\n            if (this.settings.counter) {\r\n                this.updateCurrentCounter(index);\r\n            }\r\n            var currentSlideItem = this.getSlideItem(index);\r\n            var previousSlideItem_1 = this.getSlideItem(prevIndex);\r\n            var currentGalleryItem = this.galleryItems[index];\r\n            var videoInfo = currentGalleryItem.__slideVideoInfo;\r\n            this.outer.attr('data-lg-slide-type', this.getSlideType(currentGalleryItem));\r\n            this.setDownloadValue(index);\r\n            if (videoInfo) {\r\n                var _a = this.mediaContainerPosition, top_3 = _a.top, bottom = _a.bottom;\r\n                var videoSize = utils.getSize(this.items[index], this.outer, top_3 + bottom, videoInfo && this.settings.videoMaxSize);\r\n                this.resizeVideoSlide(index, videoSize);\r\n            }\r\n            this.LGel.trigger(lGEvents.beforeSlide, {\r\n                prevIndex: prevIndex,\r\n                index: index,\r\n                fromTouch: !!fromTouch,\r\n                fromThumb: !!fromThumb,\r\n            });\r\n            this.lgBusy = true;\r\n            clearTimeout(this.hideBarTimeout);\r\n            this.arrowDisable(index);\r\n            if (!direction) {\r\n                if (index < prevIndex) {\r\n                    direction = 'prev';\r\n                }\r\n                else if (index > prevIndex) {\r\n                    direction = 'next';\r\n                }\r\n            }\r\n            if (!fromTouch) {\r\n                this.makeSlideAnimation(direction, currentSlideItem, previousSlideItem_1);\r\n            }\r\n            else {\r\n                this.outer\r\n                    .find('.lg-item')\r\n                    .removeClass('lg-prev-slide lg-current lg-next-slide');\r\n                var touchPrev = void 0;\r\n                var touchNext = void 0;\r\n                if (numberOfGalleryItems > 2) {\r\n                    touchPrev = index - 1;\r\n                    touchNext = index + 1;\r\n                    if (index === 0 && prevIndex === numberOfGalleryItems - 1) {\r\n                        // next slide\r\n                        touchNext = 0;\r\n                        touchPrev = numberOfGalleryItems - 1;\r\n                    }\r\n                    else if (index === numberOfGalleryItems - 1 &&\r\n                        prevIndex === 0) {\r\n                        // prev slide\r\n                        touchNext = 0;\r\n                        touchPrev = numberOfGalleryItems - 1;\r\n                    }\r\n                }\r\n                else {\r\n                    touchPrev = 0;\r\n                    touchNext = 1;\r\n                }\r\n                if (direction === 'prev') {\r\n                    this.getSlideItem(touchNext).addClass('lg-next-slide');\r\n                }\r\n                else {\r\n                    this.getSlideItem(touchPrev).addClass('lg-prev-slide');\r\n                }\r\n                currentSlideItem.addClass('lg-current');\r\n            }\r\n            // Do not put load content in set timeout as it needs to load immediately when the gallery is opened\r\n            if (!this.lGalleryOn) {\r\n                this.loadContent(index, true);\r\n            }\r\n            else {\r\n                setTimeout(function () {\r\n                    _this.loadContent(index, true);\r\n                    // Add title if this.settings.appendSubHtmlTo === lg-sub-html\r\n                    if (_this.settings.appendSubHtmlTo !== '.lg-item') {\r\n                        _this.addHtml(index);\r\n                    }\r\n                }, this.settings.speed + 50 + (fromTouch ? 0 : this.settings.slideDelay));\r\n            }\r\n            setTimeout(function () {\r\n                _this.lgBusy = false;\r\n                previousSlideItem_1.removeClass('lg-slide-progress');\r\n                _this.LGel.trigger(lGEvents.afterSlide, {\r\n                    prevIndex: prevIndex,\r\n                    index: index,\r\n                    fromTouch: fromTouch,\r\n                    fromThumb: fromThumb,\r\n                });\r\n            }, (this.lGalleryOn ? this.settings.speed + 100 : 100) + (fromTouch ? 0 : this.settings.slideDelay));\r\n        }\r\n        this.index = index;\r\n    };\r\n    LightGallery.prototype.updateCurrentCounter = function (index) {\r\n        this.getElementById('lg-counter-current').html(index + 1 + '');\r\n    };\r\n    LightGallery.prototype.updateCounterTotal = function () {\r\n        this.getElementById('lg-counter-all').html(this.galleryItems.length + '');\r\n    };\r\n    LightGallery.prototype.getSlideType = function (item) {\r\n        if (item.__slideVideoInfo) {\r\n            return 'video';\r\n        }\r\n        else if (item.iframe) {\r\n            return 'iframe';\r\n        }\r\n        else {\r\n            return 'image';\r\n        }\r\n    };\r\n    LightGallery.prototype.touchMove = function (startCoords, endCoords, e) {\r\n        var distanceX = endCoords.pageX - startCoords.pageX;\r\n        var distanceY = endCoords.pageY - startCoords.pageY;\r\n        var allowSwipe = false;\r\n        if (this.swipeDirection) {\r\n            allowSwipe = true;\r\n        }\r\n        else {\r\n            if (Math.abs(distanceX) > 15) {\r\n                this.swipeDirection = 'horizontal';\r\n                allowSwipe = true;\r\n            }\r\n            else if (Math.abs(distanceY) > 15) {\r\n                this.swipeDirection = 'vertical';\r\n                allowSwipe = true;\r\n            }\r\n        }\r\n        if (!allowSwipe) {\r\n            return;\r\n        }\r\n        var $currentSlide = this.getSlideItem(this.index);\r\n        if (this.swipeDirection === 'horizontal') {\r\n            e === null || e === void 0 ? void 0 : e.preventDefault();\r\n            // reset opacity and transition duration\r\n            this.outer.addClass('lg-dragging');\r\n            // move current slide\r\n            this.setTranslate($currentSlide, distanceX, 0);\r\n            // move next and prev slide with current slide\r\n            var width = $currentSlide.get().offsetWidth;\r\n            var slideWidthAmount = (width * 15) / 100;\r\n            var gutter = slideWidthAmount - Math.abs((distanceX * 10) / 100);\r\n            this.setTranslate(this.outer.find('.lg-prev-slide').first(), -width + distanceX - gutter, 0);\r\n            this.setTranslate(this.outer.find('.lg-next-slide').first(), width + distanceX + gutter, 0);\r\n        }\r\n        else if (this.swipeDirection === 'vertical') {\r\n            if (this.settings.swipeToClose) {\r\n                e === null || e === void 0 ? void 0 : e.preventDefault();\r\n                this.$container.addClass('lg-dragging-vertical');\r\n                var opacity = 1 - Math.abs(distanceY) / window.innerHeight;\r\n                this.$backdrop.css('opacity', opacity);\r\n                var scale = 1 - Math.abs(distanceY) / (window.innerWidth * 2);\r\n                this.setTranslate($currentSlide, 0, distanceY, scale, scale);\r\n                if (Math.abs(distanceY) > 100) {\r\n                    this.outer\r\n                        .addClass('lg-hide-items')\r\n                        .removeClass('lg-components-open');\r\n                }\r\n            }\r\n        }\r\n    };\r\n    LightGallery.prototype.touchEnd = function (endCoords, startCoords, event) {\r\n        var _this = this;\r\n        var distance;\r\n        // keep slide animation for any mode while dragg/swipe\r\n        if (this.settings.mode !== 'lg-slide') {\r\n            this.outer.addClass('lg-slide');\r\n        }\r\n        // set transition duration\r\n        setTimeout(function () {\r\n            _this.$container.removeClass('lg-dragging-vertical');\r\n            _this.outer\r\n                .removeClass('lg-dragging lg-hide-items')\r\n                .addClass('lg-components-open');\r\n            var triggerClick = true;\r\n            if (_this.swipeDirection === 'horizontal') {\r\n                distance = endCoords.pageX - startCoords.pageX;\r\n                var distanceAbs = Math.abs(endCoords.pageX - startCoords.pageX);\r\n                if (distance < 0 &&\r\n                    distanceAbs > _this.settings.swipeThreshold) {\r\n                    _this.goToNextSlide(true);\r\n                    triggerClick = false;\r\n                }\r\n                else if (distance > 0 &&\r\n                    distanceAbs > _this.settings.swipeThreshold) {\r\n                    _this.goToPrevSlide(true);\r\n                    triggerClick = false;\r\n                }\r\n            }\r\n            else if (_this.swipeDirection === 'vertical') {\r\n                distance = Math.abs(endCoords.pageY - startCoords.pageY);\r\n                if (_this.settings.closable &&\r\n                    _this.settings.swipeToClose &&\r\n                    distance > 100) {\r\n                    _this.closeGallery();\r\n                    return;\r\n                }\r\n                else {\r\n                    _this.$backdrop.css('opacity', 1);\r\n                }\r\n            }\r\n            _this.outer.find('.lg-item').removeAttr('style');\r\n            if (triggerClick &&\r\n                Math.abs(endCoords.pageX - startCoords.pageX) < 5) {\r\n                // Trigger click if distance is less than 5 pix\r\n                var target = $LG(event.target);\r\n                if (_this.isPosterElement(target)) {\r\n                    _this.LGel.trigger(lGEvents.posterClick);\r\n                }\r\n            }\r\n            _this.swipeDirection = undefined;\r\n        });\r\n        // remove slide class once drag/swipe is completed if mode is not slide\r\n        setTimeout(function () {\r\n            if (!_this.outer.hasClass('lg-dragging') &&\r\n                _this.settings.mode !== 'lg-slide') {\r\n                _this.outer.removeClass('lg-slide');\r\n            }\r\n        }, this.settings.speed + 100);\r\n    };\r\n    LightGallery.prototype.enableSwipe = function () {\r\n        var _this = this;\r\n        var startCoords = {};\r\n        var endCoords = {};\r\n        var isMoved = false;\r\n        var isSwiping = false;\r\n        if (this.settings.enableSwipe) {\r\n            this.$inner.on('touchstart.lg', function (e) {\r\n                _this.dragOrSwipeEnabled = true;\r\n                var $item = _this.getSlideItem(_this.index);\r\n                if (($LG(e.target).hasClass('lg-item') ||\r\n                    $item.get().contains(e.target)) &&\r\n                    !_this.outer.hasClass('lg-zoomed') &&\r\n                    !_this.lgBusy &&\r\n                    e.touches.length === 1) {\r\n                    isSwiping = true;\r\n                    _this.touchAction = 'swipe';\r\n                    _this.manageSwipeClass();\r\n                    startCoords = {\r\n                        pageX: e.touches[0].pageX,\r\n                        pageY: e.touches[0].pageY,\r\n                    };\r\n                }\r\n            });\r\n            this.$inner.on('touchmove.lg', function (e) {\r\n                if (isSwiping &&\r\n                    _this.touchAction === 'swipe' &&\r\n                    e.touches.length === 1) {\r\n                    endCoords = {\r\n                        pageX: e.touches[0].pageX,\r\n                        pageY: e.touches[0].pageY,\r\n                    };\r\n                    _this.touchMove(startCoords, endCoords, e);\r\n                    isMoved = true;\r\n                }\r\n            });\r\n            this.$inner.on('touchend.lg', function (event) {\r\n                if (_this.touchAction === 'swipe') {\r\n                    if (isMoved) {\r\n                        isMoved = false;\r\n                        _this.touchEnd(endCoords, startCoords, event);\r\n                    }\r\n                    else if (isSwiping) {\r\n                        var target = $LG(event.target);\r\n                        if (_this.isPosterElement(target)) {\r\n                            _this.LGel.trigger(lGEvents.posterClick);\r\n                        }\r\n                    }\r\n                    _this.touchAction = undefined;\r\n                    isSwiping = false;\r\n                }\r\n            });\r\n        }\r\n    };\r\n    LightGallery.prototype.enableDrag = function () {\r\n        var _this = this;\r\n        var startCoords = {};\r\n        var endCoords = {};\r\n        var isDraging = false;\r\n        var isMoved = false;\r\n        if (this.settings.enableDrag) {\r\n            this.outer.on('mousedown.lg', function (e) {\r\n                _this.dragOrSwipeEnabled = true;\r\n                var $item = _this.getSlideItem(_this.index);\r\n                if ($LG(e.target).hasClass('lg-item') ||\r\n                    $item.get().contains(e.target)) {\r\n                    if (!_this.outer.hasClass('lg-zoomed') && !_this.lgBusy) {\r\n                        e.preventDefault();\r\n                        if (!_this.lgBusy) {\r\n                            _this.manageSwipeClass();\r\n                            startCoords = {\r\n                                pageX: e.pageX,\r\n                                pageY: e.pageY,\r\n                            };\r\n                            isDraging = true;\r\n                            // ** Fix for webkit cursor issue https://code.google.com/p/chromium/issues/detail?id=26723\r\n                            _this.outer.get().scrollLeft += 1;\r\n                            _this.outer.get().scrollLeft -= 1;\r\n                            // *\r\n                            _this.outer\r\n                                .removeClass('lg-grab')\r\n                                .addClass('lg-grabbing');\r\n                            _this.LGel.trigger(lGEvents.dragStart);\r\n                        }\r\n                    }\r\n                }\r\n            });\r\n            $LG(window).on(\"mousemove.lg.global\" + this.lgId, function (e) {\r\n                if (isDraging && _this.lgOpened) {\r\n                    isMoved = true;\r\n                    endCoords = {\r\n                        pageX: e.pageX,\r\n                        pageY: e.pageY,\r\n                    };\r\n                    _this.touchMove(startCoords, endCoords);\r\n                    _this.LGel.trigger(lGEvents.dragMove);\r\n                }\r\n            });\r\n            $LG(window).on(\"mouseup.lg.global\" + this.lgId, function (event) {\r\n                if (!_this.lgOpened) {\r\n                    return;\r\n                }\r\n                var target = $LG(event.target);\r\n                if (isMoved) {\r\n                    isMoved = false;\r\n                    _this.touchEnd(endCoords, startCoords, event);\r\n                    _this.LGel.trigger(lGEvents.dragEnd);\r\n                }\r\n                else if (_this.isPosterElement(target)) {\r\n                    _this.LGel.trigger(lGEvents.posterClick);\r\n                }\r\n                // Prevent execution on click\r\n                if (isDraging) {\r\n                    isDraging = false;\r\n                    _this.outer.removeClass('lg-grabbing').addClass('lg-grab');\r\n                }\r\n            });\r\n        }\r\n    };\r\n    LightGallery.prototype.triggerPosterClick = function () {\r\n        var _this = this;\r\n        this.$inner.on('click.lg', function (event) {\r\n            if (!_this.dragOrSwipeEnabled &&\r\n                _this.isPosterElement($LG(event.target))) {\r\n                _this.LGel.trigger(lGEvents.posterClick);\r\n            }\r\n        });\r\n    };\r\n    LightGallery.prototype.manageSwipeClass = function () {\r\n        var _touchNext = this.index + 1;\r\n        var _touchPrev = this.index - 1;\r\n        if (this.settings.loop && this.galleryItems.length > 2) {\r\n            if (this.index === 0) {\r\n                _touchPrev = this.galleryItems.length - 1;\r\n            }\r\n            else if (this.index === this.galleryItems.length - 1) {\r\n                _touchNext = 0;\r\n            }\r\n        }\r\n        this.outer.find('.lg-item').removeClass('lg-next-slide lg-prev-slide');\r\n        if (_touchPrev > -1) {\r\n            this.getSlideItem(_touchPrev).addClass('lg-prev-slide');\r\n        }\r\n        this.getSlideItem(_touchNext).addClass('lg-next-slide');\r\n    };\r\n    /**\r\n     * Go to next slide\r\n     * @param {Boolean} fromTouch - true if slide function called via touch event\r\n     * @category lGPublicMethods\r\n     * @example\r\n     *  const plugin = lightGallery();\r\n     *  plugin.goToNextSlide();\r\n     * @see <a href=\"/demos/methods/\">Demo</a>\r\n     */\r\n    LightGallery.prototype.goToNextSlide = function (fromTouch) {\r\n        var _this = this;\r\n        var _loop = this.settings.loop;\r\n        if (fromTouch && this.galleryItems.length < 3) {\r\n            _loop = false;\r\n        }\r\n        if (!this.lgBusy) {\r\n            if (this.index + 1 < this.galleryItems.length) {\r\n                this.index++;\r\n                this.LGel.trigger(lGEvents.beforeNextSlide, {\r\n                    index: this.index,\r\n                });\r\n                this.slide(this.index, !!fromTouch, false, 'next');\r\n            }\r\n            else {\r\n                if (_loop) {\r\n                    this.index = 0;\r\n                    this.LGel.trigger(lGEvents.beforeNextSlide, {\r\n                        index: this.index,\r\n                    });\r\n                    this.slide(this.index, !!fromTouch, false, 'next');\r\n                }\r\n                else if (this.settings.slideEndAnimation && !fromTouch) {\r\n                    this.outer.addClass('lg-right-end');\r\n                    setTimeout(function () {\r\n                        _this.outer.removeClass('lg-right-end');\r\n                    }, 400);\r\n                }\r\n            }\r\n        }\r\n    };\r\n    /**\r\n     * Go to previous slides\r\n     * @param {Boolean} fromTouch - true if slide function called via touch event\r\n     * @category lGPublicMethods\r\n     * @example\r\n     *  const plugin = lightGallery({});\r\n     *  plugin.goToPrevSlide();\r\n     * @see <a href=\"/demos/methods/\">Demo</a>\r\n     *\r\n     */\r\n    LightGallery.prototype.goToPrevSlide = function (fromTouch) {\r\n        var _this = this;\r\n        var _loop = this.settings.loop;\r\n        if (fromTouch && this.galleryItems.length < 3) {\r\n            _loop = false;\r\n        }\r\n        if (!this.lgBusy) {\r\n            if (this.index > 0) {\r\n                this.index--;\r\n                this.LGel.trigger(lGEvents.beforePrevSlide, {\r\n                    index: this.index,\r\n                    fromTouch: fromTouch,\r\n                });\r\n                this.slide(this.index, !!fromTouch, false, 'prev');\r\n            }\r\n            else {\r\n                if (_loop) {\r\n                    this.index = this.galleryItems.length - 1;\r\n                    this.LGel.trigger(lGEvents.beforePrevSlide, {\r\n                        index: this.index,\r\n                        fromTouch: fromTouch,\r\n                    });\r\n                    this.slide(this.index, !!fromTouch, false, 'prev');\r\n                }\r\n                else if (this.settings.slideEndAnimation && !fromTouch) {\r\n                    this.outer.addClass('lg-left-end');\r\n                    setTimeout(function () {\r\n                        _this.outer.removeClass('lg-left-end');\r\n                    }, 400);\r\n                }\r\n            }\r\n        }\r\n    };\r\n    LightGallery.prototype.keyPress = function () {\r\n        var _this = this;\r\n        $LG(window).on(\"keydown.lg.global\" + this.lgId, function (e) {\r\n            if (_this.lgOpened &&\r\n                _this.settings.escKey === true &&\r\n                e.keyCode === 27) {\r\n                e.preventDefault();\r\n                if (_this.settings.allowMediaOverlap &&\r\n                    _this.outer.hasClass('lg-can-toggle') &&\r\n                    _this.outer.hasClass('lg-components-open')) {\r\n                    _this.outer.removeClass('lg-components-open');\r\n                }\r\n                else {\r\n                    _this.closeGallery();\r\n                }\r\n            }\r\n            if (_this.lgOpened && _this.galleryItems.length > 1) {\r\n                if (e.keyCode === 37) {\r\n                    e.preventDefault();\r\n                    _this.goToPrevSlide();\r\n                }\r\n                if (e.keyCode === 39) {\r\n                    e.preventDefault();\r\n                    _this.goToNextSlide();\r\n                }\r\n            }\r\n        });\r\n    };\r\n    LightGallery.prototype.arrow = function () {\r\n        var _this = this;\r\n        this.getElementById('lg-prev').on('click.lg', function () {\r\n            _this.goToPrevSlide();\r\n        });\r\n        this.getElementById('lg-next').on('click.lg', function () {\r\n            _this.goToNextSlide();\r\n        });\r\n    };\r\n    LightGallery.prototype.arrowDisable = function (index) {\r\n        // Disable arrows if settings.hideControlOnEnd is true\r\n        if (!this.settings.loop && this.settings.hideControlOnEnd) {\r\n            var $prev = this.getElementById('lg-prev');\r\n            var $next = this.getElementById('lg-next');\r\n            if (index + 1 === this.galleryItems.length) {\r\n                $next.attr('disabled', 'disabled').addClass('disabled');\r\n            }\r\n            else {\r\n                $next.removeAttr('disabled').removeClass('disabled');\r\n            }\r\n            if (index === 0) {\r\n                $prev.attr('disabled', 'disabled').addClass('disabled');\r\n            }\r\n            else {\r\n                $prev.removeAttr('disabled').removeClass('disabled');\r\n            }\r\n        }\r\n    };\r\n    LightGallery.prototype.setTranslate = function ($el, xValue, yValue, scaleX, scaleY) {\r\n        if (scaleX === void 0) { scaleX = 1; }\r\n        if (scaleY === void 0) { scaleY = 1; }\r\n        $el.css('transform', 'translate3d(' +\r\n            xValue +\r\n            'px, ' +\r\n            yValue +\r\n            'px, 0px) scale3d(' +\r\n            scaleX +\r\n            ', ' +\r\n            scaleY +\r\n            ', 1)');\r\n    };\r\n    LightGallery.prototype.mousewheel = function () {\r\n        var _this = this;\r\n        var lastCall = 0;\r\n        this.outer.on('wheel.lg', function (e) {\r\n            if (!e.deltaY || _this.galleryItems.length < 2) {\r\n                return;\r\n            }\r\n            e.preventDefault();\r\n            var now = new Date().getTime();\r\n            if (now - lastCall < 1000) {\r\n                return;\r\n            }\r\n            lastCall = now;\r\n            if (e.deltaY > 0) {\r\n                _this.goToNextSlide();\r\n            }\r\n            else if (e.deltaY < 0) {\r\n                _this.goToPrevSlide();\r\n            }\r\n        });\r\n    };\r\n    LightGallery.prototype.isSlideElement = function (target) {\r\n        return (target.hasClass('lg-outer') ||\r\n            target.hasClass('lg-item') ||\r\n            target.hasClass('lg-img-wrap'));\r\n    };\r\n    LightGallery.prototype.isPosterElement = function (target) {\r\n        var playButton = this.getSlideItem(this.index)\r\n            .find('.lg-video-play-button')\r\n            .get();\r\n        return (target.hasClass('lg-video-poster') ||\r\n            target.hasClass('lg-video-play-button') ||\r\n            (playButton && playButton.contains(target.get())));\r\n    };\r\n    /**\r\n     * Maximize minimize inline gallery.\r\n     * @category lGPublicMethods\r\n     */\r\n    LightGallery.prototype.toggleMaximize = function () {\r\n        var _this = this;\r\n        this.getElementById('lg-maximize').on('click.lg', function () {\r\n            _this.$container.toggleClass('lg-inline');\r\n            _this.refreshOnResize();\r\n        });\r\n    };\r\n    LightGallery.prototype.invalidateItems = function () {\r\n        for (var index = 0; index < this.items.length; index++) {\r\n            var element = this.items[index];\r\n            var $element = $LG(element);\r\n            $element.off(\"click.lgcustom-item-\" + $element.attr('data-lg-id'));\r\n        }\r\n    };\r\n    LightGallery.prototype.trapFocus = function () {\r\n        var _this = this;\r\n        this.$container.get().focus({\r\n            preventScroll: true,\r\n        });\r\n        $LG(window).on(\"keydown.lg.global\" + this.lgId, function (e) {\r\n            if (!_this.lgOpened) {\r\n                return;\r\n            }\r\n            var isTabPressed = e.key === 'Tab' || e.keyCode === 9;\r\n            if (!isTabPressed) {\r\n                return;\r\n            }\r\n            var focusableEls = utils.getFocusableElements(_this.$container.get());\r\n            var firstFocusableEl = focusableEls[0];\r\n            var lastFocusableEl = focusableEls[focusableEls.length - 1];\r\n            if (e.shiftKey) {\r\n                if (document.activeElement === firstFocusableEl) {\r\n                    lastFocusableEl.focus();\r\n                    e.preventDefault();\r\n                }\r\n            }\r\n            else {\r\n                if (document.activeElement === lastFocusableEl) {\r\n                    firstFocusableEl.focus();\r\n                    e.preventDefault();\r\n                }\r\n            }\r\n        });\r\n    };\r\n    LightGallery.prototype.manageCloseGallery = function () {\r\n        var _this = this;\r\n        if (!this.settings.closable)\r\n            return;\r\n        var mousedown = false;\r\n        this.getElementById('lg-close').on('click.lg', function () {\r\n            _this.closeGallery();\r\n        });\r\n        if (this.settings.closeOnTap) {\r\n            // If you drag the slide and release outside gallery gets close on chrome\r\n            // for preventing this check mousedown and mouseup happened on .lg-item or lg-outer\r\n            this.outer.on('mousedown.lg', function (e) {\r\n                var target = $LG(e.target);\r\n                if (_this.isSlideElement(target)) {\r\n                    mousedown = true;\r\n                }\r\n                else {\r\n                    mousedown = false;\r\n                }\r\n            });\r\n            this.outer.on('mousemove.lg', function () {\r\n                mousedown = false;\r\n            });\r\n            this.outer.on('mouseup.lg', function (e) {\r\n                var target = $LG(e.target);\r\n                if (_this.isSlideElement(target) && mousedown) {\r\n                    if (!_this.outer.hasClass('lg-dragging')) {\r\n                        _this.closeGallery();\r\n                    }\r\n                }\r\n            });\r\n        }\r\n    };\r\n    /**\r\n     * Close lightGallery if it is opened.\r\n     *\r\n     * @description If closable is false in the settings, you need to pass true via closeGallery method to force close gallery\r\n     * @return returns the estimated time to close gallery completely including the close animation duration\r\n     * @category lGPublicMethods\r\n     * @example\r\n     *  const plugin = lightGallery();\r\n     *  plugin.closeGallery();\r\n     *\r\n     */\r\n    LightGallery.prototype.closeGallery = function (force) {\r\n        var _this = this;\r\n        if (!this.lgOpened || (!this.settings.closable && !force)) {\r\n            return 0;\r\n        }\r\n        this.LGel.trigger(lGEvents.beforeClose);\r\n        if (this.settings.resetScrollPosition && !this.settings.hideScrollbar) {\r\n            $LG(window).scrollTop(this.prevScrollTop);\r\n        }\r\n        var currentItem = this.items[this.index];\r\n        var transform;\r\n        if (this.zoomFromOrigin && currentItem) {\r\n            var _a = this.mediaContainerPosition, top_4 = _a.top, bottom = _a.bottom;\r\n            var _b = this.galleryItems[this.index], __slideVideoInfo = _b.__slideVideoInfo, poster = _b.poster;\r\n            var imageSize = utils.getSize(currentItem, this.outer, top_4 + bottom, __slideVideoInfo && poster && this.settings.videoMaxSize);\r\n            transform = utils.getTransform(currentItem, this.outer, top_4, bottom, imageSize);\r\n        }\r\n        if (this.zoomFromOrigin && transform) {\r\n            this.outer.addClass('lg-closing lg-zoom-from-image');\r\n            this.getSlideItem(this.index)\r\n                .addClass('lg-start-end-progress')\r\n                .css('transition-duration', this.settings.startAnimationDuration + 'ms')\r\n                .css('transform', transform);\r\n        }\r\n        else {\r\n            this.outer.addClass('lg-hide-items');\r\n            // lg-zoom-from-image is used for setting the opacity to 1 if zoomFromOrigin is true\r\n            // If the closing item doesn't have the lg-size attribute, remove this class to avoid the closing css conflicts\r\n            this.outer.removeClass('lg-zoom-from-image');\r\n        }\r\n        // Unbind all events added by lightGallery\r\n        // @todo\r\n        //this.$el.off('.lg.tm');\r\n        this.destroyModules();\r\n        this.lGalleryOn = false;\r\n        this.isDummyImageRemoved = false;\r\n        this.zoomFromOrigin = this.settings.zoomFromOrigin;\r\n        clearTimeout(this.hideBarTimeout);\r\n        this.hideBarTimeout = false;\r\n        $LG('html').removeClass('lg-on');\r\n        this.outer.removeClass('lg-visible lg-components-open');\r\n        // Resetting opacity to 0 isd required as  vertical swipe to close function adds inline opacity.\r\n        this.$backdrop.removeClass('in').css('opacity', 0);\r\n        var removeTimeout = this.zoomFromOrigin && transform\r\n            ? Math.max(this.settings.startAnimationDuration, this.settings.backdropDuration)\r\n            : this.settings.backdropDuration;\r\n        this.$container.removeClass('lg-show-in');\r\n        // Once the closign animation is completed and gallery is invisible\r\n        setTimeout(function () {\r\n            if (_this.zoomFromOrigin && transform) {\r\n                _this.outer.removeClass('lg-zoom-from-image');\r\n            }\r\n            _this.$container.removeClass('lg-show');\r\n            // Reset scrollbar\r\n            _this.resetScrollBar();\r\n            // Need to remove inline opacity as it is used in the stylesheet as well\r\n            _this.$backdrop\r\n                .removeAttr('style')\r\n                .css('transition-duration', _this.settings.backdropDuration + 'ms');\r\n            _this.outer.removeClass(\"lg-closing \" + _this.settings.startClass);\r\n            _this.getSlideItem(_this.index).removeClass('lg-start-end-progress');\r\n            _this.$inner.empty();\r\n            if (_this.lgOpened) {\r\n                _this.LGel.trigger(lGEvents.afterClose, {\r\n                    instance: _this,\r\n                });\r\n            }\r\n            if (_this.$container.get()) {\r\n                _this.$container.get().blur();\r\n            }\r\n            _this.lgOpened = false;\r\n        }, removeTimeout + 100);\r\n        return removeTimeout + 100;\r\n    };\r\n    LightGallery.prototype.initModules = function () {\r\n        this.plugins.forEach(function (module) {\r\n            try {\r\n                module.init();\r\n            }\r\n            catch (err) {\r\n                console.warn(\"lightGallery:- make sure lightGallery module is properly initiated\");\r\n            }\r\n        });\r\n    };\r\n    LightGallery.prototype.destroyModules = function (destroy) {\r\n        this.plugins.forEach(function (module) {\r\n            try {\r\n                if (destroy) {\r\n                    module.destroy();\r\n                }\r\n                else {\r\n                    module.closeGallery && module.closeGallery();\r\n                }\r\n            }\r\n            catch (err) {\r\n                console.warn(\"lightGallery:- make sure lightGallery module is properly destroyed\");\r\n            }\r\n        });\r\n    };\r\n    /**\r\n     * Refresh lightGallery with new set of children.\r\n     *\r\n     * @description This is useful to update the gallery when the child elements are changed without calling destroy method.\r\n     *\r\n     * If you are using dynamic mode, you can pass the modified array of dynamicEl as the first parameter to refresh the dynamic gallery\r\n     * @see <a href=\"/demos/dynamic-mode/\">Demo</a>\r\n     * @category lGPublicMethods\r\n     * @example\r\n     *  const plugin = lightGallery();\r\n     *  // Delete or add children, then call\r\n     *  plugin.refresh();\r\n     *\r\n     */\r\n    LightGallery.prototype.refresh = function (galleryItems) {\r\n        if (!this.settings.dynamic) {\r\n            this.invalidateItems();\r\n        }\r\n        if (galleryItems) {\r\n            this.galleryItems = galleryItems;\r\n        }\r\n        else {\r\n            this.galleryItems = this.getItems();\r\n        }\r\n        this.updateControls();\r\n        this.openGalleryOnItemClick();\r\n        this.LGel.trigger(lGEvents.updateSlides);\r\n    };\r\n    LightGallery.prototype.updateControls = function () {\r\n        this.addSlideVideoInfo(this.galleryItems);\r\n        this.updateCounterTotal();\r\n        this.manageSingleSlideClassName();\r\n    };\r\n    LightGallery.prototype.destroyGallery = function () {\r\n        this.destroyModules(true);\r\n        if (!this.settings.dynamic) {\r\n            this.invalidateItems();\r\n        }\r\n        $LG(window).off(\".lg.global\" + this.lgId);\r\n        this.LGel.off('.lg');\r\n        this.$container.remove();\r\n    };\r\n    /**\r\n     * Destroy lightGallery.\r\n     * Destroy lightGallery and its plugin instances completely\r\n     *\r\n     * @description This method also calls CloseGallery function internally. Returns the time takes to completely close and destroy the instance.\r\n     * In case if you want to re-initialize lightGallery right after destroying it, initialize it only once the destroy process is completed.\r\n     * You can use refresh method most of the times.\r\n     * @category lGPublicMethods\r\n     * @example\r\n     *  const plugin = lightGallery();\r\n     *  plugin.destroy();\r\n     *\r\n     */\r\n    LightGallery.prototype.destroy = function () {\r\n        var closeTimeout = this.closeGallery(true);\r\n        if (closeTimeout) {\r\n            setTimeout(this.destroyGallery.bind(this), closeTimeout);\r\n        }\r\n        else {\r\n            this.destroyGallery();\r\n        }\r\n        return closeTimeout;\r\n    };\r\n    return LightGallery;\r\n}());\n\nfunction lightGallery(el, options) {\r\n    return new LightGallery(el, options);\r\n}\n\nexport default lightGallery;\n//# sourceMappingURL=lightgallery.es5.js.map\n","/*!\n * Masonry v4.2.2\n * Cascading grid layout library\n * https://masonry.desandro.com\n * MIT License\n * by David DeSandro\n */\n\n( function( window, factory ) {\n  // universal module definition\n  /* jshint strict: false */ /*globals define, module, require */\n  if ( typeof define == 'function' && define.amd ) {\n    // AMD\n    define( [\n        'outlayer/outlayer',\n        'get-size/get-size'\n      ],\n      factory );\n  } else if ( typeof module == 'object' && module.exports ) {\n    // CommonJS\n    module.exports = factory(\n      require('outlayer'),\n      require('get-size')\n    );\n  } else {\n    // browser global\n    window.Masonry = factory(\n      window.Outlayer,\n      window.getSize\n    );\n  }\n\n}( window, function factory( Outlayer, getSize ) {\n\n'use strict';\n\n// -------------------------- masonryDefinition -------------------------- //\n\n  // create an Outlayer layout class\n  var Masonry = Outlayer.create('masonry');\n  // isFitWidth -> fitWidth\n  Masonry.compatOptions.fitWidth = 'isFitWidth';\n\n  var proto = Masonry.prototype;\n\n  proto._resetLayout = function() {\n    this.getSize();\n    this._getMeasurement( 'columnWidth', 'outerWidth' );\n    this._getMeasurement( 'gutter', 'outerWidth' );\n    this.measureColumns();\n\n    // reset column Y\n    this.colYs = [];\n    for ( var i=0; i < this.cols; i++ ) {\n      this.colYs.push( 0 );\n    }\n\n    this.maxY = 0;\n    this.horizontalColIndex = 0;\n  };\n\n  proto.measureColumns = function() {\n    this.getContainerWidth();\n    // if columnWidth is 0, default to outerWidth of first item\n    if ( !this.columnWidth ) {\n      var firstItem = this.items[0];\n      var firstItemElem = firstItem && firstItem.element;\n      // columnWidth fall back to item of first element\n      this.columnWidth = firstItemElem && getSize( firstItemElem ).outerWidth ||\n        // if first elem has no width, default to size of container\n        this.containerWidth;\n    }\n\n    var columnWidth = this.columnWidth += this.gutter;\n\n    // calculate columns\n    var containerWidth = this.containerWidth + this.gutter;\n    var cols = containerWidth / columnWidth;\n    // fix rounding errors, typically with gutters\n    var excess = columnWidth - containerWidth % columnWidth;\n    // if overshoot is less than a pixel, round up, otherwise floor it\n    var mathMethod = excess && excess < 1 ? 'round' : 'floor';\n    cols = Math[ mathMethod ]( cols );\n    this.cols = Math.max( cols, 1 );\n  };\n\n  proto.getContainerWidth = function() {\n    // container is parent if fit width\n    var isFitWidth = this._getOption('fitWidth');\n    var container = isFitWidth ? this.element.parentNode : this.element;\n    // check that this.size and size are there\n    // IE8 triggers resize on body size change, so they might not be\n    var size = getSize( container );\n    this.containerWidth = size && size.innerWidth;\n  };\n\n  proto._getItemLayoutPosition = function( item ) {\n    item.getSize();\n    // how many columns does this brick span\n    var remainder = item.size.outerWidth % this.columnWidth;\n    var mathMethod = remainder && remainder < 1 ? 'round' : 'ceil';\n    // round if off by 1 pixel, otherwise use ceil\n    var colSpan = Math[ mathMethod ]( item.size.outerWidth / this.columnWidth );\n    colSpan = Math.min( colSpan, this.cols );\n    // use horizontal or top column position\n    var colPosMethod = this.options.horizontalOrder ?\n      '_getHorizontalColPosition' : '_getTopColPosition';\n    var colPosition = this[ colPosMethod ]( colSpan, item );\n    // position the brick\n    var position = {\n      x: this.columnWidth * colPosition.col,\n      y: colPosition.y\n    };\n    // apply setHeight to necessary columns\n    var setHeight = colPosition.y + item.size.outerHeight;\n    var setMax = colSpan + colPosition.col;\n    for ( var i = colPosition.col; i < setMax; i++ ) {\n      this.colYs[i] = setHeight;\n    }\n\n    return position;\n  };\n\n  proto._getTopColPosition = function( colSpan ) {\n    var colGroup = this._getTopColGroup( colSpan );\n    // get the minimum Y value from the columns\n    var minimumY = Math.min.apply( Math, colGroup );\n\n    return {\n      col: colGroup.indexOf( minimumY ),\n      y: minimumY,\n    };\n  };\n\n  /**\n   * @param {Number} colSpan - number of columns the element spans\n   * @returns {Array} colGroup\n   */\n  proto._getTopColGroup = function( colSpan ) {\n    if ( colSpan < 2 ) {\n      // if brick spans only one column, use all the column Ys\n      return this.colYs;\n    }\n\n    var colGroup = [];\n    // how many different places could this brick fit horizontally\n    var groupCount = this.cols + 1 - colSpan;\n    // for each group potential horizontal position\n    for ( var i = 0; i < groupCount; i++ ) {\n      colGroup[i] = this._getColGroupY( i, colSpan );\n    }\n    return colGroup;\n  };\n\n  proto._getColGroupY = function( col, colSpan ) {\n    if ( colSpan < 2 ) {\n      return this.colYs[ col ];\n    }\n    // make an array of colY values for that one group\n    var groupColYs = this.colYs.slice( col, col + colSpan );\n    // and get the max value of the array\n    return Math.max.apply( Math, groupColYs );\n  };\n\n  // get column position based on horizontal index. #873\n  proto._getHorizontalColPosition = function( colSpan, item ) {\n    var col = this.horizontalColIndex % this.cols;\n    var isOver = colSpan > 1 && col + colSpan > this.cols;\n    // shift to next row if item can't fit on current row\n    col = isOver ? 0 : col;\n    // don't let zero-size items take up space\n    var hasSize = item.size.outerWidth && item.size.outerHeight;\n    this.horizontalColIndex = hasSize ? col + colSpan : this.horizontalColIndex;\n\n    return {\n      col: col,\n      y: this._getColGroupY( col, colSpan ),\n    };\n  };\n\n  proto._manageStamp = function( stamp ) {\n    var stampSize = getSize( stamp );\n    var offset = this._getElementOffset( stamp );\n    // get the columns that this stamp affects\n    var isOriginLeft = this._getOption('originLeft');\n    var firstX = isOriginLeft ? offset.left : offset.right;\n    var lastX = firstX + stampSize.outerWidth;\n    var firstCol = Math.floor( firstX / this.columnWidth );\n    firstCol = Math.max( 0, firstCol );\n    var lastCol = Math.floor( lastX / this.columnWidth );\n    // lastCol should not go over if multiple of columnWidth #425\n    lastCol -= lastX % this.columnWidth ? 0 : 1;\n    lastCol = Math.min( this.cols - 1, lastCol );\n    // set colYs to bottom of the stamp\n\n    var isOriginTop = this._getOption('originTop');\n    var stampMaxY = ( isOriginTop ? offset.top : offset.bottom ) +\n      stampSize.outerHeight;\n    for ( var i = firstCol; i <= lastCol; i++ ) {\n      this.colYs[i] = Math.max( stampMaxY, this.colYs[i] );\n    }\n  };\n\n  proto._getContainerSize = function() {\n    this.maxY = Math.max.apply( Math, this.colYs );\n    var size = {\n      height: this.maxY\n    };\n\n    if ( this._getOption('fitWidth') ) {\n      size.width = this._getContainerFitWidth();\n    }\n\n    return size;\n  };\n\n  proto._getContainerFitWidth = function() {\n    var unusedCols = 0;\n    // count unused columns\n    var i = this.cols;\n    while ( --i ) {\n      if ( this.colYs[i] !== 0 ) {\n        break;\n      }\n      unusedCols++;\n    }\n    // fit container to columns that have been used\n    return ( this.cols - unusedCols ) * this.columnWidth - this.gutter;\n  };\n\n  proto.needsResizeLayout = function() {\n    var previousWidth = this.containerWidth;\n    this.getContainerWidth();\n    return previousWidth != this.containerWidth;\n  };\n\n  return Masonry;\n\n}));\n","/**\n * Outlayer Item\n */\n\n( function( window, factory ) {\n  // universal module definition\n  /* jshint strict: false */ /* globals define, module, require */\n  if ( typeof define == 'function' && define.amd ) {\n    // AMD - RequireJS\n    define( [\n        'ev-emitter/ev-emitter',\n        'get-size/get-size'\n      ],\n      factory\n    );\n  } else if ( typeof module == 'object' && module.exports ) {\n    // CommonJS - Browserify, Webpack\n    module.exports = factory(\n      require('ev-emitter'),\n      require('get-size')\n    );\n  } else {\n    // browser global\n    window.Outlayer = {};\n    window.Outlayer.Item = factory(\n      window.EvEmitter,\n      window.getSize\n    );\n  }\n\n}( window, function factory( EvEmitter, getSize ) {\n'use strict';\n\n// ----- helpers ----- //\n\nfunction isEmptyObj( obj ) {\n  for ( var prop in obj ) {\n    return false;\n  }\n  prop = null;\n  return true;\n}\n\n// -------------------------- CSS3 support -------------------------- //\n\n\nvar docElemStyle = document.documentElement.style;\n\nvar transitionProperty = typeof docElemStyle.transition == 'string' ?\n  'transition' : 'WebkitTransition';\nvar transformProperty = typeof docElemStyle.transform == 'string' ?\n  'transform' : 'WebkitTransform';\n\nvar transitionEndEvent = {\n  WebkitTransition: 'webkitTransitionEnd',\n  transition: 'transitionend'\n}[ transitionProperty ];\n\n// cache all vendor properties that could have vendor prefix\nvar vendorProperties = {\n  transform: transformProperty,\n  transition: transitionProperty,\n  transitionDuration: transitionProperty + 'Duration',\n  transitionProperty: transitionProperty + 'Property',\n  transitionDelay: transitionProperty + 'Delay'\n};\n\n// -------------------------- Item -------------------------- //\n\nfunction Item( element, layout ) {\n  if ( !element ) {\n    return;\n  }\n\n  this.element = element;\n  // parent layout class, i.e. Masonry, Isotope, or Packery\n  this.layout = layout;\n  this.position = {\n    x: 0,\n    y: 0\n  };\n\n  this._create();\n}\n\n// inherit EvEmitter\nvar proto = Item.prototype = Object.create( EvEmitter.prototype );\nproto.constructor = Item;\n\nproto._create = function() {\n  // transition objects\n  this._transn = {\n    ingProperties: {},\n    clean: {},\n    onEnd: {}\n  };\n\n  this.css({\n    position: 'absolute'\n  });\n};\n\n// trigger specified handler for event type\nproto.handleEvent = function( event ) {\n  var method = 'on' + event.type;\n  if ( this[ method ] ) {\n    this[ method ]( event );\n  }\n};\n\nproto.getSize = function() {\n  this.size = getSize( this.element );\n};\n\n/**\n * apply CSS styles to element\n * @param {Object} style\n */\nproto.css = function( style ) {\n  var elemStyle = this.element.style;\n\n  for ( var prop in style ) {\n    // use vendor property if available\n    var supportedProp = vendorProperties[ prop ] || prop;\n    elemStyle[ supportedProp ] = style[ prop ];\n  }\n};\n\n // measure position, and sets it\nproto.getPosition = function() {\n  var style = getComputedStyle( this.element );\n  var isOriginLeft = this.layout._getOption('originLeft');\n  var isOriginTop = this.layout._getOption('originTop');\n  var xValue = style[ isOriginLeft ? 'left' : 'right' ];\n  var yValue = style[ isOriginTop ? 'top' : 'bottom' ];\n  var x = parseFloat( xValue );\n  var y = parseFloat( yValue );\n  // convert percent to pixels\n  var layoutSize = this.layout.size;\n  if ( xValue.indexOf('%') != -1 ) {\n    x = ( x / 100 ) * layoutSize.width;\n  }\n  if ( yValue.indexOf('%') != -1 ) {\n    y = ( y / 100 ) * layoutSize.height;\n  }\n  // clean up 'auto' or other non-integer values\n  x = isNaN( x ) ? 0 : x;\n  y = isNaN( y ) ? 0 : y;\n  // remove padding from measurement\n  x -= isOriginLeft ? layoutSize.paddingLeft : layoutSize.paddingRight;\n  y -= isOriginTop ? layoutSize.paddingTop : layoutSize.paddingBottom;\n\n  this.position.x = x;\n  this.position.y = y;\n};\n\n// set settled position, apply padding\nproto.layoutPosition = function() {\n  var layoutSize = this.layout.size;\n  var style = {};\n  var isOriginLeft = this.layout._getOption('originLeft');\n  var isOriginTop = this.layout._getOption('originTop');\n\n  // x\n  var xPadding = isOriginLeft ? 'paddingLeft' : 'paddingRight';\n  var xProperty = isOriginLeft ? 'left' : 'right';\n  var xResetProperty = isOriginLeft ? 'right' : 'left';\n\n  var x = this.position.x + layoutSize[ xPadding ];\n  // set in percentage or pixels\n  style[ xProperty ] = this.getXValue( x );\n  // reset other property\n  style[ xResetProperty ] = '';\n\n  // y\n  var yPadding = isOriginTop ? 'paddingTop' : 'paddingBottom';\n  var yProperty = isOriginTop ? 'top' : 'bottom';\n  var yResetProperty = isOriginTop ? 'bottom' : 'top';\n\n  var y = this.position.y + layoutSize[ yPadding ];\n  // set in percentage or pixels\n  style[ yProperty ] = this.getYValue( y );\n  // reset other property\n  style[ yResetProperty ] = '';\n\n  this.css( style );\n  this.emitEvent( 'layout', [ this ] );\n};\n\nproto.getXValue = function( x ) {\n  var isHorizontal = this.layout._getOption('horizontal');\n  return this.layout.options.percentPosition && !isHorizontal ?\n    ( ( x / this.layout.size.width ) * 100 ) + '%' : x + 'px';\n};\n\nproto.getYValue = function( y ) {\n  var isHorizontal = this.layout._getOption('horizontal');\n  return this.layout.options.percentPosition && isHorizontal ?\n    ( ( y / this.layout.size.height ) * 100 ) + '%' : y + 'px';\n};\n\nproto._transitionTo = function( x, y ) {\n  this.getPosition();\n  // get current x & y from top/left\n  var curX = this.position.x;\n  var curY = this.position.y;\n\n  var didNotMove = x == this.position.x && y == this.position.y;\n\n  // save end position\n  this.setPosition( x, y );\n\n  // if did not move and not transitioning, just go to layout\n  if ( didNotMove && !this.isTransitioning ) {\n    this.layoutPosition();\n    return;\n  }\n\n  var transX = x - curX;\n  var transY = y - curY;\n  var transitionStyle = {};\n  transitionStyle.transform = this.getTranslate( transX, transY );\n\n  this.transition({\n    to: transitionStyle,\n    onTransitionEnd: {\n      transform: this.layoutPosition\n    },\n    isCleaning: true\n  });\n};\n\nproto.getTranslate = function( x, y ) {\n  // flip cooridinates if origin on right or bottom\n  var isOriginLeft = this.layout._getOption('originLeft');\n  var isOriginTop = this.layout._getOption('originTop');\n  x = isOriginLeft ? x : -x;\n  y = isOriginTop ? y : -y;\n  return 'translate3d(' + x + 'px, ' + y + 'px, 0)';\n};\n\n// non transition + transform support\nproto.goTo = function( x, y ) {\n  this.setPosition( x, y );\n  this.layoutPosition();\n};\n\nproto.moveTo = proto._transitionTo;\n\nproto.setPosition = function( x, y ) {\n  this.position.x = parseFloat( x );\n  this.position.y = parseFloat( y );\n};\n\n// ----- transition ----- //\n\n/**\n * @param {Object} style - CSS\n * @param {Function} onTransitionEnd\n */\n\n// non transition, just trigger callback\nproto._nonTransition = function( args ) {\n  this.css( args.to );\n  if ( args.isCleaning ) {\n    this._removeStyles( args.to );\n  }\n  for ( var prop in args.onTransitionEnd ) {\n    args.onTransitionEnd[ prop ].call( this );\n  }\n};\n\n/**\n * proper transition\n * @param {Object} args - arguments\n *   @param {Object} to - style to transition to\n *   @param {Object} from - style to start transition from\n *   @param {Boolean} isCleaning - removes transition styles after transition\n *   @param {Function} onTransitionEnd - callback\n */\nproto.transition = function( args ) {\n  // redirect to nonTransition if no transition duration\n  if ( !parseFloat( this.layout.options.transitionDuration ) ) {\n    this._nonTransition( args );\n    return;\n  }\n\n  var _transition = this._transn;\n  // keep track of onTransitionEnd callback by css property\n  for ( var prop in args.onTransitionEnd ) {\n    _transition.onEnd[ prop ] = args.onTransitionEnd[ prop ];\n  }\n  // keep track of properties that are transitioning\n  for ( prop in args.to ) {\n    _transition.ingProperties[ prop ] = true;\n    // keep track of properties to clean up when transition is done\n    if ( args.isCleaning ) {\n      _transition.clean[ prop ] = true;\n    }\n  }\n\n  // set from styles\n  if ( args.from ) {\n    this.css( args.from );\n    // force redraw. http://blog.alexmaccaw.com/css-transitions\n    var h = this.element.offsetHeight;\n    // hack for JSHint to hush about unused var\n    h = null;\n  }\n  // enable transition\n  this.enableTransition( args.to );\n  // set styles that are transitioning\n  this.css( args.to );\n\n  this.isTransitioning = true;\n\n};\n\n// dash before all cap letters, including first for\n// WebkitTransform => -webkit-transform\nfunction toDashedAll( str ) {\n  return str.replace( /([A-Z])/g, function( $1 ) {\n    return '-' + $1.toLowerCase();\n  });\n}\n\nvar transitionProps = 'opacity,' + toDashedAll( transformProperty );\n\nproto.enableTransition = function(/* style */) {\n  // HACK changing transitionProperty during a transition\n  // will cause transition to jump\n  if ( this.isTransitioning ) {\n    return;\n  }\n\n  // make `transition: foo, bar, baz` from style object\n  // HACK un-comment this when enableTransition can work\n  // while a transition is happening\n  // var transitionValues = [];\n  // for ( var prop in style ) {\n  //   // dash-ify camelCased properties like WebkitTransition\n  //   prop = vendorProperties[ prop ] || prop;\n  //   transitionValues.push( toDashedAll( prop ) );\n  // }\n  // munge number to millisecond, to match stagger\n  var duration = this.layout.options.transitionDuration;\n  duration = typeof duration == 'number' ? duration + 'ms' : duration;\n  // enable transition styles\n  this.css({\n    transitionProperty: transitionProps,\n    transitionDuration: duration,\n    transitionDelay: this.staggerDelay || 0\n  });\n  // listen for transition end event\n  this.element.addEventListener( transitionEndEvent, this, false );\n};\n\n// ----- events ----- //\n\nproto.onwebkitTransitionEnd = function( event ) {\n  this.ontransitionend( event );\n};\n\nproto.onotransitionend = function( event ) {\n  this.ontransitionend( event );\n};\n\n// properties that I munge to make my life easier\nvar dashedVendorProperties = {\n  '-webkit-transform': 'transform'\n};\n\nproto.ontransitionend = function( event ) {\n  // disregard bubbled events from children\n  if ( event.target !== this.element ) {\n    return;\n  }\n  var _transition = this._transn;\n  // get property name of transitioned property, convert to prefix-free\n  var propertyName = dashedVendorProperties[ event.propertyName ] || event.propertyName;\n\n  // remove property that has completed transitioning\n  delete _transition.ingProperties[ propertyName ];\n  // check if any properties are still transitioning\n  if ( isEmptyObj( _transition.ingProperties ) ) {\n    // all properties have completed transitioning\n    this.disableTransition();\n  }\n  // clean style\n  if ( propertyName in _transition.clean ) {\n    // clean up style\n    this.element.style[ event.propertyName ] = '';\n    delete _transition.clean[ propertyName ];\n  }\n  // trigger onTransitionEnd callback\n  if ( propertyName in _transition.onEnd ) {\n    var onTransitionEnd = _transition.onEnd[ propertyName ];\n    onTransitionEnd.call( this );\n    delete _transition.onEnd[ propertyName ];\n  }\n\n  this.emitEvent( 'transitionEnd', [ this ] );\n};\n\nproto.disableTransition = function() {\n  this.removeTransitionStyles();\n  this.element.removeEventListener( transitionEndEvent, this, false );\n  this.isTransitioning = false;\n};\n\n/**\n * removes style property from element\n * @param {Object} style\n**/\nproto._removeStyles = function( style ) {\n  // clean up transition styles\n  var cleanStyle = {};\n  for ( var prop in style ) {\n    cleanStyle[ prop ] = '';\n  }\n  this.css( cleanStyle );\n};\n\nvar cleanTransitionStyle = {\n  transitionProperty: '',\n  transitionDuration: '',\n  transitionDelay: ''\n};\n\nproto.removeTransitionStyles = function() {\n  // remove transition\n  this.css( cleanTransitionStyle );\n};\n\n// ----- stagger ----- //\n\nproto.stagger = function( delay ) {\n  delay = isNaN( delay ) ? 0 : delay;\n  this.staggerDelay = delay + 'ms';\n};\n\n// ----- show/hide/remove ----- //\n\n// remove element from DOM\nproto.removeElem = function() {\n  this.element.parentNode.removeChild( this.element );\n  // remove display: none\n  this.css({ display: '' });\n  this.emitEvent( 'remove', [ this ] );\n};\n\nproto.remove = function() {\n  // just remove element if no transition support or no transition\n  if ( !transitionProperty || !parseFloat( this.layout.options.transitionDuration ) ) {\n    this.removeElem();\n    return;\n  }\n\n  // start transition\n  this.once( 'transitionEnd', function() {\n    this.removeElem();\n  });\n  this.hide();\n};\n\nproto.reveal = function() {\n  delete this.isHidden;\n  // remove display: none\n  this.css({ display: '' });\n\n  var options = this.layout.options;\n\n  var onTransitionEnd = {};\n  var transitionEndProperty = this.getHideRevealTransitionEndProperty('visibleStyle');\n  onTransitionEnd[ transitionEndProperty ] = this.onRevealTransitionEnd;\n\n  this.transition({\n    from: options.hiddenStyle,\n    to: options.visibleStyle,\n    isCleaning: true,\n    onTransitionEnd: onTransitionEnd\n  });\n};\n\nproto.onRevealTransitionEnd = function() {\n  // check if still visible\n  // during transition, item may have been hidden\n  if ( !this.isHidden ) {\n    this.emitEvent('reveal');\n  }\n};\n\n/**\n * get style property use for hide/reveal transition end\n * @param {String} styleProperty - hiddenStyle/visibleStyle\n * @returns {String}\n */\nproto.getHideRevealTransitionEndProperty = function( styleProperty ) {\n  var optionStyle = this.layout.options[ styleProperty ];\n  // use opacity\n  if ( optionStyle.opacity ) {\n    return 'opacity';\n  }\n  // get first property\n  for ( var prop in optionStyle ) {\n    return prop;\n  }\n};\n\nproto.hide = function() {\n  // set flag\n  this.isHidden = true;\n  // remove display: none\n  this.css({ display: '' });\n\n  var options = this.layout.options;\n\n  var onTransitionEnd = {};\n  var transitionEndProperty = this.getHideRevealTransitionEndProperty('hiddenStyle');\n  onTransitionEnd[ transitionEndProperty ] = this.onHideTransitionEnd;\n\n  this.transition({\n    from: options.visibleStyle,\n    to: options.hiddenStyle,\n    // keep hidden stuff hidden\n    isCleaning: true,\n    onTransitionEnd: onTransitionEnd\n  });\n};\n\nproto.onHideTransitionEnd = function() {\n  // check if still hidden\n  // during transition, item may have been un-hidden\n  if ( this.isHidden ) {\n    this.css({ display: 'none' });\n    this.emitEvent('hide');\n  }\n};\n\nproto.destroy = function() {\n  this.css({\n    position: '',\n    left: '',\n    right: '',\n    top: '',\n    bottom: '',\n    transition: '',\n    transform: ''\n  });\n};\n\nreturn Item;\n\n}));\n","/*!\n * Outlayer v2.1.1\n * the brains and guts of a layout library\n * MIT license\n */\n\n( function( window, factory ) {\n  'use strict';\n  // universal module definition\n  /* jshint strict: false */ /* globals define, module, require */\n  if ( typeof define == 'function' && define.amd ) {\n    // AMD - RequireJS\n    define( [\n        'ev-emitter/ev-emitter',\n        'get-size/get-size',\n        'fizzy-ui-utils/utils',\n        './item'\n      ],\n      function( EvEmitter, getSize, utils, Item ) {\n        return factory( window, EvEmitter, getSize, utils, Item);\n      }\n    );\n  } else if ( typeof module == 'object' && module.exports ) {\n    // CommonJS - Browserify, Webpack\n    module.exports = factory(\n      window,\n      require('ev-emitter'),\n      require('get-size'),\n      require('fizzy-ui-utils'),\n      require('./item')\n    );\n  } else {\n    // browser global\n    window.Outlayer = factory(\n      window,\n      window.EvEmitter,\n      window.getSize,\n      window.fizzyUIUtils,\n      window.Outlayer.Item\n    );\n  }\n\n}( window, function factory( window, EvEmitter, getSize, utils, Item ) {\n'use strict';\n\n// ----- vars ----- //\n\nvar console = window.console;\nvar jQuery = window.jQuery;\nvar noop = function() {};\n\n// -------------------------- Outlayer -------------------------- //\n\n// globally unique identifiers\nvar GUID = 0;\n// internal store of all Outlayer intances\nvar instances = {};\n\n\n/**\n * @param {Element, String} element\n * @param {Object} options\n * @constructor\n */\nfunction Outlayer( element, options ) {\n  var queryElement = utils.getQueryElement( element );\n  if ( !queryElement ) {\n    if ( console ) {\n      console.error( 'Bad element for ' + this.constructor.namespace +\n        ': ' + ( queryElement || element ) );\n    }\n    return;\n  }\n  this.element = queryElement;\n  // add jQuery\n  if ( jQuery ) {\n    this.$element = jQuery( this.element );\n  }\n\n  // options\n  this.options = utils.extend( {}, this.constructor.defaults );\n  this.option( options );\n\n  // add id for Outlayer.getFromElement\n  var id = ++GUID;\n  this.element.outlayerGUID = id; // expando\n  instances[ id ] = this; // associate via id\n\n  // kick it off\n  this._create();\n\n  var isInitLayout = this._getOption('initLayout');\n  if ( isInitLayout ) {\n    this.layout();\n  }\n}\n\n// settings are for internal use only\nOutlayer.namespace = 'outlayer';\nOutlayer.Item = Item;\n\n// default options\nOutlayer.defaults = {\n  containerStyle: {\n    position: 'relative'\n  },\n  initLayout: true,\n  originLeft: true,\n  originTop: true,\n  resize: true,\n  resizeContainer: true,\n  // item options\n  transitionDuration: '0.4s',\n  hiddenStyle: {\n    opacity: 0,\n    transform: 'scale(0.001)'\n  },\n  visibleStyle: {\n    opacity: 1,\n    transform: 'scale(1)'\n  }\n};\n\nvar proto = Outlayer.prototype;\n// inherit EvEmitter\nutils.extend( proto, EvEmitter.prototype );\n\n/**\n * set options\n * @param {Object} opts\n */\nproto.option = function( opts ) {\n  utils.extend( this.options, opts );\n};\n\n/**\n * get backwards compatible option value, check old name\n */\nproto._getOption = function( option ) {\n  var oldOption = this.constructor.compatOptions[ option ];\n  return oldOption && this.options[ oldOption ] !== undefined ?\n    this.options[ oldOption ] : this.options[ option ];\n};\n\nOutlayer.compatOptions = {\n  // currentName: oldName\n  initLayout: 'isInitLayout',\n  horizontal: 'isHorizontal',\n  layoutInstant: 'isLayoutInstant',\n  originLeft: 'isOriginLeft',\n  originTop: 'isOriginTop',\n  resize: 'isResizeBound',\n  resizeContainer: 'isResizingContainer'\n};\n\nproto._create = function() {\n  // get items from children\n  this.reloadItems();\n  // elements that affect layout, but are not laid out\n  this.stamps = [];\n  this.stamp( this.options.stamp );\n  // set container style\n  utils.extend( this.element.style, this.options.containerStyle );\n\n  // bind resize method\n  var canBindResize = this._getOption('resize');\n  if ( canBindResize ) {\n    this.bindResize();\n  }\n};\n\n// goes through all children again and gets bricks in proper order\nproto.reloadItems = function() {\n  // collection of item elements\n  this.items = this._itemize( this.element.children );\n};\n\n\n/**\n * turn elements into Outlayer.Items to be used in layout\n * @param {Array or NodeList or HTMLElement} elems\n * @returns {Array} items - collection of new Outlayer Items\n */\nproto._itemize = function( elems ) {\n\n  var itemElems = this._filterFindItemElements( elems );\n  var Item = this.constructor.Item;\n\n  // create new Outlayer Items for collection\n  var items = [];\n  for ( var i=0; i < itemElems.length; i++ ) {\n    var elem = itemElems[i];\n    var item = new Item( elem, this );\n    items.push( item );\n  }\n\n  return items;\n};\n\n/**\n * get item elements to be used in layout\n * @param {Array or NodeList or HTMLElement} elems\n * @returns {Array} items - item elements\n */\nproto._filterFindItemElements = function( elems ) {\n  return utils.filterFindElements( elems, this.options.itemSelector );\n};\n\n/**\n * getter method for getting item elements\n * @returns {Array} elems - collection of item elements\n */\nproto.getItemElements = function() {\n  return this.items.map( function( item ) {\n    return item.element;\n  });\n};\n\n// ----- init & layout ----- //\n\n/**\n * lays out all items\n */\nproto.layout = function() {\n  this._resetLayout();\n  this._manageStamps();\n\n  // don't animate first layout\n  var layoutInstant = this._getOption('layoutInstant');\n  var isInstant = layoutInstant !== undefined ?\n    layoutInstant : !this._isLayoutInited;\n  this.layoutItems( this.items, isInstant );\n\n  // flag for initalized\n  this._isLayoutInited = true;\n};\n\n// _init is alias for layout\nproto._init = proto.layout;\n\n/**\n * logic before any new layout\n */\nproto._resetLayout = function() {\n  this.getSize();\n};\n\n\nproto.getSize = function() {\n  this.size = getSize( this.element );\n};\n\n/**\n * get measurement from option, for columnWidth, rowHeight, gutter\n * if option is String -> get element from selector string, & get size of element\n * if option is Element -> get size of element\n * else use option as a number\n *\n * @param {String} measurement\n * @param {String} size - width or height\n * @private\n */\nproto._getMeasurement = function( measurement, size ) {\n  var option = this.options[ measurement ];\n  var elem;\n  if ( !option ) {\n    // default to 0\n    this[ measurement ] = 0;\n  } else {\n    // use option as an element\n    if ( typeof option == 'string' ) {\n      elem = this.element.querySelector( option );\n    } else if ( option instanceof HTMLElement ) {\n      elem = option;\n    }\n    // use size of element, if element\n    this[ measurement ] = elem ? getSize( elem )[ size ] : option;\n  }\n};\n\n/**\n * layout a collection of item elements\n * @api public\n */\nproto.layoutItems = function( items, isInstant ) {\n  items = this._getItemsForLayout( items );\n\n  this._layoutItems( items, isInstant );\n\n  this._postLayout();\n};\n\n/**\n * get the items to be laid out\n * you may want to skip over some items\n * @param {Array} items\n * @returns {Array} items\n */\nproto._getItemsForLayout = function( items ) {\n  return items.filter( function( item ) {\n    return !item.isIgnored;\n  });\n};\n\n/**\n * layout items\n * @param {Array} items\n * @param {Boolean} isInstant\n */\nproto._layoutItems = function( items, isInstant ) {\n  this._emitCompleteOnItems( 'layout', items );\n\n  if ( !items || !items.length ) {\n    // no items, emit event with empty array\n    return;\n  }\n\n  var queue = [];\n\n  items.forEach( function( item ) {\n    // get x/y object from method\n    var position = this._getItemLayoutPosition( item );\n    // enqueue\n    position.item = item;\n    position.isInstant = isInstant || item.isLayoutInstant;\n    queue.push( position );\n  }, this );\n\n  this._processLayoutQueue( queue );\n};\n\n/**\n * get item layout position\n * @param {Outlayer.Item} item\n * @returns {Object} x and y position\n */\nproto._getItemLayoutPosition = function( /* item */ ) {\n  return {\n    x: 0,\n    y: 0\n  };\n};\n\n/**\n * iterate over array and position each item\n * Reason being - separating this logic prevents 'layout invalidation'\n * thx @paul_irish\n * @param {Array} queue\n */\nproto._processLayoutQueue = function( queue ) {\n  this.updateStagger();\n  queue.forEach( function( obj, i ) {\n    this._positionItem( obj.item, obj.x, obj.y, obj.isInstant, i );\n  }, this );\n};\n\n// set stagger from option in milliseconds number\nproto.updateStagger = function() {\n  var stagger = this.options.stagger;\n  if ( stagger === null || stagger === undefined ) {\n    this.stagger = 0;\n    return;\n  }\n  this.stagger = getMilliseconds( stagger );\n  return this.stagger;\n};\n\n/**\n * Sets position of item in DOM\n * @param {Outlayer.Item} item\n * @param {Number} x - horizontal position\n * @param {Number} y - vertical position\n * @param {Boolean} isInstant - disables transitions\n */\nproto._positionItem = function( item, x, y, isInstant, i ) {\n  if ( isInstant ) {\n    // if not transition, just set CSS\n    item.goTo( x, y );\n  } else {\n    item.stagger( i * this.stagger );\n    item.moveTo( x, y );\n  }\n};\n\n/**\n * Any logic you want to do after each layout,\n * i.e. size the container\n */\nproto._postLayout = function() {\n  this.resizeContainer();\n};\n\nproto.resizeContainer = function() {\n  var isResizingContainer = this._getOption('resizeContainer');\n  if ( !isResizingContainer ) {\n    return;\n  }\n  var size = this._getContainerSize();\n  if ( size ) {\n    this._setContainerMeasure( size.width, true );\n    this._setContainerMeasure( size.height, false );\n  }\n};\n\n/**\n * Sets width or height of container if returned\n * @returns {Object} size\n *   @param {Number} width\n *   @param {Number} height\n */\nproto._getContainerSize = noop;\n\n/**\n * @param {Number} measure - size of width or height\n * @param {Boolean} isWidth\n */\nproto._setContainerMeasure = function( measure, isWidth ) {\n  if ( measure === undefined ) {\n    return;\n  }\n\n  var elemSize = this.size;\n  // add padding and border width if border box\n  if ( elemSize.isBorderBox ) {\n    measure += isWidth ? elemSize.paddingLeft + elemSize.paddingRight +\n      elemSize.borderLeftWidth + elemSize.borderRightWidth :\n      elemSize.paddingBottom + elemSize.paddingTop +\n      elemSize.borderTopWidth + elemSize.borderBottomWidth;\n  }\n\n  measure = Math.max( measure, 0 );\n  this.element.style[ isWidth ? 'width' : 'height' ] = measure + 'px';\n};\n\n/**\n * emit eventComplete on a collection of items events\n * @param {String} eventName\n * @param {Array} items - Outlayer.Items\n */\nproto._emitCompleteOnItems = function( eventName, items ) {\n  var _this = this;\n  function onComplete() {\n    _this.dispatchEvent( eventName + 'Complete', null, [ items ] );\n  }\n\n  var count = items.length;\n  if ( !items || !count ) {\n    onComplete();\n    return;\n  }\n\n  var doneCount = 0;\n  function tick() {\n    doneCount++;\n    if ( doneCount == count ) {\n      onComplete();\n    }\n  }\n\n  // bind callback\n  items.forEach( function( item ) {\n    item.once( eventName, tick );\n  });\n};\n\n/**\n * emits events via EvEmitter and jQuery events\n * @param {String} type - name of event\n * @param {Event} event - original event\n * @param {Array} args - extra arguments\n */\nproto.dispatchEvent = function( type, event, args ) {\n  // add original event to arguments\n  var emitArgs = event ? [ event ].concat( args ) : args;\n  this.emitEvent( type, emitArgs );\n\n  if ( jQuery ) {\n    // set this.$element\n    this.$element = this.$element || jQuery( this.element );\n    if ( event ) {\n      // create jQuery event\n      var $event = jQuery.Event( event );\n      $event.type = type;\n      this.$element.trigger( $event, args );\n    } else {\n      // just trigger with type if no event available\n      this.$element.trigger( type, args );\n    }\n  }\n};\n\n// -------------------------- ignore & stamps -------------------------- //\n\n\n/**\n * keep item in collection, but do not lay it out\n * ignored items do not get skipped in layout\n * @param {Element} elem\n */\nproto.ignore = function( elem ) {\n  var item = this.getItem( elem );\n  if ( item ) {\n    item.isIgnored = true;\n  }\n};\n\n/**\n * return item to layout collection\n * @param {Element} elem\n */\nproto.unignore = function( elem ) {\n  var item = this.getItem( elem );\n  if ( item ) {\n    delete item.isIgnored;\n  }\n};\n\n/**\n * adds elements to stamps\n * @param {NodeList, Array, Element, or String} elems\n */\nproto.stamp = function( elems ) {\n  elems = this._find( elems );\n  if ( !elems ) {\n    return;\n  }\n\n  this.stamps = this.stamps.concat( elems );\n  // ignore\n  elems.forEach( this.ignore, this );\n};\n\n/**\n * removes elements to stamps\n * @param {NodeList, Array, or Element} elems\n */\nproto.unstamp = function( elems ) {\n  elems = this._find( elems );\n  if ( !elems ){\n    return;\n  }\n\n  elems.forEach( function( elem ) {\n    // filter out removed stamp elements\n    utils.removeFrom( this.stamps, elem );\n    this.unignore( elem );\n  }, this );\n};\n\n/**\n * finds child elements\n * @param {NodeList, Array, Element, or String} elems\n * @returns {Array} elems\n */\nproto._find = function( elems ) {\n  if ( !elems ) {\n    return;\n  }\n  // if string, use argument as selector string\n  if ( typeof elems == 'string' ) {\n    elems = this.element.querySelectorAll( elems );\n  }\n  elems = utils.makeArray( elems );\n  return elems;\n};\n\nproto._manageStamps = function() {\n  if ( !this.stamps || !this.stamps.length ) {\n    return;\n  }\n\n  this._getBoundingRect();\n\n  this.stamps.forEach( this._manageStamp, this );\n};\n\n// update boundingLeft / Top\nproto._getBoundingRect = function() {\n  // get bounding rect for container element\n  var boundingRect = this.element.getBoundingClientRect();\n  var size = this.size;\n  this._boundingRect = {\n    left: boundingRect.left + size.paddingLeft + size.borderLeftWidth,\n    top: boundingRect.top + size.paddingTop + size.borderTopWidth,\n    right: boundingRect.right - ( size.paddingRight + size.borderRightWidth ),\n    bottom: boundingRect.bottom - ( size.paddingBottom + size.borderBottomWidth )\n  };\n};\n\n/**\n * @param {Element} stamp\n**/\nproto._manageStamp = noop;\n\n/**\n * get x/y position of element relative to container element\n * @param {Element} elem\n * @returns {Object} offset - has left, top, right, bottom\n */\nproto._getElementOffset = function( elem ) {\n  var boundingRect = elem.getBoundingClientRect();\n  var thisRect = this._boundingRect;\n  var size = getSize( elem );\n  var offset = {\n    left: boundingRect.left - thisRect.left - size.marginLeft,\n    top: boundingRect.top - thisRect.top - size.marginTop,\n    right: thisRect.right - boundingRect.right - size.marginRight,\n    bottom: thisRect.bottom - boundingRect.bottom - size.marginBottom\n  };\n  return offset;\n};\n\n// -------------------------- resize -------------------------- //\n\n// enable event handlers for listeners\n// i.e. resize -> onresize\nproto.handleEvent = utils.handleEvent;\n\n/**\n * Bind layout to window resizing\n */\nproto.bindResize = function() {\n  window.addEventListener( 'resize', this );\n  this.isResizeBound = true;\n};\n\n/**\n * Unbind layout to window resizing\n */\nproto.unbindResize = function() {\n  window.removeEventListener( 'resize', this );\n  this.isResizeBound = false;\n};\n\nproto.onresize = function() {\n  this.resize();\n};\n\nutils.debounceMethod( Outlayer, 'onresize', 100 );\n\nproto.resize = function() {\n  // don't trigger if size did not change\n  // or if resize was unbound. See #9\n  if ( !this.isResizeBound || !this.needsResizeLayout() ) {\n    return;\n  }\n\n  this.layout();\n};\n\n/**\n * check if layout is needed post layout\n * @returns Boolean\n */\nproto.needsResizeLayout = function() {\n  var size = getSize( this.element );\n  // check that this.size and size are there\n  // IE8 triggers resize on body size change, so they might not be\n  var hasSizes = this.size && size;\n  return hasSizes && size.innerWidth !== this.size.innerWidth;\n};\n\n// -------------------------- methods -------------------------- //\n\n/**\n * add items to Outlayer instance\n * @param {Array or NodeList or Element} elems\n * @returns {Array} items - Outlayer.Items\n**/\nproto.addItems = function( elems ) {\n  var items = this._itemize( elems );\n  // add items to collection\n  if ( items.length ) {\n    this.items = this.items.concat( items );\n  }\n  return items;\n};\n\n/**\n * Layout newly-appended item elements\n * @param {Array or NodeList or Element} elems\n */\nproto.appended = function( elems ) {\n  var items = this.addItems( elems );\n  if ( !items.length ) {\n    return;\n  }\n  // layout and reveal just the new items\n  this.layoutItems( items, true );\n  this.reveal( items );\n};\n\n/**\n * Layout prepended elements\n * @param {Array or NodeList or Element} elems\n */\nproto.prepended = function( elems ) {\n  var items = this._itemize( elems );\n  if ( !items.length ) {\n    return;\n  }\n  // add items to beginning of collection\n  var previousItems = this.items.slice(0);\n  this.items = items.concat( previousItems );\n  // start new layout\n  this._resetLayout();\n  this._manageStamps();\n  // layout new stuff without transition\n  this.layoutItems( items, true );\n  this.reveal( items );\n  // layout previous items\n  this.layoutItems( previousItems );\n};\n\n/**\n * reveal a collection of items\n * @param {Array of Outlayer.Items} items\n */\nproto.reveal = function( items ) {\n  this._emitCompleteOnItems( 'reveal', items );\n  if ( !items || !items.length ) {\n    return;\n  }\n  var stagger = this.updateStagger();\n  items.forEach( function( item, i ) {\n    item.stagger( i * stagger );\n    item.reveal();\n  });\n};\n\n/**\n * hide a collection of items\n * @param {Array of Outlayer.Items} items\n */\nproto.hide = function( items ) {\n  this._emitCompleteOnItems( 'hide', items );\n  if ( !items || !items.length ) {\n    return;\n  }\n  var stagger = this.updateStagger();\n  items.forEach( function( item, i ) {\n    item.stagger( i * stagger );\n    item.hide();\n  });\n};\n\n/**\n * reveal item elements\n * @param {Array}, {Element}, {NodeList} items\n */\nproto.revealItemElements = function( elems ) {\n  var items = this.getItems( elems );\n  this.reveal( items );\n};\n\n/**\n * hide item elements\n * @param {Array}, {Element}, {NodeList} items\n */\nproto.hideItemElements = function( elems ) {\n  var items = this.getItems( elems );\n  this.hide( items );\n};\n\n/**\n * get Outlayer.Item, given an Element\n * @param {Element} elem\n * @param {Function} callback\n * @returns {Outlayer.Item} item\n */\nproto.getItem = function( elem ) {\n  // loop through items to get the one that matches\n  for ( var i=0; i < this.items.length; i++ ) {\n    var item = this.items[i];\n    if ( item.element == elem ) {\n      // return item\n      return item;\n    }\n  }\n};\n\n/**\n * get collection of Outlayer.Items, given Elements\n * @param {Array} elems\n * @returns {Array} items - Outlayer.Items\n */\nproto.getItems = function( elems ) {\n  elems = utils.makeArray( elems );\n  var items = [];\n  elems.forEach( function( elem ) {\n    var item = this.getItem( elem );\n    if ( item ) {\n      items.push( item );\n    }\n  }, this );\n\n  return items;\n};\n\n/**\n * remove element(s) from instance and DOM\n * @param {Array or NodeList or Element} elems\n */\nproto.remove = function( elems ) {\n  var removeItems = this.getItems( elems );\n\n  this._emitCompleteOnItems( 'remove', removeItems );\n\n  // bail if no items to remove\n  if ( !removeItems || !removeItems.length ) {\n    return;\n  }\n\n  removeItems.forEach( function( item ) {\n    item.remove();\n    // remove item from collection\n    utils.removeFrom( this.items, item );\n  }, this );\n};\n\n// ----- destroy ----- //\n\n// remove and disable Outlayer instance\nproto.destroy = function() {\n  // clean up dynamic styles\n  var style = this.element.style;\n  style.height = '';\n  style.position = '';\n  style.width = '';\n  // destroy items\n  this.items.forEach( function( item ) {\n    item.destroy();\n  });\n\n  this.unbindResize();\n\n  var id = this.element.outlayerGUID;\n  delete instances[ id ]; // remove reference to instance by id\n  delete this.element.outlayerGUID;\n  // remove data for jQuery\n  if ( jQuery ) {\n    jQuery.removeData( this.element, this.constructor.namespace );\n  }\n\n};\n\n// -------------------------- data -------------------------- //\n\n/**\n * get Outlayer instance from element\n * @param {Element} elem\n * @returns {Outlayer}\n */\nOutlayer.data = function( elem ) {\n  elem = utils.getQueryElement( elem );\n  var id = elem && elem.outlayerGUID;\n  return id && instances[ id ];\n};\n\n\n// -------------------------- create Outlayer class -------------------------- //\n\n/**\n * create a layout class\n * @param {String} namespace\n */\nOutlayer.create = function( namespace, options ) {\n  // sub-class Outlayer\n  var Layout = subclass( Outlayer );\n  // apply new options and compatOptions\n  Layout.defaults = utils.extend( {}, Outlayer.defaults );\n  utils.extend( Layout.defaults, options );\n  Layout.compatOptions = utils.extend( {}, Outlayer.compatOptions  );\n\n  Layout.namespace = namespace;\n\n  Layout.data = Outlayer.data;\n\n  // sub-class Item\n  Layout.Item = subclass( Item );\n\n  // -------------------------- declarative -------------------------- //\n\n  utils.htmlInit( Layout, namespace );\n\n  // -------------------------- jQuery bridge -------------------------- //\n\n  // make into jQuery plugin\n  if ( jQuery && jQuery.bridget ) {\n    jQuery.bridget( namespace, Layout );\n  }\n\n  return Layout;\n};\n\nfunction subclass( Parent ) {\n  function SubClass() {\n    Parent.apply( this, arguments );\n  }\n\n  SubClass.prototype = Object.create( Parent.prototype );\n  SubClass.prototype.constructor = SubClass;\n\n  return SubClass;\n}\n\n// ----- helpers ----- //\n\n// how many milliseconds are in each unit\nvar msUnits = {\n  ms: 1,\n  s: 1000\n};\n\n// munge time-like parameter into millisecond number\n// '0.4s' -> 40\nfunction getMilliseconds( time ) {\n  if ( typeof time == 'number' ) {\n    return time;\n  }\n  var matches = time.match( /(^\\d*\\.?\\d*)(\\w*)/ );\n  var num = matches && matches[1];\n  var unit = matches && matches[2];\n  if ( !num.length ) {\n    return 0;\n  }\n  num = parseFloat( num );\n  var mult = msUnits[ unit ] || 1;\n  return num * mult;\n}\n\n// ----- fin ----- //\n\n// back in global\nOutlayer.Item = Item;\n\nreturn Outlayer;\n\n}));\n","function _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n  for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i];\n  return arr2;\n}\nmodule.exports = _arrayLikeToArray, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","var arrayLikeToArray = require(\"./arrayLikeToArray.js\");\nfunction _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) return arrayLikeToArray(arr);\n}\nmodule.exports = _arrayWithoutHoles, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","var unsupportedIterableToArray = require(\"./unsupportedIterableToArray.js\");\nfunction _createForOfIteratorHelper(o, allowArrayLike) {\n  var it = typeof Symbol !== \"undefined\" && o[Symbol.iterator] || o[\"@@iterator\"];\n  if (!it) {\n    if (Array.isArray(o) || (it = unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") {\n      if (it) o = it;\n      var i = 0;\n      var F = function F() {};\n      return {\n        s: F,\n        n: function n() {\n          if (i >= o.length) return {\n            done: true\n          };\n          return {\n            done: false,\n            value: o[i++]\n          };\n        },\n        e: function e(_e) {\n          throw _e;\n        },\n        f: F\n      };\n    }\n    throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n  }\n  var normalCompletion = true,\n    didErr = false,\n    err;\n  return {\n    s: function s() {\n      it = it.call(o);\n    },\n    n: function n() {\n      var step = it.next();\n      normalCompletion = step.done;\n      return step;\n    },\n    e: function e(_e2) {\n      didErr = true;\n      err = _e2;\n    },\n    f: function f() {\n      try {\n        if (!normalCompletion && it[\"return\"] != null) it[\"return\"]();\n      } finally {\n        if (didErr) throw err;\n      }\n    }\n  };\n}\nmodule.exports = _createForOfIteratorHelper, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","function _iterableToArray(iter) {\n  if (typeof Symbol !== \"undefined\" && iter[Symbol.iterator] != null || iter[\"@@iterator\"] != null) return Array.from(iter);\n}\nmodule.exports = _iterableToArray, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","function _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\nmodule.exports = _nonIterableSpread, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","var arrayWithoutHoles = require(\"./arrayWithoutHoles.js\");\nvar iterableToArray = require(\"./iterableToArray.js\");\nvar unsupportedIterableToArray = require(\"./unsupportedIterableToArray.js\");\nvar nonIterableSpread = require(\"./nonIterableSpread.js\");\nfunction _toConsumableArray(arr) {\n  return arrayWithoutHoles(arr) || iterableToArray(arr) || unsupportedIterableToArray(arr) || nonIterableSpread();\n}\nmodule.exports = _toConsumableArray, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","var arrayLikeToArray = require(\"./arrayLikeToArray.js\");\nfunction _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return arrayLikeToArray(o, minLen);\n}\nmodule.exports = _unsupportedIterableToArray, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;"],"names":["window","factory","define","matchesMethod","ElemProto","Element","prototype","matches","matchesSelector","prefixes","i","length","method","elem","selector","EvEmitter","proto","on","eventName","listener","events","this","_events","listeners","indexOf","push","once","onceEvents","_onceEvents","off","index","splice","emitEvent","args","slice","onceListeners","apply","allOff","utils","a","b","prop","num","div","arraySlice","Array","makeArray","obj","isArray","undefined","call","removeFrom","ary","getParent","parentNode","document","body","getQueryElement","querySelector","handleEvent","event","type","filterFindElements","elems","ffElems","forEach","HTMLElement","childElems","querySelectorAll","debounceMethod","_class","methodName","threshold","timeoutName","timeout","clearTimeout","arguments","_this","setTimeout","docReady","callback","readyState","addEventListener","toDashed","str","replace","match","$1","$2","toLowerCase","console","htmlInit","WidgetClass","namespace","dashedNamespace","dataAttr","dataAttrElems","jsDashElems","concat","dataOptionsAttr","jQuery","options","attr","getAttribute","JSON","parse","error","className","instance","data","getStyleSize","value","parseFloat","isNaN","noop","logError","message","measurements","measurementsLength","getZeroSize","size","width","height","innerWidth","innerHeight","outerWidth","outerHeight","getStyle","style","getComputedStyle","isBoxSizeOuter","isSetup","setup","createElement","padding","borderStyle","borderWidth","boxSizing","documentElement","appendChild","Math","round","getSize","removeChild","nodeType","display","offsetWidth","offsetHeight","isBorderBox","measurement","paddingWidth","paddingLeft","paddingRight","paddingHeight","paddingTop","paddingBottom","marginWidth","marginLeft","marginRight","marginHeight","marginTop","marginBottom","borderLeftWidth","borderRightWidth","borderHeight","borderTopWidth","borderBottomWidth","isBorderBoxSizeOuter","styleWidth","styleHeight","module","exports","require","imagesLoaded","$","ImagesLoaded","onAlways","queryElem","elements","_toConsumableArray","Object","assign","getImages","jqDeferred","Deferred","check","bind","create","images","addElementImages","elementNodeTypes","nodeName","addImage","background","addElementBackgroundImages","includes","_step","childImgs","_iterator","_createForOfIteratorHelper","s","n","done","img","err","e","f","_step2","children","_iterator2","child","reURL","LoadingImage","Background","url","element","Image","exec","backgroundImage","addBackground","loadingImage","progressedCount","hasAnyBroken","onProgress","image","progress","complete","isLoaded","notify","debug","log","isComplete","jqMethod","getIsImageComplete","confirm","naturalWidth","proxyImage","crossOrigin","src","currentSrc","onload","unbindEvents","onerror","removeEventListener","makeJQueryPlugin","fn","promise","global","lGEvents","hashSettings","hash","galleryId","customSlideName","Hash","$LG","core","settings","__assign","init","oldHash","location","buildFromHash","LGel","onAfterSlide","onCloseAfter","lgId","onHashchange","slideName","galleryItems","detail","history","replaceState","pathname","search","getIndexFromUrl","split","_idx","parseInt","_hash","addClass","openGallery","title","lgOpened","slide","lGalleryOn","closeGallery","removeClass","destroy","thumbnailsSettings","thumbnail","animateThumb","currentPagerPosition","alignThumbnails","thumbWidth","thumbHeight","thumbMargin","appendThumbnailsTo","toggleThumb","enableThumbDrag","enableThumbSwipe","thumbnailSwipeThreshold","loadYouTubeThumbnail","youTubeThumbSize","thumbnailPluginStrings","toggleThumbnails","Thumbnail","thumbOuterWidth","thumbTotalWidth","translateX","thumbClickable","setAnimateThumbStyles","allowMediaOverlap","build","toggleThumbBar","thumbKeyPress","setThumbMarkup","manageActiveClassOnSlideChange","$lgThumb","first","$target","target","hasAttribute","lgBusy","outer","get","rebuildThumbnails","thumbOuterClassNames","html","$lgComponents","append","$thumbOuter","find","css","speed","setThumbItemHtml","thumbDragUtils","cords","startX","endX","isMoved","newTranslateX","startTime","Date","endTime","touchMoveTime","isDragging","preventDefault","pageX","scrollLeft","onThumbTouchMove","onThumbTouchEnd","targetTouches","empty","setTranslate","getPossibleTransformX","left","position","valueOf","touchDuration","distanceXnew","speedX","abs","min","getThumbHtml","thumb","alt","thumbImg","slideVideoInfo","__slideVideoInfo","youtube","altAttr","getThumbItemHtml","items","thumbList","$thumb","eq","$toolbar","toggleClass","keyCode","remove","videoSettings","autoplayFirstVideo","youTubePlayerParams","vimeoPlayerParams","wistiaPlayerParams","gotoNextSlideOnVideoEnd","autoplayVideoOnSlide","videojs","videojsTheme","videojsOptions","param","keys","map","k","encodeURIComponent","join","getYouTubeParams","videoInfo","youTubePlayerParamsSettings","slideUrlParams","p","reduce","pair","_a","decodeURIComponent","key","playerParamsSettings","wmode","autoplay","mute","enablejsapi","Video","onHasVideo","$el","getSlideItem","loadVideoOnPosterClick","onSlideItemLoad","onBeforeSlide","isFirstSlide","loadAndPlayVideo","html5Video","hasPoster","appendVideos","prevIndex","pauseVideo","$slide","hasClass","poster","playVideo","controlVideo","getVideoHtml","video","currentGalleryItem","videoTitle","commonIframeProps","videoId","youTubeParams","vimeo","playerParams","defaultParams","urlParams","defaultPlayerParams","pop","isPrivate","getVimeoURLParams","wistia","wistiaId","html5","html5VideoMarkup","source","tracks","trackAttributes","track","html5VideoAttrs_1","videoAttributes_1","attributes","el","videoParams","videoHtml","$videoElement","stopPropagation","goToNextSlide","Vimeo","Player","_wq","id","onReady","action","contentWindow","postMessage","forcePlay","_html","_src","videoJsPlayer_1","$tempImg","ready","onVideoLoadAfterPosterClick","zoomSettings","scale","zoom","infiniteZoom","actualSize","showZoomInOutIcons","actualSizeIcons","zoomIn","zoomOut","enableZoomAfter","zoomPluginStrings","viewActualSize","Zoom","buildTemplates","zoomIcons","getIdName","enableZoom","_speed","delay","zoomableTimeout","isImageSlide","setZoomEssentials","enableZoomOnSlideItemLoad","getDragCords","x","y","pageY","getSwipeCords","touches","getDragAllowedAxises","scaleDiff","$image","rect","getBoundingClientRect","allowY","containerRect","allowX","$content","zoomImage","reposition","resetToMax","originalX","originalY","offsetX","offsetY","top","scrollTop","positionChanged","dragAllowedAxises","possibleSwipeCords","getPossibleSwipeDragCords","_x","_y","scaleVal","isBeyondPossibleLeft","minX","isBeyondPossibleRight","maxX","isBeyondPossibleTop","minY","isBeyondPossibleBottom","maxY","setZoomStyles","setZoomImageSize","resetImageTranslate","imageReset","actualSizeScale","getCurrentImageActualSizeScale","naturalHeight","ZOOM_TRANSITION_DURATION","$imageWrap","$dummyImage","transform","setActualSize","zoomInProgress","currentItem","prevScale","getScale","setPageCords","beginZoom","getNaturalWidth","getActualSizeScale","getPageCords","pageCords","manageActualPixelClassNames","getElementById","resetZoom","tapped","touchAction","_LGel","setZoomSwipeStyles","zoomDrag","pinchZoom","zoomSwipe","$actualSize","$item","removeAttr","getTouchDistance","sqrt","startDist","pinchStarted","initScale","$inner","contains","endDist","distance","_scale","max","Number","EPSILON","diff","touchendZoom","startCoords","endCoords","distanceYnew","speedY","getZoomSwipeCords","diffMinY","diffMaxY","diffMinX","difMaxX","getSlideType","bottom","mediaContainerPosition","imgRect","imageHeight","imageWidth","t","hasOwnProperty","lightGalleryCoreSettings","mode","easing","licenseKey","startClass","backdropDuration","container","startAnimationDuration","zoomFromOrigin","hideBarsDelay","showBarsAfter","slideDelay","supportLegacyBrowser","videoMaxSize","loadYouTubePoster","defaultCaptionHeight","ariaLabelledby","ariaDescribedby","resetScrollPosition","hideScrollbar","closable","swipeToClose","closeOnTap","showCloseIcon","showMaximizeIcon","loop","escKey","keyPress","trapFocus","controls","slideEndAnimation","hideControlOnEnd","mousewheel","getCaptionFromTitleOrAlt","appendSubHtmlTo","subHtmlSelectorRelative","preload","numberOfSlideItemsInDom","selectWithin","nextHtml","prevHtml","iframeWidth","iframeHeight","iframeMaxWidth","iframeMaxHeight","download","counter","appendCounterTo","swipeThreshold","enableSwipe","enableDrag","dynamic","dynamicEl","extraProps","exThumbImage","isMobile","mobileSettings","plugins","strings","toggleMaximize","previousSlide","nextSlide","mediaLoadingFailed","lgQuery","cssVenderPrefixes","_getSelector","firstElement","_getFirstEl","generateUUID","c","r","random","toString","context","substring","_each","func","_setCssVendorPrefix","cssProperty","property","group1","toUpperCase","charAt","isEventMatched","eventNamespace","filter","every","setAttribute","parent","parentElement","attrs","removeAttribute","wrap","wrapper","insertBefore","classNames","classList","add","attribute","eventListeners","trigger","customEvent","CustomEvent","dispatchEvent","load","fetch","then","res","text","innerHTML","insertAdjacentHTML","prepend","pageYOffset","pageXOffset","offset","bodyMarginLeft","currentStyle","clientWidth","clientHeight","params","bubbles","cancelable","evt","createEvent","initCustomEvent","msMatchesSelector","webkitMatchesSelector","defaultDynamicOptions","convertToData","g","spacing","defaultLgSize","lgSize","isResponsiveSizes","wWidth","size_1","cWidth","cHeight","maxWidth","maxHeight","ratio","imageSize","wHeight","elWidth","elHeight","elStyle","borderLeft","borderTop","iframeTitle","srcset","sizes","sources","imgMarkup","sourceTag","srcItms","rsWidth","rsSrc","j","_poster","dummyImg","videoContStyle","playVideoString","_isVideo","visibility","dynamicElements","availableDynamicOptions","il","jl","__spreadArrays","item","specified","dynamicAttr","name","label","subHtml","test","navigator","userAgent","isHTML5VIdeo","LightGallery","currentItemsInDom","prevScrollTop","bodyPaddingRight","isDummyImageRemoved","dragOrSwipeEnabled","generateSettings","buildModules","getItems","normalizeSettings","validateLicense","addSlideVideoInfo","buildStructure","triggerPosterClick","arrow","openGalleryOnItemClick","_loop_1","this_1","$element","uuid","currentItemIndex","plugin","warn","getSlideItemId","manageSingleSlideClassName","$container","subHtmlCont","addClasses","containerClassName","closeIcon","maximizeIcon","template","$backdrop","outerClassNames","refreshOnResize","hideBars","manageCloseGallery","initModules","getMediaContainerPosition","top_1","currentImageSize","resizeVideoSlide","imgStyle","getDummyImgStyles","lgVideoStyle","getVideoContStyle","updateSlides","updateControls","_index","some","galleryItem","itemIndex","organizeSlideItems","loadContent","updateCurrentCounter","shouldHideScrollbar","bodyRect","scrollbarWidth","resetScrollBar","itemsToBeInsertedToDom","getItemsToBeInsertedToDom","addHtml","setMediaContainerPosition","currentSlide_1","captionHeight","thumbContainer","hideBarTimeout","initPictureFill","$img","picturefill","counterHtml","subHtmlUrl","fL","currentSlide","getDummyImageContent","$currentSlide","$currentItem","_dummyImgSrc","dummyImgContent","setImgMarkup","isFirstSlideWithZoomAnimation","onSlideObjectLoad","isHTML5VideoWithoutPoster","onLoad","onError","mediaObject","onLgObjectLoad","triggerSlideItemLoad","rec","_html5Video","responsive","srcDyItms","iframe","top_2","videoSize","markup","loadContentOnFirstSlideLoad","numberOfItems","possibleNumberOfItems","prevIndexItem","_element","idx","numberOfExistingItems","getPreviousSlideIndex","currentItemId","setDownloadValue","downloadUrl","$download","makeSlideAnimation","direction","currentSlideItem","previousSlideItem","fromTouch","fromThumb","numberOfGalleryItems","previousSlideItem_1","top_3","arrowDisable","touchPrev","touchNext","updateCounterTotal","touchMove","distanceX","distanceY","allowSwipe","swipeDirection","gutter","opacity","touchEnd","triggerClick","distanceAbs","goToPrevSlide","isPosterElement","isSwiping","manageSwipeClass","isDraging","_touchNext","_touchPrev","_loop","$prev","$next","xValue","yValue","scaleX","scaleY","lastCall","deltaY","now","getTime","isSlideElement","playButton","invalidateItems","focus","preventScroll","focusableEls","firstFocusableEl","lastFocusableEl","shiftKey","activeElement","mousedown","force","top_4","_b","destroyModules","removeTimeout","blur","refresh","destroyGallery","closeTimeout","Outlayer","Masonry","compatOptions","fitWidth","_resetLayout","_getMeasurement","measureColumns","colYs","cols","horizontalColIndex","getContainerWidth","columnWidth","firstItem","firstItemElem","containerWidth","excess","_getOption","_getItemLayoutPosition","remainder","colSpan","colPosition","horizontalOrder","col","setHeight","setMax","_getTopColPosition","colGroup","_getTopColGroup","minimumY","groupCount","_getColGroupY","groupColYs","_getHorizontalColPosition","hasSize","_manageStamp","stamp","stampSize","_getElementOffset","firstX","right","lastX","firstCol","floor","lastCol","stampMaxY","_getContainerSize","_getContainerFitWidth","unusedCols","needsResizeLayout","previousWidth","isEmptyObj","docElemStyle","transitionProperty","transition","transformProperty","transitionEndEvent","WebkitTransition","vendorProperties","transitionDuration","transitionDelay","Item","layout","_create","toDashedAll","constructor","_transn","ingProperties","clean","onEnd","elemStyle","getPosition","isOriginLeft","isOriginTop","layoutSize","layoutPosition","xPadding","xProperty","xResetProperty","getXValue","yPadding","yProperty","yResetProperty","getYValue","isHorizontal","percentPosition","_transitionTo","curX","curY","didNotMove","setPosition","isTransitioning","transX","transY","transitionStyle","getTranslate","to","onTransitionEnd","isCleaning","goTo","moveTo","_nonTransition","_removeStyles","_transition","from","enableTransition","transitionProps","duration","staggerDelay","onwebkitTransitionEnd","ontransitionend","onotransitionend","dashedVendorProperties","propertyName","disableTransition","removeTransitionStyles","cleanStyle","cleanTransitionStyle","stagger","removeElem","hide","reveal","isHidden","getHideRevealTransitionEndProperty","onRevealTransitionEnd","hiddenStyle","visibleStyle","styleProperty","optionStyle","onHideTransitionEnd","GUID","instances","queryElement","extend","defaults","option","outlayerGUID","containerStyle","initLayout","originLeft","originTop","resize","resizeContainer","subclass","Parent","SubClass","opts","oldOption","horizontal","layoutInstant","reloadItems","stamps","bindResize","_itemize","itemElems","_filterFindItemElements","itemSelector","getItemElements","_manageStamps","isInstant","_isLayoutInited","layoutItems","_init","_getItemsForLayout","_layoutItems","_postLayout","isIgnored","_emitCompleteOnItems","queue","isLayoutInstant","_processLayoutQueue","updateStagger","_positionItem","getMilliseconds","_setContainerMeasure","measure","isWidth","elemSize","onComplete","count","doneCount","tick","emitArgs","$event","Event","ignore","getItem","unignore","_find","unstamp","_getBoundingRect","boundingRect","_boundingRect","thisRect","isResizeBound","unbindResize","onresize","addItems","appended","prepended","previousItems","revealItemElements","hideItemElements","removeItems","removeData","Layout","bridget","msUnits","ms","time","unit","arr","len","arr2","__esModule","arrayLikeToArray","unsupportedIterableToArray","o","allowArrayLike","it","Symbol","iterator","F","_e","TypeError","normalCompletion","didErr","step","next","_e2","iter","arrayWithoutHoles","iterableToArray","nonIterableSpread","minLen"],"sourceRoot":""}